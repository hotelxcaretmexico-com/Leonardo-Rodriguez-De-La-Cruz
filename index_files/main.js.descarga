define("common.module/js/deepExtend",[],function(){var e=function(t,n){for(var r in n)n[r]&&n[r].constructor&&n[r].constructor===Object?(t[r]=t[r]||{},e(t[r],n[r])):n[r]&&n[r]instanceof Array?(t[r]=t[r]||[],e(t[r],n[r])):t[r]=n[r];return t};return e}),define("common.module/js/polyfill/objectCreate",[],function(){return function(){typeof Object.create!="function"&&function(){var e=function(){};Object.create=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(t===null)throw Error("Cannot set a null [[Prototype]]");if(typeof t!="object")throw TypeError("Argument must be an object");return e.prototype=t,new e}}()}}),define("common.module/js/polyfill/arrayIndexOf",[],function(){return function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:r!==0&&r!==Infinity&&r!==-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1})}}),define("common.module/js/polyfill/dateToIsoString",[],function(){return function(){Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}()}}),define("common.module/js/polyfill/dateFromIso",[],function(){return function(){(function(){var e=new Date("2011-06-02T09:34:29+02:00");!e||+e!==1307000069e3?Date.fromISO=function(e){var t,n,r=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,i=r.exec(e)||[];if(i[1]){t=i[1].split(/\D/);for(var s=0,o=t.length;s<o;s++)t[s]=parseInt(t[s],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(i[5]&&(n=parseInt(i[5],10)*60,i[6]&&(n+=parseInt(i[6],10)),i[4]==="+"&&(n*=-1),n&&t.setUTCMinutes(t.getUTCMinutes()+n)),t):NaN}return NaN}:Date.fromISO=function(e){return new Date(e)}})()}}),define("common.module/js/polyfill/all",["./objectCreate","./arrayIndexOf","./dateToIsoString","./dateFromIso"],function(e,t,n,r){return function(){e(),t(),n(),r()}}),define("boxes/core.module/js/modelSanitizer",[],function(){var e={},t="NA",n="M",r="I",i="C",s="A",o=function(e){return e===t||e===n||e===r||e===i||e===s},u=function(e,t){var n=t||0;return Number(e)||n},a=function(t,n){var r=JSON.parse(JSON.stringify(n)),i=t in e?e[t](n):n;return Object.keys(r).map(function(e){r[e]=typeof i[e]=="number"?i[e]:r[e]}),r};return e.assistance=function(e){return e.adults=u(e.adults),e},e.buses=function(e){return e.passengers=u(e.passengers),e},e.cars=function(e){return e},e.flights=function(e){return e.rooms=u(e.rooms),e.adults=u(e.adults),e.minors=u(e.minors),o(e.minor_1_age)||(e.minor_1_age=u(e.minor_1_age)),o(e.minor_2_age)||(e.minor_2_age=u(e.minor_2_age)),o(e.minor_3_age)||(e.minor_3_age=u(e.minor_3_age)),o(e.minor_4_age)||(e.minor_4_age=u(e.minor_4_age)),o(e.minor_5_age)||(e.minor_5_age=u(e.minor_5_age)),o(e.minor_6_age)||(e.minor_6_age=u(e.minor_6_age)),o(e.minor_7_age)||(e.minor_7_age=u(e.minor_7_age)),e.room_1_adults=u(e.room_1_adults),e.room_1_minors=u(e.room_1_minors),e.room_1_minor_1_age=u(e.room_1_minor_1_age),e.room_1_minor_2_age=u(e.room_1_minor_2_age),e.room_1_minor_3_age=u(e.room_1_minor_3_age),e.room_1_minor_4_age=u(e.room_1_minor_4_age),e.room_1_minor_5_age=u(e.room_1_minor_5_age),e.room_1_minor_6_age=u(e.room_1_minor_6_age),e.room_1_minor_7_age=u(e.room_1_minor_7_age),e.room_2_adults=u(e.room_2_adults),e.room_2_minors=u(e.room_2_minors),e.room_2_minor_1_age=u(e.room_2_minor_1_age),e.room_2_minor_2_age=u(e.room_2_minor_2_age),e.room_2_minor_3_age=u(e.room_2_minor_3_age),e.room_2_minor_4_age=u(e.room_2_minor_4_age),e.room_2_minor_5_age=u(e.room_2_minor_5_age),e.room_2_minor_6_age=u(e.room_2_minor_6_age),e.room_2_minor_7_age=u(e.room_2_minor_7_age),e.room_3_adults=u(e.room_3_adults),e.room_3_minors=u(e.room_3_minors),e.room_3_minor_1_age=u(e.room_3_minor_1_age),e.room_3_minor_2_age=u(e.room_3_minor_2_age),e.room_3_minor_3_age=u(e.room_3_minor_3_age),e.room_3_minor_4_age=u(e.room_3_minor_4_age),e.room_3_minor_5_age=u(e.room_3_minor_5_age),e.room_3_minor_6_age=u(e.room_3_minor_6_age),e.room_3_minor_7_age=u(e.room_3_minor_7_age),e.room_4_adults=u(e.room_4_adults),e.room_4_minors=u(e.room_4_minors),e.room_4_minor_1_age=u(e.room_4_minor_1_age),e.room_4_minor_2_age=u(e.room_4_minor_2_age),e.room_4_minor_3_age=u(e.room_4_minor_3_age),e.room_4_minor_4_age=u(e.room_4_minor_4_age),e.room_4_minor_5_age=u(e.room_4_minor_5_age),e.room_4_minor_6_age=u(e.room_4_minor_6_age),e.room_4_minor_7_age=u(e.room_4_minor_7_age),e},e.hotels=function(e){return e.rooms=u(e.rooms,1),e.room_1_adults=u(e.room_1_adults),e.room_1_minors=u(e.room_1_minors),e.room_1_minor_1_age=u(e.room_1_minor_1_age),e.room_1_minor_2_age=u(e.room_1_minor_2_age),e.room_1_minor_3_age=u(e.room_1_minor_3_age),e.room_1_minor_4_age=u(e.room_1_minor_4_age),e.room_1_minor_5_age=u(e.room_1_minor_5_age),e.room_1_minor_6_age=u(e.room_1_minor_6_age),e.room_1_minor_7_age=u(e.room_1_minor_7_age),e.room_2_adults=u(e.room_2_adults),e.room_2_minors=u(e.room_2_minors),e.room_2_minor_1_age=u(e.room_2_minor_1_age),e.room_2_minor_2_age=u(e.room_2_minor_2_age),e.room_2_minor_3_age=u(e.room_2_minor_3_age),e.room_2_minor_4_age=u(e.room_2_minor_4_age),e.room_2_minor_5_age=u(e.room_2_minor_5_age),e.room_2_minor_6_age=u(e.room_2_minor_6_age),e.room_2_minor_7_age=u(e.room_2_minor_7_age),e.room_3_adults=u(e.room_3_adults),e.room_3_minors=u(e.room_3_minors),e.room_3_minor_1_age=u(e.room_3_minor_1_age),e.room_3_minor_2_age=u(e.room_3_minor_2_age),e.room_3_minor_3_age=u(e.room_3_minor_3_age),e.room_3_minor_4_age=u(e.room_3_minor_4_age),e.room_3_minor_5_age=u(e.room_3_minor_5_age),e.room_3_minor_6_age=u(e.room_3_minor_6_age),e.room_3_minor_7_age=u(e.room_3_minor_7_age),e.room_4_adults=u(e.room_4_adults),e.room_4_minors=u(e.room_4_minors),e.room_4_minor_1_age=u(e.room_4_minor_1_age),e.room_4_minor_2_age=u(e.room_4_minor_2_age),e.room_4_minor_3_age=u(e.room_4_minor_3_age),e.room_4_minor_4_age=u(e.room_4_minor_4_age),e.room_4_minor_5_age=u(e.room_4_minor_5_age),e.room_4_minor_6_age=u(e.room_4_minor_6_age),e.room_4_minor_7_age=u(e.room_4_minor_7_age),e},e.packages=function(e){return e.rooms=u(e.rooms),e.adults=u(e.adults),e.infants=u(e.infants),e.children=u(e.children),e.minors=u(e.minors),e.room_1_adults=u(e.room_1_adults),e.room_1_minors=u(e.room_1_minors),e.room_1_minor_1_age=u(e.room_1_minor_1_age),e.room_1_minor_2_age=u(e.room_1_minor_2_age),e.room_1_minor_3_age=u(e.room_1_minor_3_age),e.room_1_minor_4_age=u(e.room_1_minor_4_age),e.room_1_minor_5_age=u(e.room_1_minor_5_age),e.room_1_minor_6_age=u(e.room_1_minor_6_age),e.room_1_minor_7_age=u(e.room_1_minor_7_age),e.room_2_adults=u(e.room_2_adults),e.room_2_minors=u(e.room_2_minors),e.room_2_minor_1_age=u(e.room_2_minor_1_age),e.room_2_minor_2_age=u(e.room_2_minor_2_age),e.room_2_minor_3_age=u(e.room_2_minor_3_age),e.room_2_minor_4_age=u(e.room_2_minor_4_age),e.room_2_minor_5_age=u(e.room_2_minor_5_age),e.room_2_minor_6_age=u(e.room_2_minor_6_age),e.room_2_minor_7_age=u(e.room_2_minor_7_age),e.room_3_adults=u(e.room_3_adults),e.room_3_minors=u(e.room_3_minors),e.room_3_minor_1_age=u(e.room_3_minor_1_age),e.room_3_minor_2_age=u(e.room_3_minor_2_age),e.room_3_minor_3_age=u(e.room_3_minor_3_age),e.room_3_minor_4_age=u(e.room_3_minor_4_age),e.room_3_minor_5_age=u(e.room_3_minor_5_age),e.room_3_minor_6_age=u(e.room_3_minor_6_age),e.room_3_minor_7_age=u(e.room_3_minor_7_age),e.room_4_adults=u(e.room_4_adults),e.room_4_minors=u(e.room_4_minors),e.room_4_minor_1_age=u(e.room_4_minor_1_age),e.room_4_minor_2_age=u(e.room_4_minor_2_age),e.room_4_minor_3_age=u(e.room_4_minor_3_age),e.room_4_minor_4_age=u(e.room_4_minor_4_age),e.room_4_minor_5_age=u(e.room_4_minor_5_age),e.room_4_minor_6_age=u(e.room_4_minor_6_age),e.room_4_minor_7_age=u(e.room_4_minor_7_age),e},e.tickets=function(e){return e},e.transfers=function(e){return e.adults=u(e.adults),e.minors=u(e.minors),e.minor_1_age=u(e.minor_1_age),e.minor_2_age=u(e.minor_2_age),e.minor_3_age=u(e.minor_3_age),e.minor_4_age=u(e.minor_4_age),e.minor_5_age=u(e.minor_5_age),e.minor_6_age=u(e.minor_6_age),e.minor_7_age=u(e.minor_7_age),e.minor_8_age=u(e.minor_8_age),e.minor_9_age=u(e.minor_9_age),e},e.vacationrentals=function(e){return e.adults=u(e.adults),e.minors=u(e.minors),e},function(e,t){return a(e,t)}}),define("common.module/js/versionHelper",[],function(){var e=function(t,n){if(t===n)return 0;if(typeof t!="string"||typeof n!="string")return 0;var r=t.split("."),i=n.split("."),s=0;for(var o=0;o<r.length&&o<i.length&&s===0;o++)if(r[o]!==i[o]){var u=parseInt(r[o],10),a=parseInt(i[o],10);if(u!==a&&!isNaN(u)&&!isNaN(a)){var f=u-a;f!==0&&(s=f<0?-1:1)}}return s===0&&r.length>i.length&&(s=1),s===0&&r.length<i.length&&(s=-1),s};return{compare:e}}),define("common.module/js/localStorageHelper",[],function(){var e,t=function(){if(window===undefined)return!1;try{var e="test",t=window.localStorage;return t.setItem(e,"1"),t.removeItem(e),!0}catch(n){return!1}};return e=t(),{isSupported:e}}),define("common.module/js/abHelper",[],function(){var e=function(e){var t={};if(e&&e!==""){var n=e.split("|");for(var r=0;r<n.length;r+=2)n[r]!==""&&n[r+1]!==undefined&&n[r+1]!==""&&(n[r+1]==="enabled_true"?t[n[r]]={branch:"test"}:n[r+1]==="enabled_false"&&(t[n[r]]={branch:"ctrl"}))}return{isTestBranch:function(e){return t[e]!==undefined&&t[e].branch==="test"},isCtrlBranch:function(e){return t[e]===undefined||t[e]!==undefined&&t[e].branch==="ctrl"}}};return e}),define("common.module/js/topicEventHelper",[],function(){function e(e,t,n,r,i,s){n=n||1500,r=r||function(){},i=i||function(){},s=s||function(){};try{var o=new XMLHttpRequest;o.open("POST",encodeURI(t),!0),o.timeout=n,o.onreadystatechange=function(){if((o.status>=200&&o.status<300||o.status===304)&&o.readyState===4){var e=JSON.parse(o.responseText);i(o,e)}else o.status!==200&&r(o,"service_error");s(o)},o.ontimeout=function(){r(o,"timeout")},o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(JSON.stringify(e))}catch(u){}}return{post:e}}),define("common.module/js/Debug/index",[],function(){var e=function(){var e=typeof window.localStorage!="undefined"&&window.localStorage.getItem("DEBUGSBOX")==="true";return{console:function(t){e&&(typeof t=="object"&&(t=JSON.stringify(t)),window.console.log("%c[SBOX]: %c"+t,"color: blue","color: black"))}}};return new e}),function(e,t){typeof exports=="object"&&typeof require=="function"?module.exports=t(require("backbone")):typeof define=="function"&&define.amd?define("localstorage",["backbone"],function(n){return t(n||e.Backbone)}):t(Backbone)}(this,function(e){function t(){return((1+Math.random())*65536|0).toString(16).substring(1)}function n(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function r(e){return e===Object(e)}function i(e,t){var n=e.length;while(n--)if(e[n]===t)return!0;return!1}function s(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){if(e==null)return void 0;var n=e[t];return typeof n=="function"?e[t]():n}return e.LocalStorage=window.Store=function(e,t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=e,this.serializer=t||{serialize:function(e){return r(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}};var n=this.localStorage().getItem(this.name);this.records=n&&n.split(",")||[]},s(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return!e.id&&e.id!==0&&(e.id=n(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(e){this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e));var t=e.id.toString();return i(this.records,t)||(this.records.push(t),this.save()),this.find(e)},find:function(e){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(e.id)))},findAll:function(){var e=[];for(var t=0,n,r;t<this.records.length;t++)n=this.records[t],r=this.serializer.deserialize(this.localStorage().getItem(this._itemName(n))),r!=null&&e.push(r);return e},destroy:function(e){this.localStorage().removeItem(this._itemName(e.id));var t=e.id.toString();for(var n=0,r;n<this.records.length;n++)this.records[n]===t&&this.records.splice(n,1);return this.save(),e},localStorage:function(){return localStorage},_clear:function(){var e=this.localStorage(),t=new RegExp("^"+this.name+"-");e.removeItem(this.name);for(var n in e)t.test(n)&&e.removeItem(n);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(e){return this.name+"-"+e}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,n,r){var i=o(n,"localStorage")||o(n.collection,"localStorage"),s,u,f=e.$?e.$.Deferred&&e.$.Deferred():e.Deferred&&e.Deferred();try{switch(t){case"read":s=n.id!=undefined?i.find(n):i.findAll();break;case"create":s=i.create(n);break;case"update":s=i.update(n);break;case"delete":s=i.destroy(n)}}catch(l){l.code===22&&i._storageSize()===0?u="Private browsing is unsupported":u=l.message}return s?(r&&r.success&&(e.VERSION==="0.9.10"?r.success(n,s,r):r.success(s)),f&&f.resolve(s)):(u=u?u:"Record Not Found",r&&r.error&&(e.VERSION==="0.9.10"?r.error(n,u,r):r.error(u)),f&&f.reject(u)),r&&r.complete&&r.complete(s),f&&f.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.localStorage||t.collection&&t.collection.localStorage?e.localSync:e.ajaxSync},e.sync=function(t,n,r){return e.getSyncMethod(n).apply(this,[t,n,r])},e.LocalStorage}),define("boxes/core.module/js/box",["jquery","underscore","common.module/js/deepExtend","backbone","common.module/js/polyfill/all","./modelSanitizer","common.module/js/versionHelper","common.module/js/localStorageHelper","common.module/js/abHelper","common.module/js/topicEventHelper","common.module/js/Debug/index","localstorage"],function(e,t,n,r,i,s,o,u,a,f,l){i();var c=function(e,i,l,c,p){t.extend(this,r.Events),typeof this.moduleConfig!="object"&&(this.moduleConfig={}),this.options={config:n(this.moduleConfig,l.config),init:l.init,lazyload:l.lazyload,commonConfig:typeof p=="object"?JSON.parse(JSON.stringify(p)):{},sboxVersion:c,abModule:typeof p=="object"?new a(p.ab):new a("")},this.sboxVersion=c,this.moduleName=i,this.app=e,this.save=this.fetch=function(){},u.isSupported&&(this.storage=new(r.Model.extend({localStorage:new r.LocalStorage("sbox-lastSearch")}))({id:this.moduleName}),this.save=function(e){var t=this.model.toJSON();t.sbox_version=e.sboxVersion,t=this.transformBeforeSave(t),this.storage.save(this.model.publicInterface.transformOutbound(t,e.model.publicInterfaceMap).transformed)},this.fetch=function(e){e.storage.fetch({success:function(n){var r=n.toJSON(),i=r.sbox_version,u=e.options.commonConfig.pageview_id;i!==e.sboxVersion&&(o.compare(i,"4.1.33")<0?r={}:r=e.localStorageVersionHandler(JSON.parse(JSON.stringify(r)),e.sboxVersion,i)||{});if(JSON.stringify(r)!=="{}"){if(e.moduleName==="hotels"&&u){var a={pageview_id:u,type:"load",event:"local_storage",version:e.sboxVersion};f.post(a,"/hermes-service/topic/fe_components")}r=e.localStorageHandler(JSON.parse(JSON.stringify(r))),delete r.sbox_version;var l=e.model.publicInterface.transformAndDeprecateInbound(r,e.model.publicInterfaceMap,e.moduleName).transformed;l=t.pick(l,t.keys(e.model.publicInterface.transformAndDeprecateInbound(e.model.toJSON(),e.model.publicInterfaceMap).transformed)),l=s(e.moduleName,l),l=e.transformBeforeSetModel(l),e.model.set(l,{from:"LS"})}},error:function(t,n){if(n==="Record Not Found"&&e.moduleName==="flights"){var r=localStorage.getItem("searchbox-hotels-search");if(r){var i=e.options.commonConfig.pageview_id;r=JSON.parse(r);var s={};r.start_date&&r.start_date!==""&&(s.segment_1_start_date=r.start_date),r.end_date&&r.end_date!==""&&(s.end_date=r.end_date),r.destination_type&&r.destination_type==="CITY"&&(s.segment_1_destination_code=r.destination_code,s.segment_1_destination_description=r.destination_display,s.segment_1_destination_gid=r.destination_gid,s.segment_1_destination_iata=r.destination_code,s.segment_1_destination_code=r.destination_code,s.segment_1_destination_oid=r.destination_oid,s.segment_1_destination_type=r.destination_type),r.rooms[0]&&(s.adults=r.rooms[0].adults,s.minors=r.rooms[0].minors.length,s.rooms=1,s.room_1_adults=r.rooms[0].adults,s.room_1_minors=r.rooms[0].minors.length,r.rooms[0].minors.forEach(function(e,t){s["minor_"+(t+1)+"_age"]=e,s["room_1_minor_"+(t+1)+"_age"]=e}),s.distribution=null);if(JSON.stringify(s)!=="{}"&&i){var o={pageview_id:i,type:"load",event:"local_storage_shared",version:e.sboxVersion};f.post(o,"/hermes-service/topic/fe_components")}e.model.set(s,{from:"LS"})}}}})}),typeof this.initialize=="function"&&(this.initialize(),h(this)),this.loaded()},h=function(e){e.model.getInitializedErrors=e.viewModel.getInitializedErrors,l.console("Parámetros de inicialización:"),l.console(e.options.init);if(!t.isEmpty(e.options.init)){var n=e.model.publicInterface.transformAndDeprecateInbound(e.options.init,e.model.publicInterfaceMap,e.moduleName).transformed;n=s(e.moduleName,n),n=e.transformBeforeSetModel(n),e.model.set(n,{from:"Init"})}e.listenTo(e.bindings,"all",function(t,n){e.app.trigger(e.moduleName+":"+t,n),t==="onSearch"&&(e.save(e),typeof this.searchOverride=="function"?this.searchOverride(this.model.publicInterface.transformOutbound(this.model.toJSON(),e.model.publicInterfaceMap).transformed,this.getSearchURL()):this.search())}),e.model.on("change",function(t){l.console('Se disparó un "Cambio de Modelo":'),l.console(t),e.updateModelErrorStates();var n=t.publicInterface.transformOutbound(t.changed,e.model.publicInterfaceMap).transformed;e.app.trigger(e.moduleName+":model:change",n)}),e.app.on("all",function(){});var r=function(e,t){typeof e=="string"&&window.newrelic!==undefined&&typeof window.newrelic.addPageAction=="function"&&(t=t||{},newrelic.addPageAction(e,t))},i="unknown";e.bindings.$el.closest(".sbox-ui-traditional").length?i="traditional":e.bindings.$el.closest(".sbox-ui-horizontal").length?i="horizontal":window.innerWidth>998&&e.bindings.$el.width()<400&&(i="research");var o=typeof window.dreckInfoData=="object";r("sboxInit",{sboxModule:e.moduleName,sboxVersion:e.sboxVersion,sboxContext:e.options.commonConfig.context,sboxContainerType:i,dreckHasLoaded:o})};return c.prototype.updateModelErrorStates=function(){return this.model.validationError!==null?this.model.isValid()?(this.viewModel.set(this.viewModel.getInitializedErrors()),!0):(this.viewModel.set(this.model.validationError),!1):!0},c.prototype.loaded=function(){},c.prototype.changeURL=function(e){location.href=e},c.prototype.getSearchURL=function(){throw new Error("getSearchURL method was not implemented in '"+this.moduleName+"' box!")},c.prototype.search=function(){this.changeURL(this.getSearchURL())},c.prototype.localStorageVersionHandler=function(e){return e},c.prototype.localStorageHandler=function(e){return e},c.prototype.setPrimarySelect=function(){this.bindings.setPrimarySelect()},c.prototype.setSecondarySelect=function(){this.bindings.setSecondarySelect()},c.prototype.showSbox=function(e){this.bindings.showSbox(e)},c.prototype.transformBeforeSave=function(e){return e},c.prototype.transformBeforeSetModel=function(e){return e},c}),define("boxes/packages.module/js/config",[],function(){return{container:".sbox-packages-container",maxPassengers:8,maxRooms:4,maxHostsPerRoom:8,minorsMaxAge:11,hotelsMinorsMaxAge:17,maxInfantAge:1,defaultMinorAge:-1,defaultMinorInArms:!0,defaultRooms:1,defaultDistribution:"2",defaultAdultsPerRoom:2,defaultMinorsPerRoom:0,defaultSeatsMinorDefault:"Edad del niño",defaultSeatsMinorBabyArmsRange:"0 a 24 meses (en brazos)",defaultSeatsMinorBabyRange:"0 a 24 meses (en asiento)",defaultSeatsMinorKidRange:"2 a 11 años",defaultSeatsMinorAdultRange:"12 o mas años",showTitle:!0,currentDate:"",maxReservationDays:30,minReservationDays:1,maxAvailableDays:328,time_interval_minutes:30,timein_default:"11:00",timeout_default:"11:00",minReservationDaysCars:0,minAgeToCarriedAChildInArms:12,bh:{maxAvailableDays:550,minorsMaxAge:4,maxInfantAge:4},ha:{minorsMaxAge:17,minAgeToCarriedAChildInArms:null}}}),define("common.module/js/deprecator/config",[],function(){return{properties:{},methods:{},events:{},modules:{cars:{properties:{category:{deprecation_date:"2016-03-30",comment:""}},methods:{},events:{},modules:{}},packages:{properties:{start_month:{deprecation_date:"2016-05-21",comment:""}},methods:{},events:{},modules:{}},flights:{properties:{start_time:{deprecation_date:"2016-05-21",comment:""},end_time:{deprecation_date:"2016-05-21",comment:""}},methods:{},events:{},modules:{}},transfers:{properties:{start_date:{deprecation_date:"2018-03-1",comment:""},start_date_description:{deprecation_date:"2018-03-1",comment:""},end_date:{deprecation_date:"2018-03-1",comment:""},end_date_description:{deprecation_date:"2018-03-1",comment:""},start_time:{deprecation_date:"2018-03-1",comment:""},end_time:{deprecation_date:"2018-03-1",comment:""}},methods:{},events:{},modules:{}}}}}),define("common.module/js/dateHelper",[],function(){var e=function(e){if(typeof e!="string")throw new Error("Invalid date format: '"+e+"'");var t=e.split("-");if(t.length!==3)throw new Error("Invalid date format: '"+e+"'");var n=new Date(1970,1,1,12,0,0,0);return n.setFullYear(t[0]),n.setMonth(t[1]-1),n.setDate(t[2]),n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},t=function(t){var n=e(t),r=t.split("-");return parseInt(r[0],10)===n.getFullYear()&&parseInt(r[1],10)===n.getMonth()+1&&parseInt(r[2],10)===n.getDate()},n=function(e){var t=e.split(":"),n;if(t.length!==2)throw new Error("Invalid time format: '"+e+"'");return n=new Date(1970,1,1,0,0,0,0),n.setHours(t[0]),n.setMinutes(t[1]),n.setSeconds(0),n.setMilliseconds(0),n},r=function(e,t,n){var r=/[\/\.-]/,i=r.exec(t),s=r.exec(n),o=e.split(i),u=t.split(i),a=n.split(s),f={};f[u[0]]=o[0],f[u[1]]=o[1],f[u[2]]=o[2];var l=[];return l.push(f[a[0]]),l.push(f[a[1]]),l.push(f[a[2]]),l.join(s)},i=function(e,t){var n=[e.getFullYear(),e.getMonth()+1,e.getDate()];return n[1]=n[1].toString().length>1?n[1]:"0"+n[1],n[2]=n[2].toString().length>1?n[2]:"0"+n[2],n.join(t)},s=function(e,t){return e.setDate(e.getDate()+t),e},o=function(t,n,r){var i=e(t),s=e(n),o=e(r);return s&&o&&s>=i&&s.getTime()<o.getTime()},u={es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],days:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],preposition:"de"},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],preposition:"of"},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],days:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],preposition:"de"}},a=function(e,t){var n=parseInt(e,10)-1;return u[t].months[n].substr(0,3)},f=function(e,t,n,r){var i=new Date(n,t-1,e,12,0,0,0);return u[r].days[i.getDay()]},l=function(e,t){if(t==="")return"";var n=t.split("-"),r=n[0],i=a(n[1],e).toLowerCase(),s=n[2]<=9?n[2].substr(1):n[2],o=f(+s,+n[1],+r,e);return o+", "+s+" "+i+" "+r};return{dateToString:i,incrementDay:s,dateFromString:e,timeFromString:n,validateRangeDates:o,parseDate:r,isValidDate:t,parseFullDateString:l}}),define("common.module/js/deprecator/main",["common.module/js/dateHelper"],function(e){var t={},n=function(e){var t=Array.prototype.slice.call(arguments,1).join(" ");window&&window.console&&window.console[e]&&window.console[e](t)},r=function(){return"warn"},i=function(e){var n=e===""?[]:e.split("."),r=t;for(var i=0;r&&r.modules&&i<n.length;i++)r=r.modules[n[i]];return r},s=function(t,s,o,u,a,f){f=!!f,s=s?s:"",t=t.constructor===Array?t:[].concat(t);var l={},c=i(s);if(c){c=c[o];for(var h in t)if(t[h]in c&&e.isValidDate(c[t[h]].deprecation_date)){var p=a(u,{module:s,entity:t[h],infoEntity:c[t[h]]});f&&n(r(c[t[h]]),p),l[t[h]]={data:c[t[h]],message:p}}}return l},o=function(e,t,n){var r="The property {module}:{prop} has been deprecated: {infoProp}.",i=function(e,t){return e.replace("{module}:",t.module?t.module+":":"").replace("{prop}",t.entity).replace("{infoProp}",JSON.stringify(t.infoEntity))};return s(e,t,"properties",r,i,n)},u=function(e,t,n){var r="The method {module}:{method} has been deprecated: {infoMethod}.",i=function(e,t){return e.replace("{module}:",t.module?t.module+":":"").replace("{method}",t.entity).replace("{infoMethod}",JSON.stringify(t.infoEntity))};return s(e,t,"methods",r,i,n)},a=function(e,t,n){var r="The event {module}:{event} has been deprecated: {infoEvent}.",i=function(e,t){return e.replace("{module}:",t.module?t.module+":":"").replace("{event}",t.entity).replace("{infoEvent}",JSON.stringify(t.infoEntity))};return s(e,t,"events",r,i,n)},f=function(e,t){var i=[];for(var s in e)typeof e[s]=="function"&&i.push(s);var o=u(i,t,!1);for(var a in o)e[a]=function(e,t){return function(){return n(r(t.data),t.message),e.apply(this,arguments)}}(e[a],o[a])};return function(e){return t=e,{checkDeprecatedProperties:o,checkDeprecatedMethods:u,checkDeprecatedEvents:a,wrapperCheckDeprecatedMethods:f}}}),define("common.module/js/deprecator/deprecator",["common.module/js/deprecator/config","common.module/js/deprecator/main"],function(e,t){return t(e)}),define("boxes/core.module/js/model",["backbone","underscore","common.module/js/deprecator/deprecator"],function(e,t,n){var r=function(e,n,r){var i={},s={};for(var o in e)n[o]?typeof n[o]=="function"?t.extend(s,n[o](e[o],e)):typeof n[o]=="string"?s[n[o]]=e[o]:i[o]=e[o]:i[o]=e[o];return r===!1&&(s=t.extend(i,s),i={}),{transformed:s,remainder:i}},i=e.Model.extend({publicInterfaceMap:{discardUnmapped:!1,inbound:{},outbound:{}},publicInterface:{transformAndDeprecateInbound:function(e,i,s){return s&&n.checkDeprecatedProperties(t.keys(e),s,!0),r(e,i.inbound,i.discardUnmapped)},transformOutbound:function(e,t){return r(e,t.outbound,t.discardUnmapped)}}});return i}),define("boxes/packages.module/js/withoutRoom/model",[],function(){return function(e){var t={adults:e.config.defaultAdultsPerRoom,minors:e.config.defaultMinorsPerRoom};for(var n=1;n<=e.config.maxHostsPerRoom-1;n++)t["minor_"+n+"_age"]=e.config.defaultMinorAge,t["minor_"+n+"_inArms"]=e.config.defaultMinorInArms;return t}}),define("common.module/js/validationHelper",["common.module/js/dateHelper"],function(e){function t(e,t,n){e instanceof Array||(e=[]),t instanceof Array||(t=[]),n=n||"",this.prefixTracking=n,this.errorsCollection_=e,this.errorsTrackingCollection_=t,this.updateReference=function(){e=this.errorsCollection_,t=this.errorsTrackingCollection_}}return t.prototype={hasRangeMinimumDifference:function(t,n,r){return typeof t=="string"&&(t=e.timeFromString(t)),typeof n=="string"&&(n=e.timeFromString(n)),typeof r=="string"&&(r=e.timeFromString(r)),Math.floor((n-t)/6e4)<r&&this.errorsCollection_.push("notHasRangeMinimumDifference"),this.updateReference(),this},onlyOneDate:function(e){return e||this.errorsCollection_.push("noCheckInDate"),this.updateReference(),this},range:function(t,n,r){return t||(this.errorsCollection_.push("noCheckInDate"),this.errorsTrackingCollection_.push(this.prefixTracking+"_start_date")),n||(this.errorsCollection_.push("noCheckOutDate"),this.errorsTrackingCollection_.push(this.prefixTracking+"_end_date")),t&&n&&(r?e.dateFromString(n)<e.dateFromString(t)&&this.errorsCollection_.push("checkOutDateBeforeCheckin"):e.dateFromString(n)<=e.dateFromString(t)&&this.errorsCollection_.push("checkOutDateBeforeCheckin")),this.updateReference(),this},rangeSubSetOfParentRange:function(t,n,r,i){return r&&i&&t&&n&&(e.dateFromString(t)<=e.dateFromString(r)&&e.dateFromString(n)>=e.dateFromString(i)||this.errorsCollection_.push("noSubSet")),this.updateReference(),this},hole:function(t,n,r){return t&&n&&e.dateFromString(t)>e.dateFromString(n)&&(this.errorsCollection_.push("DateHole"),r&&this.errorsTrackingCollection_.push(this.prefixTracking+"_hole_date")),this},overlap:function(t,n,r){return t&&n&&e.dateFromString(t)<e.dateFromString(n)&&(this.errorsCollection_.push("DateOverlap"),r&&this.errorsTrackingCollection_.push(this.prefixTracking+"_overlap_date")),this}},{ValidateDate:t}}),define("boxes/packages.module/js/model",["boxes/core.module/js/model","underscore","boxes/packages.module/js/withoutRoom/model","common.module/js/validationHelper"],function(e,t,n,r){return function(i){var s={combination_type:"vh",month_number_selected:"-1",origin_description:"",origin_gid:"",origin_type:"",origin_oid:"",origin_iata:"",origin_code:"",origin_city_code:"",destination_description:"",destination_gid:"",destination_type:"",destination_oid:"",destination_iata:"",destination_code:"",destination_city_code:"",destination_airport_city_description:"",destination_airport_city_gid:"",start_date:"",start_date_description:"",end_date:"",end_date_description:"",no_specified_date:!1,start_month:-1,rooms:i.config.defaultRooms,advanced_options_selected:!1,hotel_alternative_date_selected:!1,hotel_start_date:"",hotel_start_date_description:"",hotel_end_date:"",hotel_end_date_description:"",hotel_alternative_destination_selected:!1,hotel_destination_description:"",hotel_destination_type:"",hotel_destination_code:"",hotel_destination_oid:"",hotel_destination_gid:"",car_start_date:"",car_start_date_description:"",car_start_time:i.config.timein_default,car_end_date:"",car_end_date_description:"",car_end_time:i.config.timeout_default,hotel_first_destination_description:"",hotel_first_destination_gid:"",hotel_first_destination_type:"",hotel_first_destination_oid:"",hotel_first_destination_iata:"",hotel_first_destination_code:"",hotel_first_start_date:"",hotel_first_start_date_description:"",hotel_first_end_date:"",hotel_first_end_date_description:"",hotel_second_destination_description:"",hotel_second_destination_gid:"",hotel_second_destination_type:"",hotel_second_destination_oid:"",hotel_second_destination_iata:"",hotel_second_destination_code:"",hotel_second_start_date:"",hotel_second_start_date_description:"",hotel_second_end_date:"",hotel_second_end_date_description:"",distribution:i.config.defaultDistribution,profile_suggester:i.init.profile_suggester?i.init.profile_suggester:""},o={combination_type:function(e){return e=e==="vha"||e==="vhh"&&!i.config.bundlesEnabled.FlightsHotelsHotels?"vh":e,{combination_type:e}},no_specified_date:function(e){return e=i.config.params.country==="VE"?!1:e,{no_specified_date:e}}},u={combination_type:function(e){return e=e==="vha"||e==="vhh"&&!i.config.bundlesEnabled.FlightsHotelsHotels?"vh":e,{combination_type:e}}};for(var a=1;a<=i.config.maxRooms;a++){s["room_"+a+"_adults"]=i.config.defaultAdultsPerRoom,s["room_"+a+"_minors"]=i.config.defaultMinorsPerRoom;for(var f=1;f<=i.config.maxHostsPerRoom-1;f++)s["room_"+a+"_minor_"+f+"_age"]=i.config.defaultMinorAge,s["room_"+a+"_minor_"+f+"_inArms"]=i.config.defaultMinorInArms}return s=t.extend(s,n(i)),e.extend({defaults:s,options:i,publicInterfaceMap:{discardUnmapped:!1,inbound:o,outbound:u},validate:function(e){function A(){return e.combination_type==="vh"||e.combination_type==="vha"||e.combination_type==="bh"||e.combination_type==="ha"}function O(){return e.combination_type==="vh"||e.combination_type==="vha"||e.combination_type==="bh"}function M(){return e.combination_type==="vh"||e.combination_type==="vha"||e.combination_type==="bh"}function _(){return e.combination_type!=="ha"}var t=i.config[e.combination_type]&&i.config[e.combination_type].minorsMaxAge?i.config[e.combination_type].minorsMaxAge:i.config.minorsMaxAge,n=t+1,s=i.config[e.combination_type]&&i.config[e.combination_type].maxInfantAge?i.config[e.combination_type].maxInfantAge:i.config.maxInfantAge,o=0,u=0,a,f,l,c=e.no_specified_date&&e.combination_type==="vh",h=!1,p=this.getInitializedErrors();p.tracking=[];var d=e.combination_type==="vh"?"flight+hotel":e.combination_type==="va"?"flight+car":e.combination_type==="ha"?"hotel+car":"",v,m;if(c){e.start_month==="-1"&&(p.date_errors instanceof Array||(p.date_errors=[]),p.date_errors.push("noMonthSelected"),p.tracking.push(d+"_no_month_selected"),h=!0),!e.origin_iata&&!e.origin_code&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.origin_errors.push("OriginNotSet"),p.tracking.push(d+"_origin_empty"),h=!0),!e.destination_iata&&!e.destination_code&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.destination_errors.push("destinationNotSet"),p.tracking.push(d+"_destination_empty"),h=!0);if(e.origin_iata&&e.destination_iata&&e.origin_iata===e.destination_iata||e.origin_oid&&e.destination_oid&&e.origin_oid===e.destination_oid)p.destination_errors.push("destinationDifferentToOrigin"),p.tracking.push(d+"_equal_destinations"),h=!0}else{!e.origin_oid&&e.combination_type!=="ha"&&e.combination_type!=="vhh"&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.origin_errors.push("OriginNotSet"),p.tracking.push(d+"_origin_empty"),h=!0),!e.destination_oid&&e.combination_type!=="vhh"&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.destination_errors.push("destinationNotSet"),p.tracking.push(d+"_destination_empty"),h=!0),e.combination_type!=="vhh"&&(e.origin_code&&e.destination_code&&e.origin_code===e.destination_code||(e.origin_oid||e.destination_oid)&&e.origin_oid===e.destination_oid)&&e.combination_type!=="ha"&&(p.destination_errors.push("destinationDifferentToOrigin"),p.tracking.push(d+"_equal_destinations"),h=!0),M()&&e.advanced_options_selected&&e.hotel_alternative_destination_selected&&e.hotel_destination_code===""&&(p.hotel_another_city_errors instanceof Array||(p.hotel_another_city_errors=[]),p.hotel_another_city_errors.push("hotelAnotherCityOidNotSet"),p.tracking.push(d+"_hotel_another_city_empty"),h=!0);if(e.combination_type==="vhh"){e.origin_gid||(p.destination_errors instanceof Array||(p.destination_errors=[]),p.origin_errors.push("OriginNotSet"),p.tracking.push(d+"_origin_empty"),h=!0),e.destination_gid||(p.destination_errors instanceof Array||(p.destination_errors=[]),p.destination_errors.push("destinationNotSet"),p.tracking.push(d+"_destination_empty"),h=!0),p.hotel_first_destination_errors instanceof Array||(p.hotel_first_destination_errors=[]),e.hotel_first_destination_gid||(p.hotel_first_destination_errors.push("DestinationNotSet"),p.tracking.push(d+"_hotel_first_destination_empty"),h=!0),e.hotel_second_destination_gid||(p.hotel_second_destination_errors.push("DestinationNotSet"),p.tracking.push(d+"_hotel_second_destination_empty"),h=!0),e.hotel_first_destination_gid&&e.hotel_first_destination_gid===e.origin_gid&&(p.hotel_first_destination_errors.push("HotelFirstDestinationMustBeDifferentFromOrigin"),p.tracking.push(d+"_hotel_first_destination_must_be_different_from_origin"),h=!0),e.hotel_second_destination_gid&&e.hotel_second_destination_gid===e.origin_gid&&(p.hotel_second_destination_errors.push("HotelSecondDestinationMustBeDifferentFromOrigin"),p.tracking.push(d+"_hotel_second_destination_must_be_different_from_origin"),h=!0);var g=new r.ValidateDate(p.hotel_first_destination_date_errors,p.tracking,d+"_hotel_first_destination");g.range(e.hotel_first_start_date,e.hotel_first_end_date,!0).hole(e.hotel_second_start_date,e.hotel_first_end_date,!1).overlap(e.hotel_second_start_date,e.hotel_first_end_date,!1).rangeSubSetOfParentRange(e.start_date,e.end_date,e.hotel_first_start_date,e.hotel_first_end_date);var y=new r.ValidateDate(p.hotel_second_destination_date_errors,p.tracking,d+"_hotel_second_destination");y.range(e.hotel_second_start_date,e.hotel_second_end_date,!0).hole(e.hotel_second_start_date,e.hotel_first_end_date,!1).overlap(e.hotel_second_start_date,e.hotel_first_end_date,!1).rangeSubSetOfParentRange(e.start_date,e.end_date,e.hotel_second_start_date,e.hotel_second_end_date),(p.hotel_first_destination_date_errors.indexOf("DateOverlap")||p.hotel_second_destination_date_errors.indexOf("DateOverlap"))&&p.tracking.push(d+"_overlap_date"),(p.hotel_first_destination_date_errors.indexOf("DateHole")||p.hotel_second_destination_date_errors.indexOf("DateHole"))&&p.tracking.push(d+"_hole_date");if(p.hotel_first_destination_date_errors.length||p.hotel_second_destination_date_errors.length)h=!0}var b=new r.ValidateDate(p.date_errors,p.tracking,d);b.range(e.start_date,e.end_date);if(O()&&e.advanced_options_selected&&e.hotel_alternative_date_selected){var w=new r.ValidateDate(p.hotel_partial_stay_errors,p.tracking,d+"_partial_stay");w.range(e.hotel_start_date,e.hotel_end_date).rangeSubSetOfParentRange(e.start_date,e.end_date,e.hotel_start_date,e.hotel_end_date),p.hotel_partial_stay_errors.length&&(h=!0)}p.date_errors.length&&(h=!0,p.date_errors.indexOf("noCheckInDate")!==-1&&p.tracking.push(d+"_start_date_empty"),p.date_errors.indexOf("noCheckOutDate")!==-1&&p.tracking.push(d+"_end_date_empty"));if(e.combination_type==="ha"){p.cars_date_errors instanceof Array||(p.cars_date_errors=[]),v=!0;var E=new r.ValidateDate(p.cars_date_errors,p.tracking,d+"_cars");E.range(e.car_start_date,e.car_end_date,v),e.car_start_date===e.car_end_date&e.car_start_date!==""&&e.car_end_date!==""&&E.hasRangeMinimumDifference(e.car_start_time,e.car_end_time,60),p.cars_date_errors.length&&(h=!0)}else if(e.combination_type==="va"){p.minor_age_errors instanceof Array||(p.minor_age_errors=[]),!e.origin_iata&&!e.origin_code&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.origin_errors.push("OriginNotSet"),p.tracking.push(d+"_origin_empty"),h=!0),!e.destination_iata&&!e.destination_code&&(p.destination_errors instanceof Array||(p.destination_errors=[]),p.destination_errors.push("destinationNotSet"),p.tracking.push(d+"_destination_empty"),h=!0),f=0,l=0,u=e.adults,f+=u;for(var S=1;S<=e.minors;S++)a="minor_"+S+"_age",m=parseInt(e[a],10),m>-1&&(m===n?u++:(o++,m<=s&&l++)),m>=i.config.minAgeToCarriedAChildInArms&&f++,m<0&&(p.minor_age_errors.push("minorAgeNotSelected"),p.tracking.push(d+"_minor_"+S+"_age_empty"),T=!0,h=!0);T}if(A()){f=0,l=0,u=0;for(var x=1;x<=e.rooms;x++){u+=parseInt(e["room_"+x+"_adults"],10),f+=u;var T=!1;for(var N=1;N<=e["room_"+x+"_minors"];N++){a="room_"+x+"_minor_"+N+"_age",m=parseInt(e[a],10),m>-1&&(m===n?u++:(o++,m<=s&&l++),m>=i.config.minAgeToCarriedAChildInArms&&f++);var C=a+"_errors";p[C]===undefined&&(p[C]=[]),m<0&&(p[C].push("minorAgeNotSelected"),p.tracking.push(d+"_room_"+x+"_minor_"+N+"_age_empty"),T=!0,h=!0)}var k="room_"+x+"_minors_ages_errors";p[k]===undefined&&(p[k]=[]),T&&(p[k].push("minorAgeNotSelected"),p.some_room_with_minor_age_error=!0,h=!0)}}var L=o+u;L>i.config.maxPassengers&&_()&&(p.passengers_errors.push("maxPassengerExceeded"),p.tracking.push(d+"_passengers_exceeded"),h=!0),l>f&&(p.passengers_errors.push("moreChildrensOverArmsThanAdults"),p.tracking.push(d+"_more_childrens_than_adults"),h=!0)}if(h)return p}})}}),define("boxes/core.module/js/viewModel",["backbone"],function(e){var t=e.Model.extend({getInitializedErrors:function(){var e=window.console;return e&&e.warn&&e.warn("You have to override getInitializedErrors on your viewModel"),{}}});return t}),define("boxes/core.module/js/abTests",["underscore"],function(e){var t={sboxFlightsNoBundles:[{enabled:"false"},{enabled:"true"}],sboxHistory:[{enabled:"false"},{enabled:"true"}]},n=function(e){var t=e.split("|"),n={},r={},i=!1;while(t.length>0){var s=t.pop(),o=s.split("_");if(o.length===1&&o[0]==="CTRL")t.length>0&&t[t.length-1].indexOf("_")>0&&t.pop();else if(o.length===1&&o[0]!==""&&o[0]!=="CTRL")i&&(n[o[0]]=r),r={},i=!1;else if(o.length>1){var u=o.shift(),a=o.join("_");r[u]=a,i=!0}}return n},r=function(e){var t={};for(var n in e)e[n]instanceof Array&&e[n].length>0&&(t[n]=e[n][0]);return t},i=function(e,t){var n={};if(typeof e=="object")for(var r in e)t[r]instanceof Array&&(e[r].hasOwnProperty(t[r][1])?n[r]=t[r][1]:n[r]=e[r]);return n},s={},o=function(o){return typeof s[o]!="object"&&(s[o]=e.extend(r(t),i(n(o),t))),s[o]};return{getModel:o}}),define("boxes/packages.module/js/viewModel",["boxes/core.module/js/viewModel","boxes/core.module/js/abTests","underscore"],function(e,t,n){return function(r){var i=function(){var e={destination_errors:[],origin_errors:[],hotel_another_city_errors:[],date_errors:[],cars_date_errors:[],hotel_partial_stay_errors:[],minor_age_errors:[],passengers_errors:[],some_room_with_minor_age_error:!1,hotel_first_destination_errors:[],hotel_first_destination_date_errors:[],hotel_second_destination_errors:[],hotel_second_destination_date_errors:[]};for(var t=1;t<=r.config.maxRooms;t++){for(var n=1;n<=r.config.maxHostsPerRoom-1;n++)e["room_"+t+"_minor_"+n+"_age_errors"]=[];e["room_"+t+"_minors_ages_errors"]=[]}return e},s={roomsRange:n.range(1,r.config.maxRooms+1),show_title:r.config.showTitle},o=function(){return t.getModel(r.commonConfig&&r.commonConfig.ab?r.commonConfig.ab:"")},u=e.extend({defaults:n.extend(i(),o(),s),getInitializedErrors:i});return u}}),function(e,t){"undefined"!=typeof exports?module.exports=t(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define("backbone.epoxy",["underscore","backbone"],t):t(e._,e.Backbone)}(this,function(e,t){function n(e,t,n){return e._super.prototype[t].apply(e,n)}function r(t,n,i,s){for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];if(t.hasComputed(o)){if(s.length&&e.contains(s,o))throw"Recursive setter: "+s.join(" > ");u=t.c()[o].set(u),u&&E(u)&&(i=r(t,u,i,s.concat(o)))}else i[o]=u}return i}function i(t,n,r,i){r=r||{},r.get&&w(r.get)&&(r._get=r.get),r.set&&w(r.set)&&(r._set=r.set),delete r.get,delete r.set,e.extend(this,r),this.model=t,this.name=n,this.deps=this.deps||[],i||this.init()}function s(t){return w(t)?t():(E(t)&&(t=e.clone(t),e.each(t,function(e,n){t[n]=s(e)})),t)}function o(e){return w(e)?{set:e}:e}function u(t){return function(){var n=arguments,r=w(t)?t:t.get,i=t.set;return function(t){return b(t)?r.apply(this,e.map(n,s)):n[0]((i?i:r).call(this,t))}}}function a(t,n,r,i,s){return(t=e.result(t,i))?(x(t)?(s=s?s+"_":"",n["$"+i]=function(){return D&&D.push([t,"change"]),t},e.each(t.toJSON({computed:!0}),function(e,i){n[s+i]=function(e){return f(t,i,e,r)}})):T(t)&&(n["$"+i]=function(){return D&&D.push([t,"reset add remove sort update"]),t}),t):void 0}function f(t,n,r,i){if(D&&D.push([t,"change:"+n]),!b(r)){if(!E(r)||S(r)||e.isDate(r)){var s=r;r={},r[n]=s}return i&&i.save?t.save(r,i):t.set(r,i)}return t.get(n)}function l(e,t){if(":el"===t||":scope"===t)return e.$el;var n=e.$(t);return e.$el.is(t)&&(n=n.add(e.$el)),n}function c(t,n,r,i,s,o){try{var u=A[r]||(A[r]=Function("$f","$c","with($f){with($c){return{"+r+"}}}")),a=u(o,i)}catch(f){throw'Error parsing bindings: "'+r+'"\n>> '+f}var l=e.map(e.union(a.events||[],["change"]),function(e){return e+".epoxy"}).join(" ");e.each(a,function(e,r){if(s.hasOwnProperty(r))t.b().push(new v(t,n,s[r],e,l,i,a));else if(!_.hasOwnProperty(r))throw'binding handler "'+r+'" is not defined.'})}function h(e,t,n){return e&&e.hasOwnProperty(t)?b(n)?s(e[t]):e[t](n):void 0}function p(e,t){var n=[];if(t&&e)for(var r=0,i=t.length;i>r;r++)n.push(t[r]in e?e[t[r]]():null);return n}function d(e){var t=[];for(var n in e){var r=e[n];E(r)&&(r="{"+d(r)+"}"),t.push(n+":"+r)}return t.join(",")}function v(t,n,r,i,o,u,a){var f=this,l=n[0].tagName.toLowerCase(),c="input"==l||"select"==l||"textarea"==l||"true"==n.prop("contenteditable"),h=[],p=function(e){f.$el&&f.set(f.$el,s(i),e)};if(f.view=t,f.$el=n,f.evt=o,e.extend(f,r),i=f.init(f.$el,s(i),u,a)||i,D=h,p(),D=null,c&&r.get&&w(i)&&f.$el.on(o,function(e){i(f.get(f.$el,s(i),e))}),h.length)for(var d=0,v=h.length;v>d;d++)f.listenTo(h[d][0],h[d][1],p)}var m,g=t.Epoxy={},y=Array.prototype,b=e.isUndefined,w=e.isFunction,E=e.isObject,S=e.isArray,x=function(e){return e instanceof t.Model},T=function(e){return e instanceof t.Collection},N=function(){},C={mixin:function(e){e=e||{};for(var t in this.prototype)"bindings"===t&&e.bindings||this.prototype.hasOwnProperty(t)&&"constructor"!==t&&(e[t]=this.prototype[t]);return e}},k=["computeds"];g.Model=t.Model.extend({_super:t.Model,constructor:function(t,r){e.extend(this,e.pick(r||{},k)),n(this,"constructor",arguments),this.initComputeds(t,r)},getCopy:function(t){return e.clone(this.get(t))},get:function(e){return m&&m.push(["change:"+e,this]),this.hasComputed(e)?this.c()[e].get():n(this,"get",arguments)},set:function(t,i,s){var o=t;o&&!E(o)?(o={},o[t]=i):s=i,s=s||{};var u=this._setting=[];s.unset||(o=r(this,o,{},[])),delete this._setting;var a=n(this,"set",[o,s]);return s.silent||(!this.hasChanged()&&u.length&&this.trigger("change",this),e.each(u,function(e){this.trigger.apply(this,e)},this)),a},toJSON:function(t){var r=n(this,"toJSON",arguments);return t&&t.computed&&e.each(this.c(),function(e,t){r[t]=e.value}),r},destroy:function(){return this.clearComputeds(),n(this,"destroy",arguments)},c:function(){return this._c||(this._c={})},initComputeds:function(t){this.clearComputeds();var n=e.result(this,"computeds")||{};n=e.extend(n,e.pick(t||{},e.keys(n))),e.each(n,function(e,t){e._init=1,this.addComputed(t,e)},this),e.invoke(this.c(),"init")},addComputed:function(e,t,n){this.removeComputed(e);var r=t,s=r._init;if(w(t)){var o=2;r={},r._get=t,w(n)&&(r._set=n,o++),r.deps=y.slice.call(arguments,o)}return this.c()[e]=new i(this,e,r,s),this},hasComputed:function(e){return this.c().hasOwnProperty(e)},removeComputed:function(e){return this.hasComputed(e)&&(this.c()[e].dispose(),delete this.c()[e]),this},clearComputeds:function(){for(var e in this.c())this.removeComputed(e);return this},modifyArray:function(e,t,n){var r=this.get(e);if(S(r)&&w(y[t])){var i=y.slice.call(arguments,2),s=y[t].apply(r,i);return n=n||{},n.silent||this.trigger("change:"+e+" change",this,y,n),s}return null},modifyObject:function(e,t,n,r){var i=this.get(e),s=!1;return E(i)?(r=r||{},b(n)&&i.hasOwnProperty(t)?(delete i[t],s=!0):i[t]!==n&&(i[t]=n,s=!0),s&&!r.silent&&this.trigger("change:"+e+" change",this,i,r),i):null}},C),e.extend(i.prototype,t.Events,{init:function(){var t={},n=m=[];this.get(!0),m=null,n.length&&(e.each(n,function(n){var r=n[0],i=n[1];t[r]?e.contains(t[r],i)||t[r].push(i):t[r]=[i]}),e.each(t,function(t,n){for(var r=0,i=t.length;i>r;r++)this.listenTo(t[r],n,e.bind(this.get,this,!0))},this))},val:function(e){return this.model.get(e)},get:function(t){if(t===!0&&this._get){var n=this._get.apply(this.model,e.map(this.deps,this.val,this));this.change(n)}return this.value},set:function(e){if(this._get){if(this._set)return this._set.apply(this.model,arguments);throw"Cannot set read-only computed attribute."}return this.change(e),null},change:function(t){if(!e.isEqual(t,this.value)){this.value=t;var n=["change:"+this.name,this.model,t];this.model._setting?this.model._setting.push(n):(n[0]+=" change",this.model.trigger.apply(this.model,n))}},dispose:function(){this.stopListening(),this.off(),this.model=this.value=null}});var L={optionText:"label",optionValue:"value"},A={},O={attr:o(function(e,t){e.attr(t)}),checked:o({get:function(t,n,r){t.length>1&&(t=t.filter(r.target));var i=!!t.prop("checked"),s=t.val();if(this.isRadio(t))return s;if(S(n)){n=n.slice();var o=e.indexOf(n,s);return i&&0>o?n.push(s):!i&&o>-1&&n.splice(o,1),n}return i},set:function(t,n){t.length>1&&(t=t.filter('[value="'+n+'"]'));var r=!!n;this.isRadio(t)?r=n==t.val():S(n)&&(r=e.contains(n,t.val())),t.prop("checked",r)},isRadio:function(e){return"radio"===e.attr("type").toLowerCase()}}),classes:o(function(t,n){e.each(n,function(e,n){t.toggleClass(n,!!e)})}),collection:o({init:function(e,t,n,r){if(this.i=r.itemView?this.view[r.itemView]:this.view.itemView,!T(t))throw'Binding "collection" requires a Collection.';if(!w(this.i))throw'Binding "collection" requires an itemView.';this.v={}},set:function(t,n,r){var i,s=this.v,o=this.i,u=n.models,a=D;if(D=null,r=r||n,x(r))if(s.hasOwnProperty(r.cid))s[r.cid].remove(),delete s[r.cid];else{s[r.cid]=i=new o({model:r,collectionView:this.view});var f=e.indexOf(u,r),l=t.children();l.length>f?l.eq(f).before(i.$el):t.append(i.$el)}else if(T(r)){var c=u.length===e.size(s)&&n.every(function(e){return s.hasOwnProperty(e.cid)});t.children().detach();var h=document.createDocumentFragment();c?n.each(function(e){h.appendChild(s[e.cid].el)}):(this.clean(),n.each(function(e){s[e.cid]=i=new o({model:e,collectionView:this.view}),h.appendChild(i.el)},this)),t.append(h)}D=a},clean:function(){for(var e in this.v)this.v.hasOwnProperty(e)&&(this.v[e].remove(),delete this.v[e])}}),css:o(function(e,t){e.css(t)}),disabled:o(function(e,t){e.prop("disabled",!!t)}),enabled:o(function(e,t){e.prop("disabled",!t)}),html:o(function(e,t){e.html(t)}),options:o({init:function(e,t,n,r){this.e=r.optionsEmpty,this.d=r.optionsDefault,this.v=r.value},set:function(t,n){var r=this,i=s(r.e),o=s(r.d),u=s(r.v),a=T(n)?n.models:n,f=a.length,l=!0,c="";f||o||!i?(o&&(a=[o].concat(a)),e.each(a,function(e){c+=r.opt(e,f)})):(c+=r.opt(i,f),l=!1),t.html(c).prop("disabled",!l).val(u);var h=t.val();r.v&&!e.isEqual(u,h)&&r.v(h)},opt:function(e){var t=e,n=e,r=L.optionText,i=L.optionValue;return E(e)&&(t=x(e)?e.get(r):e[r],n=x(e)?e.get(i):e[i]),['<option value="',n,'">',t,"</option>"].join("")},clean:function(){this.d=this.e=this.v=0}}),template:o({init:function(t,n,r){var i=t.find("script,template");return this.t=e.template(i.length?i.html():t.html()),S(n)?e.pick(r,n):void 0},set:function(e,t){t=x(t)?t.toJSON({computed:!0}):t,e.html(this.t(t))},clean:function(){this.t=null}}),text:o({get:function(e){return e.text()},set:function(e,t){e.text(t)}}),toggle:o(function(e,t){e.toggle(!!t)}),value:o({get:function(e){return e.val()},set:function(e,t){try{e.val()+""!=t+""&&e.val(t)}catch(n){}}})},M={all:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(!e[t])return!1;return!0}),any:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(e[t])return!0;return!1}),length:u(function(e){return e.length||0}),none:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(e[t])return!1;return!0}),not:u(function(e){return!e}),format:u(function(e){for(var t=arguments,n=1,r=t.length;r>n;n++)e=e.replace(RegExp("\\$"+n,"g"),t[n]);return e}),select:u(function(e,t,n){return e?t:n}),csv:u({get:function(e){return e+="",e?e.split(","):[]},set:function(e){return S(e)?e.join(","):e}}),integer:u(function(e){return e?parseInt(e,10):0}),decimal:u(function(e){return e?parseFloat(e):0})},_={events:1,itemView:1,optionsDefault:1,optionsEmpty:1};g.binding={allowedParams:_,addHandler:function(e,t){O[e]=o(t)},addFilter:function(e,t){M[e]=u(t)},config:function(t){e.extend(L,t)},emptyCache:function(){A={}}};var D,P=["viewModel","bindings","bindingFilters","bindingHandlers","bindingSources","computeds"];return g.View=t.View.extend({_super:t.View,constructor:function(t){e.extend(this,e.pick(t||{},P)),n(this,"constructor",arguments),this.applyBindings()},b:function(){return this._b||(this._b=[])},bindings:"data-bind",setterOptions:null,applyBindings:function(){this.removeBindings();var n=this,r=e.clone(e.result(n,"bindingSources")),i=n.bindings,s=n.setterOptions,f=e.clone(O),h=e.clone(M),v=n._c={};e.each(e.result(n,"bindingHandlers")||{},function(e,t){f[t]=o(e)}),e.each(e.result(n,"bindingFilters")||{},function(e,t){h[t]=u(e)}),n.model=a(n,v,s,"model"),n.viewModel=a(n,v,s,"viewModel"),n.collection=a(n,v,s,"collection"),n.collection&&n.collection.view&&(n.itemView=n.collection.view),r&&(e.each(r,function(e,t){r[t]=a(r,v,s,t,t)}),n.bindingSources=r),e.each(e.result(n,"computeds")||{},function(e,t){var r=w(e)?e:e.get,i=e.set,s=e.deps;v[t]=function(e){return!b(e)&&i?i.call(n,e):r.apply(n,p(n._c,s))}}),E(i)?e.each(i,function(e,t){var r=l(n,t);E(e)&&(e=d(e)),r.length&&c(n,r,e,v,f,h)}):l(n,"["+i+"]").each(function(){var e=t.$(this);c(n,e,e.attr(i),v,f,h)})},getBinding:function(e){return h(this._c,e)},setBinding:function(e,t){return h(this._c,e,t)},removeBindings:function(){if(this._c=null,this._b)for(;this._b.length;)this._b.pop().dispose()},remove:function(){this.removeBindings(),n(this,"remove",arguments)}},C),e.extend(v.prototype,t.Events,{init:N,get:N,set:N,clean:N,dispose:function(){this.clean(),this.stopListening(),this.$el.off(this.evt),this.$el=this.view=null}}),g}),define("boxes/core.module/js/bindings",["backbone","underscore","jquery","backbone.epoxy","common.module/js/deepExtend"],function(e,t,n){var r=function(e,t){typeof e=="string"&&window.newrelic!==undefined&&typeof window.newrelic.addPageAction=="function"&&(t=t||{},newrelic.addPageAction(e,t))},i=e.Epoxy.View.extend({bindingHandlers:{},bindingFilters:{onOff:function(e){return e==="on"}},setPrimarySelect:function(){setTimeout(function(){n(".sbox-primary",this.$el).focus()},0)},setSecondarySelect:function(){setTimeout(function(){n(".sbox-secondary",this.$el).focus()},0)},resetModelErrorStates:function(){this.viewModel.set(this.viewModel.getInitializedErrors()),this.model.validationError=null},upaSendTrack:function(e,n){var i="";e&&e.config&&e.config.params&&e.config.params.box&&(i=e.config.params.box.split("/")[1]),i==="packages"&&(i="combinedproducts"),i==="transferspoi"&&(i="transfers"),i==="tickets"&&(i="activities"),i==="assistance"&&(i="insurance");if("UpaDataTracker"in window&&"send"in UpaDataTracker){var s={pr:i,fl:"sbox-e",event:"search",eventtype:"click",xClient:e.config.params.xclient,dn:window.location.host,facet:this.model.attributes.destination_type,tcli:e.config.params.xclient,cc:e.config.params.country,userAgent:window.navigator.userAgent,ch:e.config.params.channel,context:e.commonConfig.context,pageview_id:e.commonConfig.pageview_id,type:"search"},o="";typeof window.dreckInfoData=="object"&&typeof window.dreckInfoData.company_id!="undefined"?o=String(window.dreckInfoData.company_id):typeof e.commonConfig.company_id!="undefined"&&(o=String(e.commonConfig.company_id)),s.company_id=o,this.model.attributes.destination_gid!==""&&(s.gid=this.model.attributes.destination_gid,s.item_id=this.model.attributes.destination_oid),s=t.extend(s,n);for(var u in s)(s[u]===null||s[u]===undefined||s[u]==="")&&delete s[u]}r("sboxSearch",{sboxModule:i,xClient:e.config.params.xclient,sboxContext:e.commonConfig.context})},trackModals:function(e,t){var r="";e&&e.config&&e.config.params&&e.config.params.box&&(r=e.config.params.box.split("/")[1]),e.commonConfig.context==="home"&&window.dataLayer&&typeof window.dataLayer=="object"&&window.dataLayer.push({event:"user-action",eventCategory:"sbox_home",eventAction:t,eventLabel:r});if(e.commonConfig.context==="home"){var i=e.sboxVersion,s=e.commonConfig.pageview_id,o=t.split("_")[0],u=t.split("_")[1];u==="disti"&&(u="distribution");if((r==="hotels"||r==="flights")&&o&&s&&i){var a=JSON.stringify({type:o,event:u,version:i,pageview_id:s});n.ajax({url:"/hermes-service/topic/fe_components",type:"POST",data:a,contentType:"application/json; charset=utf-8",dataType:"json"})}}},search:function(){this.$el.find(".sbox-ui-tooltip").removeClass("show");if(this.model.isValid())this.viewModel.set(this.viewModel.getInitializedErrors()),this.trigger("onSearch",this.model.toJSON());else{this.viewModel.set(this.model.validationError);try{r("sboxSearchError",{sboxModule:this.model.options.config.params.box.split("/")[1],xClient:this.model.options.config.params.xclient,sboxContext:this.model.options.commonConfig.context,ocgid:this.model.origin_gid||this.model.segment_1_origin_gid,dcgid:this.model.destination_gid||this.model.segment_1_destination_gid,reason:this.model.validationError.tracking.toString()}),this.upaSendTrack(this.model.options,{reason:this.model.validationError.tracking.toString(),type:"error"})}catch(e){}this.trigger("onSearchError",this.model.validationError)}},hideSbox:function(){var e=this.$el.closest(".sbox-main");e.addClass("-sbox-hide"),e.removeClass("-modal"),n("body").removeClass("-sbox-modal"),this.trigger("onHide")},showSbox:function(e){var t=this.$el.closest(".sbox-main");t.removeClass("-sbox-hide"),e&&(t.addClass("-modal"),n("body").addClass("-sbox-modal")),this.trigger("onShow")}});return i}),define("common.module/js/Datepicker/core/date-helper",[],function(){return{isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0?!0:!1},getMonthDuration:function(e,t){return t===2?this.isLeapYear(e)?29:28:t===4||t===6||t===9||t===11?30:31},getMonthOffset:function(e,t){var n=1,r=Math.floor((14-t)/12),i=e-r,s=t+12*r-2,o=(Math.floor(n+i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400)+31*s/12)-1)%7;return o},getDayWeek:function(e,t,n){e=Number(e),t=Number(t),n=Number(n),t<3&&(t+=12,e-=1);var r=(n+parseInt((t+1)*26/10)+e+parseInt(e/4)+6*parseInt(e/100)+parseInt(e/400)-1)%7;return r},getYearFromDays:function(e){var t=365,n=1461,r=n*25-1,i=r*4+1,s=function(e,t){return e-t*Math.floor(e/t)},o=e-1,u=Math.floor(o/i),a=s(o,i),f=Math.floor(a/r),l=s(a,r),c=Math.floor(l/n),h=s(l,n),p=Math.floor(h/t),d=400*u+100*f+4*c+p;return f!==4&&p!==4&&++d,d},getDaysSinceYearZero:function(e,t,n){var r=this.getNumbersOfLeapsYear(e),i=this.isLeapYear(e),s=this.getAccumulatedDaysInMonth(i),o=(e-1)*365+r+s[t-1]+n-1;return o},getAccumulatedDaysInMonth:function(e){return e?[0,31,60,91,121,152,182,213,244,274,305,335]:[0,31,59,90,120,151,181,212,243,273,304,334]},getDateSinceYearZero:function(e){var t=this.getYearFromDays(e),n=this.getDaysSinceYearZero(t,1,1),r=e-n,i=this.isLeapYear(t),s=this.getAccumulatedDaysInMonth(i),o;for(var u=0;u<s.length;u++){if(!(s[u]<=r))break;o=u}return{year:t,month:o+1,day:e-n-s[o]+1}},getMonthDiff:function(e,t,n,r){var i=e*12+t,s=n*12+r;return s-i},getDiff:function(e,t){var n=this.split(e),r=this.split(t),i=this.getDaysSinceYearZero(n.year,n.month,n.day),s=this.getDaysSinceYearZero(r.year,r.month,r.day);return s-i},getNumbersOfLeapsYear:function(e){return Math.ceil(e/4)-Math.ceil(e/100)+Math.ceil(e/400)},split:function(e){var t={},n=e.split("-");return n[0]!==undefined&&(t.year=parseInt(n[0],10)),n[1]!==undefined&&(t.month=parseInt(n[1],10)),n[2]!==undefined&&(t.day=parseInt(n[2],10)),t},toInteger:function(e){return parseInt(e.replace(/-/g,""),10)},convertDateToInteger:function(e){return this.toInteger(e.year+"-"+this.normalizeMonth(e.month)+"-"+this.normalizeDay(e.day))},normalizeMonth:function(e){return e.toString().length===1?"0"+e:e.toString()},normalizeDay:function(e){return e.toString().length===1?"0"+e:e.toString()},normalizeDateToString:function(e,t,n){var r=t.toString().length===1?"0"+t:t,i=n.toString().length===1?"0"+n:n;return e.toString()+"-"+r+"-"+i},incrementDaysBy:function(e,t,n,r){var i=this.getDaysSinceYearZero(e,t,n);return i+=r,this.getDateSinceYearZero(i)},incrementMonth:function(e,t){return t+=1,t===13&&(t=1,e++),{year:e,month:t}},incrementMonthBy:function(e,t,n){var r=n<0?12-(Math.abs(n+1)%12+1):n;return{year:Math.floor((t-1+n)/12)+e,month:(t-1+r)%12+1}},decrementMonth:function(e,t){return t-=1,t===0&&(t=12,e--),{year:e,month:t}},incrementYear:function(e){return++e},incrementYearBy:function(e,t){return e+t},decrementYear:function(e){return--e},decrementYearBy:function(e,t){return e-t},getDayFromDateString:function(e){if(e===undefined)return null;var t=e.split("-");return t[2]},getMonthFromDateString:function(e){if(e===undefined)return null;var t=e.split("-");return t[1]},getYearFromDateString:function(e){if(e===undefined)return null;var t=e.split("-");return t[0]},getYearAndMonthFromDateString:function(e){if(e===undefined)return null;var t=e.split("-");return t[0]+"-"+t[1]},getYearAndMonthFromDateObject:function(e){return e.year+"-"+this.normalizeMonth(e.month)},convertToDateObject:function(e){if(e===null)return null;var t=e.split("-"),n=function(e,t,n){e&&(this.year=e),t&&(this.month=t),n&&(this.day=n)},r=t[0]!==undefined?parseInt(t[0],10):null,i=t[1]!==undefined?parseInt(t[1],10):null,s=t[2]!==undefined?parseInt(t[2],10):null;return n.prototype=function(e){var t={};return t.isEmptyDate=!(r&&i&&s),t.cloneDateObject=function(){return this.year&&this.month&&this.day?e.convertToDateObject(this.getFullDateString()):null},t.getFullDateString=function(){return this.year&&this.month&&this.day?this.year+"-"+e.normalizeMonth(this.month)+"-"+e.normalizeDay(this.day):""},t.isMajorThan=function(t){if(t===null)return!1;typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return n.isEmptyDate?!0:this.toInteger()>n.toInteger()},t.isMajorOrEqualThan=function(t){typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return this.toInteger()>=n.toInteger()},t.isMinorThan=function(t){typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return this.toInteger()<n.toInteger()},t.isMinorOrEqualThan=function(t){typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return this.toInteger()<=n.toInteger()},t.isEqualThan=function(t){typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return this.toInteger()===n.toInteger()},t.toInteger=function(){return e.toInteger(this.getFullDateString())},r&&i&&s&&(t.getDiff=function(t){return typeof t=="object"&&(t=t.getFullDateString()),e.getDiff(this.getFullDateString(),t)}),r&&i&&(t.getYearAndMonth=function(){return this.year+"-"+e.normalizeMonth(this.month)},t.getMonthDiff=function(t){typeof t=="object"&&(t=t.getFullDateString());var n=e.convertToDateObject(t);return e.getMonthDiff(this.year,this.month,n.year,n.month)}),r&&(t.getYear=function(){return this.year},t.isLeapYear=function(){return e.isLeapYear(this.year)},t.incrementYear=function(){return this.year=e.incrementYear(this.year),this},t.incrementYearBy=function(t){return this.year=e.incrementYearBy(this.year,t),this},t.decrementYear=function(){return this.year=e.decrementYear(this.year),this},t.decrementYearBy=function(t){return this.year=e.decrementYearBy(this.year,t),this}),i&&(t.getMonth=function(){return this.month},t.getMonthDuration=function(){return e.getMonthDuration(this.year,this.month)},t.getMonthOffset=function(){return e.getMonthOffset(this.year,this.month)},t.incrementMonth=function(){var t=e.incrementMonth(this.year,this.month);return this.year=t.year,this.month=t.month,this.day=1,this},t.incrementMonthBy=function(t){var n=e.incrementMonthBy(this.year,this.month,t);return this.year=n.year,this.month=n.month,this.day=1,this},t.decrementMonth=function(){var t=e.decrementMonth(this.year,this.month);return this.year=t.year,this.month=t.month,this.day=1,this}),s&&(t.getDay=function(){return this.day},t.incrementDaysBy=function(t){var n=e.incrementDaysBy(this.year,this.month,this.day,t);return this.year=n.year,this.month=n.month,this.day=n.day,this}),t}(this),new n(r,i,s)}}}),define("common.module/js/Datepicker/core/config",["./date-helper"],function(e){var t=new Date;return{defaults:{today:function(){return t.getUTCFullYear()+"-"+e.normalizeMonth(t.getUTCMonth()+1)+"-"+e.normalizeDay(t.getUTCDate())}.call(),anticipationDate:function(){return t.getUTCFullYear()+"-"+e.normalizeMonth(t.getUTCMonth()+1)+"-"+e.normalizeDay(t.getUTCDate())}.call(),maxReservationDays:30,maxAvailableDays:200,minReservationDays:1,language:"es",roundtrip:!0,showNightsTooltip:!1,showDaysTooltip:!1,lazyLoad:!0}}}),define("common.module/js/Datepicker/core/cache-helper",[],function(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]===undefined&&(e[t]=n)},ifExist:function(t){return e[t]!==undefined}}}),define("common.module/js/Datepicker/core/dom-helper",["jquery"],function(e){return{cloneNode:function(e){return e.cloneNode(!0)},createTextNode:function(e){return document.createTextNode(e)},createElement:function(t,n){var r=e(document.createElement(t));return r.addClass(n),r},getNightsTooltip:function(e){var t=this.createElement("div","_dpmg2--nights-wrapper"),n=this.createElement("span","_dpmg2--nights-singular-text"),r=this.createTextNode(e.nightsTooltip.singular);n.append(r);var i=this.createElement("span","_dpmg2--nights-plural-text"),s=this.createTextNode(e.nightsTooltip.plural);return i.append(s),t.append(n),t.append(i),t},getDaysTooltip:function(e){var t=this.createElement("div","_dpmg2--nights-wrapper"),n=this.createElement("span","_dpmg2--nights-singular-text");n.addClass("--days");var r=this.createTextNode(e.daysTooltip.singular);n.append(r);var i=this.createElement("span","_dpmg2--nights-plural-text");i.addClass("--days");var s=this.createTextNode(e.daysTooltip.plural);return i.append(s),t.append(n),t.append(i),t},getMobileHeader:function(){var e=this.createElement("div","_dpmg2--mobileControlsWrapper"),t=this.createElement("span","_dpmg2--mobileControls-title"),n=this.createElement("i","_dpmg2--icon-close _dpmg2--mobile-close");e.append(n),e.append(t);var r=this.createElement("div","_dpmg2--mobileControls-shortcut _dpmg2--mobileControls-shortcut-start"),i=this.createElement("span","_dpmg2--mobileControls-shortcut-title _dpmg2--mobileControls-shortcut-title-left");r.append(i);var s=this.createElement("span","_dpmg2--mobileControls-shortcut-date"),o=this.createTextNode("-");s.append(o),r.append(s),e.append(r);var u=this.createElement("div","_dpmg2--mobileControls-shortcut _dpmg2--mobileControls-shortcut-end"),a=this.createElement("span","_dpmg2--mobileControls-shortcut-title _dpmg2--mobileControls-shortcut-title-right"),f=this.createElement("div","_dpmg2--mobileControls-shortcut-info"),l=this.createElement("span","_dpmg2--mobileControls-shortcut-info-label");f.append(l),u.append(a);var c=this.createElement("span","_dpmg2--mobileControls-shortcut-date"),h=this.createTextNode("-");return c.append(h),u.append(c),e.append(u),e.append(f),e},getTodayLabel:function(e){var t=this.createElement("span","_dpmg2--today-label"),n=this.createTextNode(e.todayLabel);return t.append(n),t},getDefaultMonth:function(t){var n=document.createDocumentFragment(),r=this.createElement("div","_dpmg2--month"),i=this.createElement("div","_dpmg2--month-title"),s=this.createElement("span","_dpmg2--month-title-month"),o=this.createTextNode("");s.append(o),i.append(s);var u=this.createElement("span","_dpmg2--month-title-year"),a=this.createTextNode("");u.append(a),i.append(u),r.append(i);var f=this.createElement("div","_dpmg2--month-daysName"),l=this;e.each(t.shortDayNames,function(e,t){var n=l.createElement("span"),r=l.createTextNode(t);n.append(r),f.append(n)}),r.append(f);var c=this.createElement("div","_dpmg2--month-offset");r.append(c);var h=this.createElement("div","_dpmg2--dates");for(var p=1;p<=31;p++){var d=this.createElement("span","_dpmg2--date _dpmg2--available"),v=this.createTextNode(p),m=this.createElement("span","_dpmg2--date-number");m.append(v);var g=this.createElement("span","_dpmg2--segment-text");d.append(m),d.append(g),h.append(d)}return r.append(h),n.appendChild(r.get(0)),n},getMonthControls:function(){var e=this.createElement("div","_dpmg2--controlsWrapper"),t=this.createElement("div","_dpmg2--controls-prev"),n=this.createElement("i","_dpmg2--icon-ico-arrow");t.append(n);var r=this.createElement("div","_dpmg2--controls-next"),i=this.createElement("i","_dpmg2--icon-ico-arrow");return r.append(i),e.append(t),e.append(r),e},getMobileFooter:function(){var e=this.createElement("button","_dpmg2--mobileFooter-btn _dpmg2--mobileFooter-btn-legacy _dpmg2--mobile-apply sbox-3-btn-ghost -md"),t=this.createElement("button","_dpmg2--mobileFooter-btn _dpmg2--mobileFooter-btn-tendencia  _dpmg2--mobile-apply sbox-3-btn -primary -lg"),n=this.createElement("span","_dpmg2--mobileFooter-text"),r=this.createElement("div","_dpmg2--mobileFooter");return r.append(n),r.append(t),r.append(e),r},getDesktopFooter:function(){var e=this.createElement("div","_dpmg2--date-footer"),t=this.createElement("div","_dpmg2--desktopFooter-text-container"),n=this.createElement("span","_dpmg2--desktopFooter-text"),r=this.createElement("div","_dpmg2--desktopFooter-btn-container"),i=this.createElement("button","_dpmg2--desktopFooter-button _dpmg2--desktopFooter-button-clear sbox-3-btn -lg -link"),s=this.createElement("em"," _dpmg2--desktopFooter-button-clear-text btn-text"),o=this.createElement("button","_dpmg2--desktopFooter-button _dpmg2--desktopFooter-button-apply sbox-3-btn -lg -primary"),u=this.createElement("em"," _dpmg2--desktopFooter-button-apply-text btn-text");return i.append(s),o.append(u),r.append(i),r.append(o),t.append(n),e.append(t),e.append(r),e},getBaseUi:function(){var e=document.createDocumentFragment(),t=this.createElement("div","_dpmg2--wrapper"),n=this.createElement("div","_dpmg2--pick"),r=this.getMobileHeader(),i=this.getMobileFooter(),s=this.getDesktopFooter(),o=this.createElement("div","_dpmg2--months"),u=this.getMonthControls();return t.append(n),t.append(u),t.append(r),t.append(i),t.append(o),t.append(s),e.appendChild(t.get(0)),e},setBaseUiLanguage:function(t,n){var r=e(t).children("._dpmg2--wrapper");return r.find("._dpmg2--mobileControls-title").text(n.selectDatesTitle),r.find("._dpmg2--mobileControls-shortcut-title-left").text(n.checkinTitle),r.find("._dpmg2--mobileControls-shortcut-title-right").text(n.checkoutTitle),r.find("._dpmg2--mobileFooter-btn").text(n.applyLabel),r.find("._dpmg2--desktopFooter-button-apply-text").text(n.applyLabel),r.find("._dpmg2--desktopFooter-button-clear-text").text(n.clear),t},setMonthConfig:function(t,n,r,i,s,o){var u=e(t).children("._dpmg2--month"),a="_dpmg2--o-"+n;return u.addClass(a),u.find("._dpmg2--date").slice(r).remove(),u.attr("data-month",i),u.find("._dpmg2--month-title-month").text(s),u.find("._dpmg2--month-title-year").text(o),t}}}),define("common.module/js/Datepicker/core/i18n-helper",[],function(){return{es:{monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortDayNames:["dom","lun","mar","mié","jue","vie","sáb"],selectDatesTitle:"Selecciona tus fechas",checkinTitle:"Inicio",checkoutTitle:"Fin",todayLabel:"Hoy",clear:"Borrar",apply:"Aplicar",dayTrip:"Viaje de {0} dias",nightTrip:"Viaje de {0} noches",nightsTooltip:{singular:"Noche",plural:"Noches"},daysTooltip:{singular:"Día",plural:"Días"},applyLabel:"Aplicar",segments:{singular:"Tramo",plural:"Tramos"}},pt:{monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortDayNames:["dom","seg","ter","qua","qui","sex","sáb"],selectDatesTitle:"Selecione a sua data",checkinTitle:"Início",checkoutTitle:"Final",todayLabel:"Hoje",clear:"Excluir",apply:"Aplicar",dayTrip:"Viagem de {0} dias",nightTrip:"Viagem de {0} noites",nightsTooltip:{singular:"noite",plural:"noites"},daysTooltip:{singular:"Dia",plural:"Dias"},applyLabel:"Aplicar",segments:{singular:"Trecho",plural:"Trechos"}},en:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDayNames:["sun","mon","tue","wen","thu","fri","sat"],selectDatesTitle:"Select date",checkinTitle:"Starts",checkoutTitle:"End",todayLabel:"Today",clear:"Delete",apply:"Apply",dayTrip:"{0}-day trip",nightTrip:"{0}-night trip",nightsTooltip:{singular:"Night",plural:"Nights"},daysTooltip:{singular:"Day",plural:"Days"},applyLabel:"Apply",segments:{singular:"Route",plural:"Routes"}}}}),define("common.module/js/Datepicker/core/calendar-helper",["./date-helper","./cache-helper","./dom-helper","./i18n-helper","jquery"],function(e,t,n,r,i){return{getMonthsFragments:function(s,o,u,a){var f=e.convertToDateObject(u);a=a||[];var l=[];for(var c=0;c<o;c++){var h=r[s].monthNames[f.month-1],p=f.year,d=n.cloneNode(t.get("defaultMonth")),v=f.getMonthOffset()+1,m=f.getMonthDuration(),g=f.getYearAndMonth(),y=n.setMonthConfig(d,v,m,g,h,p);c===0&&i(y.firstChild).addClass("_dpmg2--month-active");var b=a.filter(function(t){return g===e.getYearAndMonthFromDateString(t.date)});b.map(function(t){var n="._dpmg2--date:nth-child("+e.getDayFromDateString(t.date)+")";i(y.firstChild).find(n).addClass("_dpmg2--segment").find("._dpmg2--segment-text").text(t.text)});for(var w=1;w<m;w++){var E=e.getDayWeek(f.year,f.month,w);if(E===0||E===6){var S="._dpmg2--date:nth-child("+w+")";i(y.firstChild).find(S).addClass("_dpmg2--weekend")}}l.push(y),f.incrementMonth()}return l},prepareMonthsFragments:function(e,t,r,s,o,u,a){var f=i();for(var l in e)f=f.add(e[l].childNodes[0]);var c=f.children("._dpmg2--dates").children("._dpmg2--date");return c.slice(0,r).removeClass("_dpmg2--available").addClass("_dpmg2--unavailable"),c.slice(s).removeClass("_dpmg2--available").addClass("_dpmg2--unavailable"),c.slice(s,o+s).removeClass("_dpmg2--unavailable").addClass("_dpmg2--not-allowed"),c.eq(t-1).append(n.getTodayLabel(u)).addClass("_dpmg2--today "),a&&c.slice(a).removeClass("_dpmg2--available").addClass("_dpmg2--unavailable").addClass("_dpmg2--not-allowed"),e},isValidDateBetweenAllowedRange:function(t,n,r,i,s){var o=e.convertToDateObject(t);if(i){var u;return s&&s.fromStartDate&&s.min_reservation_days?u=o.isMinorThan(i):u=o.isMinorOrEqualThan(i),o.isMajorOrEqualThan(n)&&o.isMinorThan(r)&&u}return o.isMajorOrEqualThan(n)&&o.isMinorThan(r)},isMinReservationDaysExceeded:function(t,n,r){var i=e.getDiff(t,n);return i<r},isMaxReservationDaysExceeded:function(t,n,r){var i=e.convertToDateObject(n),s=e.convertToDateObject(t).incrementDaysBy(r).getFullDateString();return i.isMajorThan(s)},isStartRangeLaterThanEndRange:function(t,n){var r=e.convertToDateObject(t),i=e.convertToDateObject(n);return r.isMajorThan(i)},getFormattedTextDate:function(t,n){if(n!==""){var i=e.convertToDateObject(n),s=e.normalizeDay(i.day);s=s<=9?s.substr(1):s;var o=r[t].monthNames[i.month-1].substr(0,3).toLowerCase(),u=i.year;return s+" "+o+" "+u}return"-"}}}),define("common.module/js/Datepicker/core/model",["backbone","underscore","jquery","./date-helper","./calendar-helper"],function(e,t,n,r,i){var s=767,o={roundtrip:null,add_reservation_days:0,today_date:"",anticipation_date:"",deadline_date:"",start_date:"",end_date:"",max_reservation_days:0,min_reservation_days:0,range_complete:!1,show_nights_tooltip:!1,show_days_tooltip:!1,show_additional_days:null,visible:!1,mobile_visible:!1,isMobileViewport:window.screen.width<s,active_range:"",rendered_months:0,initialized:!1,month_index:0,pick_left_position:-1,position:{x:0,y:0},decorated_dates:null,segments:!1,segmentNumber:0,no_clear_on_start_date:!1,last_available_date:""},u=function(e){var t=!1;if(e.start_date!==""){var n=i.isValidDateBetweenAllowedRange(e.start_date,e.anticipation_date,e.deadline_date,e.last_available_date,{fromStartDate:!0,min_reservation_days:e.min_reservation_days});if(!n)t={validation:"error",error_type:"start_date_out_of_range"};else if(e.roundtrip&&e.end_date!==""){var s=r.convertToDateObject(e.start_date),o=i.isMaxReservationDaysExceeded(e.start_date,e.end_date,e.max_reservation_days),u=i.isMinReservationDaysExceeded(e.start_date,e.end_date,e.min_reservation_days);if(s.isMajorThan(e.end_date)||o||u){var a={end_date:"",start_date:e.start_date};t={validation:"override_model",attributes:a}}}}return t},a=function(e){var t=!1,n=r.convertToDateObject(e.deadline_date).incrementDaysBy(e.add_reservation_days).getFullDateString(),s=i.isValidDateBetweenAllowedRange(e.end_date,e.anticipation_date,n,e.last_available_date);if(!s)t={validation:"error",error_type:"end_date_out_of_range"};else if(e.roundtrip&&e.start_date!==""){var o=r.convertToDateObject(e.end_date),u=i.isMaxReservationDaysExceeded(e.start_date,e.end_date,e.max_reservation_days);u&&(t={validation:"error",error_type:"end_date_not_allowed"});var a=i.isMinReservationDaysExceeded(e.start_date,e.end_date,e.min_reservation_days);o.isMajorOrEqualThan(e.start_date)&&a&&(t={validation:"error",error_type:"end_date_not_allowed"});if(o.isMinorThan(e.start_date)){var f;e.isMobileViewport?f={start_date:e.end_date,end_date:""}:f={start_date:"",end_date:e.end_date},t={validation:"override_model",attributes:f}}}return t},f=function(e){var t=!1,n=e.active_range;switch(n){case"start":t=u(e);break;case"end":t=a(e)}return typeof t=="object"&&(t.from="user_interaction"),t},l=function(e,t){var n=!1;return t.from&&t.from==="user_interaction"&&(n=f(e)),n},c=e.Model.extend({defaults:o,validate:l,isStartRangeActive:function(){return this.get("active_range")==="start"},isEndRangeActive:function(){return this.get("active_range")==="end"},isRangeComplete:function(){return!this.get("roundtrip")||this.get("start_date")!==""&&this.get("end_date")!==""},setVisible:function(){var e=this.get("isMobileViewport");e?this.set("mobile_visible",!0):this.set("visible",!0)},setNotVisible:function(){var e=this.get("isMobileViewport");e?this.set("mobile_visible",!1):this.set("visible",!1)},getTodayDate:function(){return r.convertToDateObject(this.get("today_date"))},getAnticipationDate:function(){return r.convertToDateObject(this.get("anticipation_date"))},getDeadlineDate:function(){return r.convertToDateObject(this.get("deadline_date"))},getLimitDate:function(){return r.convertToDateObject(this.get("start_date")).incrementDaysBy(this.get("max_reservation_days")).getFullDateString()},isVisible:function(){var e=this.get("isMobileViewport");return e?this.get("mobile_visible"):this.get("visible")},isInitialized:function(){return this.get("initialized")},getStartDate:function(){return r.convertToDateObject(this.get("start_date"))},getEndDate:function(){return r.convertToDateObject(this.get("end_date"))}});return function(e,t,n,i,o,u,a,f,l,h,p,d,v,m,g,y,b,w){var E=new c({add_reservation_days:u,today_date:e,anticipation_date:t,deadline_date:r.convertToDateObject(t).incrementDaysBy(n).getFullDateString(),max_reservation_days:o,min_reservation_days:i,roundtrip:a,show_nights_tooltip:f,show_days_tooltip:l,show_info_header:h,decorated_dates:p,segments:d,segment_number:v,segment_max_number:m,show_days_in_header:g,no_clear_on_start_date:y,last_available_date:b,fix_calculation_months_to_render:w});return window.addEventListener("resize",function(){window.screen.width<s?E.set("isMobileViewport",!0):E.set("isMobileViewport",!1)}),E.on("change:isMobileViewport",function(){this.setNotVisible()}),E}}),define("common.module/js/Datepicker/core/animation-helper",[],function(){var e={linear:function(e,t,n,r){return n*e/r+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t}};return{animate:function(t,n,r,i,s,o){function f(e){var c=(e||+(new Date))-l;i(s(c,t,a,r)),c>=r?(i(n),o()):u(f)}if(typeof t!="number"||typeof n!="number"||typeof r!="number"||typeof i!="function")return;typeof s=="string"&&e[s]&&(s=e[s]),typeof s!="function"&&(s=e.linear),typeof o!="function"&&(o=function(){});var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},a=n-t;i(t);var l=window.performance&&window.performance.now?window.performance.now():+(new Date);u(f)}}}),define("common.module/js/Datepicker/core/events-helper",["backbone","underscore","./dom-helper","./animation-helper","jquery","./date-helper"],function(e,t,n,r,i,s){var o=function(e){var t={datepicker:null,monthWrapper:null,months:null,startShortcut:null,endShortcut:null,dates:null,pick:null},o={},u=function(e){if(!t.dates||t.dates&&t.dates.length===0)t.dates=e.find("._dpmg2--date")};return e.on("open-datepicker",function(){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),u(this.context),t.datepicker.addClass("_dpmg2--show")}).on("close-datepicker",function(){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.removeClass("_dpmg2--show")}).on("open-mobile-datepicker",function(){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),u(this.context),t.datepicker.addClass("_dpmg2--mobile-show")}).on("modal-body-class",function(e){e?i(document.body).addClass("_dpmg2--show-modal"):i(document.body).removeClass("_dpmg2--show-modal")}).on("transition-displacement",function(e){e?t.datepicker.addClass("_dpmg2--transition-displacement"):t.datepicker.removeClass("_dpmg2--transition-displacement")}).on("nights-tooltip",function(e,r,i){o["_dpmg2--nights-tooltip"]&&(o["_dpmg2--nights-tooltip"].find("._dpmg2--nights-wrapper").remove(),o["_dpmg2--nights-tooltip"].removeClass("_dpmg2--nights-tooltip")),u(this.context);var s=t.dates.slice(e,e+r),a=n.getNightsTooltip(i);s.append(a).addClass("_dpmg2--nights-tooltip"),o["_dpmg2--nights-tooltip"]=s}).on("clear-nights-tooltip",function(){o["_dpmg2--nights-tooltip"]&&(o["_dpmg2--nights-tooltip"].find("._dpmg2--nights-wrapper").remove(),o["_dpmg2--nights-tooltip"].removeClass("_dpmg2--nights-tooltip"),delete o["_dpmg2--nights-tooltip"])}).on("days-tooltip",function(e,r,i){o["_dpmg2--nights-tooltip"]&&(o["_dpmg2--nights-tooltip"].find("._dpmg2--nights-wrapper").remove(),o["_dpmg2--nights-tooltip"].removeClass("_dpmg2--nights-tooltip")),u(this.context);var s=t.dates.slice(e,e+r),a=n.getDaysTooltip(i);s.append(a).addClass("_dpmg2--nights-tooltip").addClass("_dpmg2--days--modifier"),o["_dpmg2--nights-tooltip"]=s}).on("clear-days-tooltip",function(){o["_dpmg2--nights-tooltip"]&&(o["_dpmg2--nights-tooltip"].find("._dpmg2--danightsys-wrapper").remove(),o["_dpmg2--nights-tooltip"].removeClass("_dpmg2--nights-tooltip"),delete o["_dpmg2--nights-tooltip"])}).on("clear-range-days-header-mobile",function(){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.find("._dpmg2--mobileControls-shortcut-info-label").html("-")}).on("set-range-text-header-mobile",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.find("._dpmg2--mobileControls-shortcut-info-label").html(e),t.datepicker.find("._dpmg2--mobileFooter-text").html(e)}).on("set-range-text-footer-desktop",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.find("._dpmg2--desktopFooter-text").hide().html(e).fadeIn()}).on("show-info-header-mobile",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),e?t.datepicker.addClass("_dpmg2--show-info"):t.datepicker.removeClass("_dpmg2--show-info")}).on("close-mobile-datepicker",function(){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.removeClass("_dpmg2--mobile-show")}).on("show-apply-mobile-datepicker",function(e){t.footer||(t.footer=this.context.find("._dpmg2--mobileFooter")),e?t.footer.addClass("_dpmg2--button-show"):t.footer.removeClass("_dpmg2--button-show")}).on("enable-clear-desktop",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),e?t.datepicker.find("._dpmg2--desktopFooter-button-clear").removeClass("-disable"):t.datepicker.find("._dpmg2--desktopFooter-button-clear").addClass("-disable")}).on("enable-apply-desktop",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),e?t.datepicker.find("._dpmg2--desktopFooter-button-apply").removeClass("-disable"):t.datepicker.find("._dpmg2--desktopFooter-button-apply").addClass("-disable")}).on("displace-datepicker",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.css({left:e.position.x,top:e.position.y})}).on("displace-pick",function(e){t.pick||(t.pick=this.context.find("._dpmg2--pick")),t.pick.css("left",e)}).on("show-month",function(e,n){if(!t.months||t.months&&t.months.length===0)t.months=this.context.find("._dpmg2--month");t.monthWrapper||(t.monthWrapper=this.context.find("._dpmg2--months"));var i=t.months.eq(e);t.months.removeClass("_dpmg2--month-active"),i.addClass("_dpmg2--month-active");if(n){var s=t.monthWrapper.get(0).scrollTop,o,u="._dpmg2--range-start",a=t.months[e].querySelector(u);a&&(o=a.offsetTop),o&&r.animate(s,o,500,function(e){t.monthWrapper.get(0).scrollTop=e},"easeOutQuad")}}).on("calendar-roundtrip",function(e,n){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),e?t.datepicker.removeClass("_dpmg2--onlyway").removeClass("_dpmg2--segments").addClass("_dpmg2--roundtrip"):n?t.datepicker.removeClass("_dpmg2--roundtrip").addClass("_dpmg2--onlyway").addClass("_dpmg2--segments"):t.datepicker.removeClass("_dpmg2--roundtrip").removeClass("_dpmg2--segments").addClass("_dpmg2--onlyway")}).on("clear-date-range",function(e){if(e==="end"){var t=o["_dpmg2--range-end"],n=o["_dpmg2--has-end-range"];t&&t.removeClass("_dpmg2--range-end"),n&&n.removeClass("_dpmg2--has-end-range")}else if(e==="start"){var r=o["_dpmg2--range-start"],i=o["_dpmg2--has-start-range"];r&&r.removeClass("_dpmg2--range-start"),i&&i.removeClass("_dpmg2--has-start-range")}}).on("update-segment-text",function(e,n){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper"));var r=e.get("decorated_dates"),i=e.get("start_date"),o=e.get("segment_number");t.datepicker.find("._dpmg2--range-start").find("._dpmg2--segment-text").html(n.segments.singular+" "+o),r&&r.forEach(function(e){var r=s.getYearAndMonthFromDateString(e.date),o="._dpmg2--date:nth-child("+s.getDayFromDateString(e.date)+")";t.datepicker.find("[data-month="+r+"]").find(o).addClass("_dpmg2--segment").find("._dpmg2--segment-text").html(e.text),i===e.date&&t.datepicker.find("._dpmg2--range-start").find("._dpmg2--segment-text").html(n.segments.plural)})}).on("date-shortcut",function(e,n){e==="start"?(t.startShortcut||(t.startShortcut=this.context.find("._dpmg2--mobileControls-shortcut-start ._dpmg2--mobileControls-shortcut-date")),t.startShortcut.text(n)):e==="end"&&(t.endShortcut||(t.endShortcut=this.context.find("._dpmg2--mobileControls-shortcut-end ._dpmg2--mobileControls-shortcut-date")),t.endShortcut.text(n))}).on("clear-date-shortcut",function(e){e==="start"?(t.startShortcut||(t.startShortcut=this.context.find("._dpmg2--mobileControls-shortcut-start ._dpmg2--mobileControls-shortcut-date")),t.startShortcut.text("-")):e==="end"&&(t.endShortcut||(t.endShortcut=this.context.find("._dpmg2--mobileControls-shortcut-end ._dpmg2--mobileControls-shortcut-date")),t.endShortcut.text("-"))}).on("date-selected",function(e){t.months||(t.months=this.context.find("._dpmg2--month"));var n=e.range==="start"?"_dpmg2--has-start-range":e.range==="end"?"_dpmg2--has-end-range":"",r="_dpmg2--range-"+e.range;o[r]&&o[r].removeClass(r),o[n]&&o[n].removeClass(n),t.months.filter("[ data-month = "+e.month_attribute+"]").addClass(n).find("._dpmg2--date").eq(e.day_number-1).addClass(r),o[r]=t.months.find("."+r),o[n]=t.months.filter("."+n)}).on("limit-date",function(e){o["_dpmg2--limit-date"]&&o["_dpmg2--limit-date"].removeClass("_dpmg2--limit-date"),o["_dpmg2--has-limit-date"]&&o["_dpmg2--has-limit-date"].removeClass("_dpmg2--has-limit-date");var n=t.months.filter("[ data-month = "+e.month_attribute+"]"),r=n.find("._dpmg2--date").slice(e.day_number);n.addClass("_dpmg2--has-limit-date"),r.addClass("_dpmg2--limit-date"),o["_dpmg2--has-limit-date"]=n,o["_dpmg2--limit-date"]=r}).on("clear-limit-date",function(){o["_dpmg2--limit-date"]&&o["_dpmg2--limit-date"].removeClass("_dpmg2--limit-date"),o["_dpmg2--has-limit-date"]&&o["_dpmg2--has-limit-date"].removeClass("_dpmg2--has-limit-date"),delete o["_dpmg2--limit-date"],delete o["_dpmg2--has-limit-date"]}).on("range-complete",function(e,n,r){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),u(this.context),t.datepicker.attr("data-range-complete",e?"true":"false"),t.dates.removeClass("_dpmg2--date-range"),e&&t.dates.slice(n,r).addClass("_dpmg2--date-range")}).on("calendar-range",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.attr("data-range",e.range)}).on("show-additional-days",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),t.datepicker.attr("data-show-additional-days",e)}).on("viewport-changed",function(e){t.datepicker||(t.datepicker=this.context.find("._dpmg2--wrapper")),e?t.datepicker.removeClass("_dpmg2--show"):t.datepicker.removeClass("_dpmg2--mobile-show")}).on("append-months",function(e){var t=e.monthsFragment;this.context.find("._dpmg2--months").append(t)}).on("decorated-dates-changed",function(e){var t=this.context;t.find("._dpmg2--date").removeClass("_dpmg2--segment"),e&&e.forEach(function(e){if(e.date&&e.date.length===10){var n=e.date.substr(0,7),r=e.date.substr(-2);t.find('._dpmg2--month[data-month="'+n+'"]').find("._dpmg2--date:nth-child("+r+")").addClass("_dpmg2--segment").find("._dpmg2--segment-text").text(e.text)}else window&&window.console&&window.console.warn&&window.console.warn("Invalid decorate date object")})}),e};return{bind:function(n){var r=t.extend({context:n},e.Events),i=o(r);return i}}}),define("common.module/js/Datepicker/core/validator-helper",[],function(){return{stopExecution:function(e){throw new Error(e)},console:{warn:function(e){window.console&&window.console.warn(e)},error:function(e){window.console&&window.console.error(e)}},checkArguments:function(e,t,n,r){this.toCheck(e).isUndefined().resultIsTrue(function(){this.stopExecution("El primer argumento de la instancia del calendario es obligatorio.")}).isDOM().resultIsFalse(function(){this.stopExecution("El primer argumento de la instancia del calendario debe ser un elemento HTML.")}),this.toCheck(t).isUndefined().resultIsTrue(function(){this.stopExecution("El segundo argumento de la instancia del calendario es obligatorio.")}).isObject().resultIsFalse(function(){this.stopExecution("El segundo argumento de la instancia del calendario debe ser un objeto.")}),this.toCheck(n).isUndefined().resultIsFalse(function(){this.toCheck(n).isObject().resultIsFalse(function(){this.stopExecution("El tercer argumento de la instancia del calendario debe ser un objeto.")}).resultIsTrue(function(){this.toCheck(n.checkinTitle).isUndefined().resultIsFalse(function(){this.toCheck(n.checkinTitle).isString().resultIsFalse(function(){this.stopExecution('La propiedad "checkinTitle" del tercer argumento de la instancia del calendario debe ser del tipo "string".')})}),this.toCheck(n.checkoutTitle).isUndefined().resultIsFalse(function(){this.toCheck(n.checkoutTitle).isString().resultIsFalse(function(){this.stopExecution('La propiedad "checkoutTitle" del tercer argumento de la instancia del calendario debe ser del tipo "string".')})})})}),this.toCheck(t.roundtrip).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "roundtrip" del segundo argumento de la instancia del calendario es obligatoria.')}).isBoolean().resultIsFalse(function(){var e=r.defaults.roundtrip;t.roundtrip=e,this.console.warn('La propiedad "roundtrip" del segundo argumento de la instancia del calendario debe ser del tipo "boolean". Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.showNightsTooltip).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "showNightsTooltip" del segundo argumento de la instancia del calendario es obligatoria.')}).isBoolean().resultIsFalse(function(){var e=r.defaults.showNightsTooltip;t.showNightsTooltip=e,this.console.warn('La propiedad "showNightsTooltip" del segundo argumento de la instancia del calendario debe ser del tipo "boolean". Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.showDaysTooltip).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "showDaysTooltip" del segundo argumento de la instancia del calendario es obligatoria.')}).isBoolean().resultIsFalse(function(){var e=r.defaults.showDaysTooltip;t.showDaysTooltip=e}),this.toCheck(t.showDaysTooltip&&t.showNightsTooltip).isTrue().resultIsTrue(function(){this.stopExecution('Las propiedades "showDaysTooltip" y "showNightsTooltip" no pueden convivir, porfavor setee una sola.')}),this.toCheck(t.today).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "today" del segundo argumento de la instancia del calendario es obligatoria.')}).isString().resultIsFalse(function(){this.console.warn('La propiedad "today" del segundo argumento de la instancia del calendario debe ser del tipo "string".')}).isValidDateString().resultIsFalse(function(){var e=r.defaults.today;t.today=e,this.console.warn('El valor de la propiedad "today" del segundo argumento de la instancia del calendario es inválido. (Formato esperado: AAAA-MM-DD). Por default se asignará la siguiente fecha: "'+e+'"')}),this.toCheck(t.anticipationDate).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "anticipationDate" del segundo argumento de la instancia del calendario es obligatoria.')}).isString().resultIsFalse(function(){this.console.warn('La propiedad "anticipationDate" del segundo argumento de la instancia del calendario debe ser del tipo "string".')}).isValidDateString().resultIsFalse(function(){var e=r.defaults.anticipationDate;t.anticipationDate=e,this.console.warn('El valor de la propiedad "anticipationDate" del segundo argumento de la instancia del calendario es inválido. (Formato esperado: AAAA-MM-DD). Por default se asignará la siguiente fecha: "'+e+'"')}),this.toCheck(t.maxReservationDays).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "maxReservationDays" del segundo argumento de la instancia del calendario es obligatoria.')}).isNumber().resultIsFalse(function(){var e=r.defaults.maxReservationDays;t.maxReservationDays=e,this.console.warn('La propiedad "maxReservationDays" del segundo argumento de la instancia del calendario debe ser del tipo "number". Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.maxAvailableDays).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "maxAvailableDays" del segundo argumento de la instancia del calendario es obligatoria.')}).isNumber().resultIsFalse(function(){var e=r.defaults.maxAvailableDays;t.maxAvailableDays=e,this.console.warn('La propiedad "maxAvailableDays" del segundo argumento de la instancia del calendario debe ser del tipo "number". Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.minReservationDays).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "minReservationDays" del segundo argumento de la instancia del calendario es obligatoria.')}).isNumber().resultIsFalse(function(){var e=r.defaults.minReservationDays;t.minReservationDays=e,this.console.warn('La propiedad "minReservationDays" del segundo argumento de la instancia del calendario debe ser del tipo "number". Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.language).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "language" del segundo argumento de la instancia del calendario es obligatoria.')}).isString().resultIsFalse(function(){this.console.warn('La propiedad "language" del segundo argumento de la instancia del calendario debe ser del tipo "string".')}).isEmpty().resultIsTrue(function(){var e=r.defaults.language;t.language=e,this.console.warn('La propiedad "language" del segundo argumento de la instancia del calendario no puede estar vacía. Por default se asignará el siguiente valor: "'+e+'"')}),this.toCheck(t.lazyLoad).isUndefined().resultIsTrue(function(){this.console.warn('La propiedad "lazyLoad" del segundo argumento de la instancia del calendario es obligatoria.')}).isBoolean().resultIsFalse(function(){this.console.warn('La propiedad "lazyLoad" del segundo argumento de la instancia del calendario debe ser del tipo "boolean".')}).isNull().resultIsTrue(function(){var e=r.defaults.lazyLoad;t.lazyLoad=e,this.console.warn('La propiedad "lazyLoad" del segundo argumento de la instancia del calendario no puede estar vacía. Por default se asignará el siguiente valor: "'+e+'"')})},toCheck:function(e){var t=!0,n=function(){t=!0},r=function(r){return{isDOM:function(){return t=t&&r.isDOM(e),this},isUndefined:function(){return t=t&&r.isUndefined(e),this},isValidDateString:function(){return t=t&&r.isValidDateString(e),this},isObject:function(){return t=t&&r.isObject(e),this},isString:function(){return t=t&&r.isString(e),this},isNumber:function(){return t=t&&r.isNumber(e),this},isBoolean:function(){return t=t&&r.isBoolean(e),this},isEmpty:function(){return t=t&&r.isEmpty(e),this},isNull:function(){return t=t&&r.isNull(e),this},isTrue:function(){return t=t&&r.isTrue(e),this},getResult:function(){return t},resultIsTrue:function(e){return t&&e.call(r),n(),this},resultIsFalse:function(e){return t||e.call(r),n(),this}}};return r(this)},isDOM:function(e){if("HTMLElement"in window)return!!e&&e instanceof HTMLElement},isUndefined:function(e){return e===undefined},isValidDateString:function(e){return/^\d{4}([./-])\d{2}\1\d{2}$/.test(e)},isObject:function(e){return e instanceof Object},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isTrue:function(e){return e===!0},isBoolean:function(e){return typeof e=="boolean"},isEmpty:function(e){return!e},isNull:function(e){return e===null}}}),define("common.module/js/modalManager",[],function(){var e=function(){var e=function(){};return window.history&&(e=function(e){(function(e){e.subscribe("open",function(t){t.modal&&(window.history.pushState({},"modal-#mmp","#mo"),window.onpopstate=function(){e.hasOwnProperty("unsubscribe")?e.unsubscribe("close"):e.subscribe("close",function(){}),e.hide()},e.subscribe("close",function(e){e.modal&&(window.onpopstate=undefined,window.history.back())}))})})(e)}),{subscribe:e}};return e}),define("common.module/js/Datepicker/main",["jquery","./core/config","./core/model","./core/calendar-helper","./core/dom-helper","./core/date-helper","./core/cache-helper","./core/events-helper","./core/validator-helper","./core/i18n-helper","common.module/js/modalManager","common.module/js/dateHelper"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(h,p,d){a.checkArguments(h,p,d,t);var v=e.extend(f[p.language],d);o.ifExist("baseUi")||o.add("baseUi",i.getBaseUi()),p.segmentNumber=p.segmentNumber||0;var m=p.sboxName,g=p.pageview_id,y=p.sboxVersion,b=n(p.today,p.anticipationDate,p.maxAvailableDays,p.minReservationDays,p.maxReservationDays,p.addReservationDays,p.roundtrip,p.showNightsTooltip,p.showDaysTooltip,p.showInfoHeader,p.decoratedDates,p.segments,p.segmentNumber,p.segmentMaxNumber,p.showDaysInHeader,p.noClearOnStartDate,p.lastAvailableDate,p.fixCalculationMonthsToRender);o.ifExist("defaultMonth")||o.add("defaultMonth",i.getDefaultMonth(v));var w=e(h),E=i.setBaseUiLanguage(i.cloneNode(o.get("baseUi")),v);w.addClass("sbox-v4-components"),w.append(E);var S=u.bind(w);navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;var x={events:{},trigger:function(e){var t=[].slice.call(arguments).slice(1);if(this.events[e]!==undefined)return this.events[e].apply(Mt,t)}},T=function(t){if(window&&window.dataLayer&&m){var n=t+"_date_picker";window.dataLayer.push({event:"user-action",eventCategory:"sbox_home",eventAction:n,eventLabel:m})}if(m==="hotels"&&t&&g&&y){var r=JSON.stringify({type:t,event:"datepicker",version:y,pageview_id:g});e.ajax({url:"/hermes-service/topic/fe_components",type:"POST",data:r,contentType:"application/json; charset=utf-8",dataType:"json"})}},N=function(){var e=b.getDeadlineDate().cloneDateObject();e.incrementDaysBy(b.get("add_reservation_days"));var t;b.get("fix_calculation_months_to_render")?t=b.getAnticipationDate().getMonthDiff(e)+3:t=b.getAnticipationDate().getMonthDiff(e)+2;var n=b.getTodayDate().day,i=b.getTodayDate().getYearAndMonth()+"-01",o=p.language,u=r.getMonthsFragments(o,t,i,b.get("decorated_dates")),a=s.convertToDateObject(i).getDiff(b.getAnticipationDate()),f=s.convertToDateObject(i).getDiff(b.getDeadlineDate()),l=b.get("add_reservation_days"),c=b.get("last_available_date")?s.getDiff(i,b.get("last_available_date")):null,h=r.prepareMonthsFragments(u,n,a,f,l,v,c);S.trigger("append-months",{monthsFragment:h}),S.trigger("calendar-roundtrip",b.get("roundtrip"),b.get("segments")),S.trigger("clear-range-days-header-mobile"),S.trigger("show-info-header-mobile",b.get("show_info_header")),S.trigger("enable-clear-desktop",!1),S.trigger("enable-apply-desktop",!1),b.get("segments")&&S.trigger("set-range-text-header-mobile",b.get("segment_max_number")+" Tramos"),b.set("rendered_months",h.length),b.set("initialized",!0)};p.lazyLoad||N();var C=function(){var e=b.get("month_index"),t=b.get("rendered_months");e<t-2&&b.set("month_index",e+1)},k=function(){var e=b.get("month_index");e>0&&b.set("month_index",e-1)},L=function(e){var t=s.normalizeDay(e.index()+1),n=e.parents("._dpmg2--month").attr("data-month");return n+"-"+t},A=function(e){if(b.get("active_range")==="start")return b.get("start_date")!==e;if(b.get("active_range")==="end")return b.get("end_date")!==e},O=function(e){navigator.vibrate&&navigator.vibrate(e)},M=function(t){b.get("isMobileViewport")||T("date_selected");var n=e(t.target);n.hasClass("_dpmg2--date-number")&&(n=n.parent()),n.hasClass("_dpmg2--today-label")&&(n=n.parent());var r=L(n);A(r)&&(b.isStartRangeActive()?(b.get("range_complete")&&!b.get("no_clear_on_start_date")&&b.set("end_date","",{validate:!0,from:"user_interaction"}),b.set("start_date",r,{validate:!0,from:"user_interaction"})):b.isEndRangeActive()&&b.set("end_date",r,{validate:!0,from:"user_interaction"}))},_=function(){T("close"),H(),K()},D={},P=function(e){D=e.toJSON()},H=function(){b.set(D,{from:"override_model"})},B=function(){x.trigger("successfullySelection",!0,b),x.trigger("apply"),K(),T("date_selected"),T("apply")},j=function(){b.set("show_additional_days",!1),b.set("active_range","start"),b.hasChanged("active_range")||b.trigger("change:active_range",b)},F=function(){I("end"),b.set("active_range","end"),b.hasChanged("active_range")||b.trigger("change:active_range",b)},I=function(e){if(e==="start")b.set("show_additional_days",!1);else if(e==="end")if(b.getStartDate().isEmptyDate)b.set("show_additional_days",!0);else{var t=s.convertToDateObject(b.getLimitDate()),n=s.convertToDateObject(b.get("deadline_date"));b.set("show_additional_days",t.isMajorOrEqualThan(n)&&b.get("add_reservation_days")>0)}},q=function(){b.set("start_date","",{from:"override_model"}),b.set("end_date","",{from:"override_model"}),b.set("active_range","start",{from:"override_model"}),T("clear"),x.trigger("clearDates",!0)};w.on("click","._dpmg2--date",M).on("click","._dpmg2--controls-prev",k).on("click","._dpmg2--controls-next",C).on("click","._dpmg2--mobileControls-shortcut-start",j).on("click","._dpmg2--mobileControls-shortcut-end",F).on("click","._dpmg2--mobile-close",_).on("click","._dpmg2--mobile-apply",B).on("click","._dpmg2--desktopFooter-button-apply",B).on("click","._dpmg2--desktopFooter-button-clear",q);var R=728,U=function(e,t){return e+R<=t},z=function(e,t){var n=e+R-t+31;return n},W=function(e,t,n){var r=20,i=e+R-n,s=e-i-r;return{x:s,y:t}},X=0,V=function(e){return X!==e},J=function(e,t,n){X=window.innerWidth;if(!b.isInitialized()){N();var r=b.get("start_date"),i=b.get("end_date");if(r!==""){var s=b.get("today_date"),o=b.getLimitDate(),u=b.get("deadline_date"),a=b.get("show_nights_tooltip"),f=b.get("show_days_tooltip"),l=b.get("max_reservation_days");dt(s,r,o,u,a,l,f)}i!==""&&vt(i),r!==""&&i!==""&&St(b)}rt(),b.isVisible()?S.trigger("transition-displacement",!0):(b.get("isMobileViewport")||x.trigger("open",{modal:!1}),T("open")),I(e),b.set("active_range",e);var c=16;b.hasChanged("active_range")||b.trigger("change:active_range",b),U(t.x,X)||(c=z(t.x,X),t=W(t.x,t.y,X)),b.set("position",t),b.set("pick_left_position",c),n&&b.set("month_index",b.getTodayDate().getMonthDiff(n)),b.setVisible()},K=function(){b.setNotVisible(),it()},Q=function(){return b.isVisible()},G=function(e){var t=e,n=b.getStartDate(),r=b.getEndDate(),i=null,s=function(e){b.set("month_index",e)},o=function(e){e===b.get("rendered_months")-1&&!b.get("isMobileViewport")&&e--,s(e)};e==="start"?(i=n.isEmptyDate?r:n,t=n.isEmptyDate?"end":"start"):e==="end"&&(i=r.isEmptyDate?n:r,t=r.isEmptyDate?"start":"end");if(!i.isEmptyDate){var u=b.getTodayDate(),a=u.getMonthDiff(i.getFullDateString());t==="start"||b.get("isMobileViewport")?o(a):s(Math.max(a-1,0))}b.hasChanged("month_index")||b.trigger("change:month_index",b)},Y=function(e,t,n,i,s,o,u){var a=!0;if(e!==""){var f=r.isValidDateBetweenAllowedRange(e,i,s);if(!f)x.trigger("error","start_date_out_of_range",e),a=!1;else if(n&&t!==""){var l=r.isStartRangeLaterThanEndRange(e,t);if(l)x.trigger("error","start_date_not_allowed",e),a=!1;else{var c=r.isMaxReservationDaysExceeded(e,t,u),h=r.isMinReservationDaysExceeded(e,t,o);if(c||h)x.trigger("error","start_date_not_allowed",e),a=!1}}}return a},Z=function(e,t,n,i,s,o,u){var a=!0;if(t!==""){var f=r.isValidDateBetweenAllowedRange(t,i,s);if(!f)x.trigger("error","end_date_out_of_range",t),a=!1;else if(n&&e!==""){var l=r.isStartRangeLaterThanEndRange(e,t);if(l)x.trigger("error","end_date_not_allowed",t),a=!1;else{var c=r.isMaxReservationDaysExceeded(e,t,u),h=r.isMinReservationDaysExceeded(e,t,o);if(c||h)x.trigger("error","end_date_not_allowed",t),a=!1}}}return a},et=function(t){if(e(t.target).parents("._dpmg2--wrapper").length===0&&t.target.nodeName!=="HTML"&&b.isVisible()){var n=x.trigger("closingConfirmation",t.target);(n||n===undefined)&&K(),n&&T("close")}},tt=function(e){var t=e.target.innerWidth;b.isVisible()&&!b.get("isMobileViewport")&&V(t)&&K()},nt=function(){b.isVisible()&&K()},rt=function(){e(document).on("mousedown",et),e(document).on("closeDatepicker",nt),e(window).on("resize",tt)},it=function(){e(document).off("mousedown",et),e(document).off("closeDatepicker",nt),e(window).off("resize",tt)},st=function(e){e.isVisible()?S.trigger("open-datepicker"):(S.trigger("close-datepicker"),S.trigger("transition-displacement",!1),e.get("isMobileViewport")||x.trigger("close",{modal:!1}))},ot=function(e){e.isVisible()?(S.trigger("modal-body-class",!0),S.trigger("open-mobile-datepicker"),x.trigger("open",{modal:!0}),P(e)):(S.trigger("close-mobile-datepicker"),S.trigger("modal-body-class",!1),S.trigger("transition-displacement",!1),x.trigger("close",{modal:!0}))},ut=function(e){var t=e.get("position");S.trigger("displace-datepicker",{position:t})},at=function(e,t){S.trigger("displace-pick",t)},ft=function(e){var t={range:"start",month_attribute:e.getYearAndMonth(),day_number:e.getDay()};S.trigger("date-selected",t)},lt=function(e){var t={month_attribute:e.getYearAndMonth(),day_number:e.getDay()};S.trigger("limit-date",t)},ct=function(e){var t={range:"end",month_attribute:e.getYearAndMonth(),day_number:e.getDay()};S.trigger("date-selected",t)},ht=function(e,t){S.trigger("nights-tooltip",e,t,v)},pt=function(e,t){S.trigger("days-tooltip",e,t,v)},dt=function(e,t,n,r,i,o,u){var a=s.convertToDateObject(e),f=s.convertToDateObject(t),l=s.convertToDateObject(n);ft(f),lt(l);var h=null;if(i){h=a.getYearAndMonth()+"-01";var d=s.getDiff(h,t)+1;ht(d,o)}if(u){h=a.getYearAndMonth()+"-01";var v=s.getDiff(h,t);pt(v,o)}var m=c.parseFullDateString(p.language,t);S.trigger("date-shortcut","start",m)},vt=function(e){var t=s.convertToDateObject(e);ct(t);var n=c.parseFullDateString(p.language,e);S.trigger("date-shortcut","end",n)},mt=function(e,t,n){if(e.isInitialized()){var r=s.convertToDateObject(t);if(!r.isEmptyDate){var i=e.get("today_date"),o=e.getLimitDate(),u=e.get("deadline_date"),a=e.get("show_nights_tooltip"),f=e.get("show_days_tooltip"),l=s.getDiff(t,s.convertToDateObject(u).incrementDaysBy(e.get("add_reservation_days")).getFullDateString())-1,c=Math.min(e.get("max_reservation_days"),l);dt(i,t,o,u,a,c,f)}else S.trigger("clear-date-range","start"),S.trigger("clear-limit-date"),S.trigger("clear-nights-tooltip"),S.trigger("clear-days-tooltip"),S.trigger("clear-date-shortcut","start");St(e);if(n.from==="user_interaction"||n.from==="override_model")t!==""&&O([50]),x.trigger("dateSelected","start",t)}},gt=function(e,t,n){if(e.isInitialized()){var r=s.convertToDateObject(t);r.isEmptyDate?(S.trigger("clear-date-range","end"),S.trigger("clear-date-shortcut","end")):vt(t),St(e);if(n.from==="user_interaction"||n.from==="override_model")t!==""&&O([50]),x.trigger("dateSelected","end",t)}},yt=function(e,t,n){var r=e.get("roundtrip"),i=e.get("start_date"),o=e.get("segments"),u=e.get("end_date"),a=e.get("isMobileViewport");S.trigger("clear-range-days-header-mobile"),i!==""||u!==""?S.trigger("enable-clear-desktop",!0):S.trigger("enable-clear-desktop",!1);if(r&&i!==""&&u!==""){e.set("range_complete",!0);var f=s.getDiff(i,u)+1,l=p.showDaysInHeader?v.daysTooltip:v.nightsTooltip;!p.showDaysInHeader&&f>1&&f--;var c=f+" "+(f===1?l.singular:l.plural),h=p.showDaysInHeader?v.dayTrip:v.nightTrip;c=h.replace("{0}",f),a&&S.trigger("show-apply-mobile-datepicker",!0),S.trigger("enable-apply-desktop",!0),S.trigger("set-range-text-header-mobile",c),S.trigger("set-range-text-footer-desktop",c),n.from==="user_interaction"&&!a&&(x.trigger("successfullySelection",a,e),T("apply"))}else!r&&i!==""?(S.trigger("enable-apply-desktop",!0),a?S.trigger("show-apply-mobile-datepicker",!0):n.from==="user_interaction"&&(x.trigger("successfullySelection",a,e),T("apply")),o&&(S.trigger("set-range-text-header-mobile",e.get("segment_max_number")+" Tramos"),S.trigger("update-segment-text",e,v))):(S.trigger("set-range-text-footer-desktop"," "),S.trigger("enable-apply-desktop",!1),e.set("range_complete",!1),S.trigger("show-apply-mobile-datepicker",!1))},bt=function(e){var t=e.get("active_range");G(t),S.trigger("calendar-range",{range:t})},wt=function(e){S.trigger("clear-range-days-header-mobile"),S.trigger("calendar-roundtrip",e.get("roundtrip")),S.trigger("show-info-header-mobile",e.get("show_info_header")),S.trigger("set-range-text-footer-desktop"," "),!e.get("roundtrip")&&!e.get("segments")&&S.trigger("show-info-header-mobile",!1),!e.get("roundtrip")&&!e.get("segments")&&S.trigger("enable-apply-desktop",e.get("start_date")!=="")},Et=function(e){var t=e.get("month_index"),n=e.get("isMobileViewport");S.trigger("show-month",t,n)},St=function(e){var t=e.isRangeComplete(),n=e.getTodayDate().getYearAndMonth()+"-01",r=s.getDiff(n,e.getStartDate().getFullDateString())+1,i=s.getDiff(n,e.getEndDate().getFullDateString());S.trigger("range-complete",t,r,i),S.trigger("enable-apply-desktop",t)},xt=function(e){St(e)},Tt=function(e){var t=e.get("show_additional_days");S.trigger("show-additional-days",t)},Nt=function(){var e=b.get("isMobileViewport");S.trigger("viewport-changed",e),S.trigger("modal-body-class",!1)},Ct=function(e,t){switch(t.validation){case"error":t.from==="user_interaction"&&O([500]);break;case"override_model":e.set(t.attributes,{from:"override_model"});var n=[];e.get("start_date")===""?n.push("start_date"):e.get("end_date")===""&&n.push("end_date"),x.trigger("inconsistentSelection",n)}},kt=function(){S.trigger("decorated-dates-changed",b.get("decorated_dates"))};b.on("change:visible",st),b.on("change:mobile_visible",ot),b.on("change:position",ut),b.on("change:pick_left_position",at),b.on("change:start_date",mt),b.on("change:end_date",gt),b.on("change:start_date change:end_date",yt),b.on("change:active_range",bt),b.on("change:roundtrip",wt),b.on("change:month_index",Et),b.on("change:range_complete",xt),b.on("change:show_additional_days",Tt),b.on("change:isMobileViewport",Nt),b.on("change:decorated_dates",kt),b.on("invalid",Ct);var Lt=function(e,t){var n=b.get("start_date"),r=b.get("end_date"),i=b.get("roundtrip"),o=b.get("min_reservation_days"),u=b.get("max_reservation_days"),a=b.get("anticipation_date"),f=b.get("deadline_date");switch(e){case"start-date":Y(t,r,i,a,f,o,u)&&b.set("start_date",t,{from:"inbound"});break;case"end-date":f=s.convertToDateObject(b.get("deadline_date")).incrementDaysBy(b.get("add_reservation_days")).getFullDateString(),Z(n,t,i,a,f,o,u)&&b.set("end_date",t,{from:"inbound"});break;case"range":b.set("active_range",t,{from:"inbound"});break;case"roundtrip":Z(n,r,t,a,f,o,u),b.set("roundtrip",t,{from:"inbound"}),b.set("active_range","start",{from:"inbound"});break;case"decorated-dates":b.set("decorated_dates",t,{from:"inbound"});break;default:x.trigger("error","prop_not_found",e)}},At=function(e){return b.get(e)},Ot=function(e,t){switch(e){case"date-selected":x.events.dateSelected=t;break;case"successfully-selection":x.events.successfullySelection=t;break;case"closing-confirmation":x.events.closingConfirmation=t;break;case"open":x.events.open=t;break;case"back-button":x.events.backButton=t;break;case"close":x.events.close=t;break;case"apply":x.events.apply=t;break;case"inconsistent-selection":x.events.inconsistentSelection=t;break;case"error":x.events.error=t;break;case"clear-dates":x.events.clearDates=t;break;default:x.trigger("error","event_not_found",e)}},Mt={me:h,show:J,hide:K,set:Lt,get:At,subscribe:Ot,isVisible:Q},_t=new l;return _t.subscribe(Mt),Mt};return h}),define("boxes/packages.module/js/timeHelper",["underscore"],function(e){var t=function(e){return e<=9?"0"+e:e},n=function(e){return e>12?e%12:e},r=function(e){return e>12?"PM":"AM"},i=function(i,s){var o=t(i.hour)+":"+t(i.minutes),u={en_US:n(i.hour)+":"+t(i.minutes)+" "+r(i.hour)};return e.has(u,s)?u[s]:o},s=function(e,t){var n={hour:Math.floor(e/60),minutes:e%60};return i(n,t)};return{convertMinutesTohours:s}}),define("common.module/js/EventTracking/EventTracking",[],function(){var e=function(e){if(e===undefined)throw new Error('El parámetro "boxName" de la clase "EventTracking" es obligatorio');if(typeof e!="string")throw new Error('El parámetro "boxName" de la clase "EventTracking" debe ser del tipo "string"')},t=function(e,t){return function(n,r,i){typeof n=="string"&&typeof r=="string"&&typeof i=="string"&&t.push({event:n,eventCategory:e,eventAction:r,eventLabel:i})}},n=function(){if(window.dataLayer===undefined||typeof window.dataLayer!="object")window.dataLayer=[];var e=window.dataLayer;return e},r=function(e,n){return{track:t(e,n)}},i=function(t){e(t);var i=n();return r(t,i)};return i}),define("common.module/js/changesManager",["common.module/js/EventTracking/EventTracking"],function(e){function f(e,t,n){return this.boxName=e,this.eventCategoryString=t,i=n?n:i,this.propertiesEnabled=i,this}var t,n,r={},i={autocomplete:!0,distriPicker:!0,datePicker:!0,searchType:!0,searchWithDates:!0,advancedOptions:!1,addProduct:!1,initBundle:!1,bundleChange:!1,datePickerSecond:!1,autocompleteTypeSearch:!0},s={autocompleteOrigin:{changeString:"AutocompleteOriginChange",noChangeString:"AutocompleteOriginNChange"},autocompleteDestination:{changeString:"AutocompleteDestinationChange",noChangeString:"AutocompleteDestinationNChange"},autocomplete:{changeString:"AutocompleteChange",noChangeString:"AutocompleteNChange"},distriPicker:{changeString:"DistriPickerChange",noChangeString:"DistriPickerNChange"},datePicker:{changeString:"DatePickerChange",noChangeString:"DatePickerNChange"},searchWithDates:{changeString:"SearchWDTrue",noChangeString:"SearchWDFalse"},advancedOptions:{changeString:"AdvancedOptionsTrue",noChangeString:"AdvancedOptionsFalse"},datePickerSecond:{changeString:"DatePickerSecondChange",noChangeString:"DatePickerSecondNChange"},wCoordinates:{changeString:"WCoordinates",noChangeString:"WNCoordinates"}},o={searchType:"RT",addProduct:"",initBundle:"",bundleChange:"",autocompleteTypeSearch:""},u=function(e,t){return s.hasOwnProperty(e)?t?s[e].changeString:s[e].noChangeString:o[e]},a=function(){var e=Object.keys(i),t=e.filter(function(e){return i[e]}),n={};for(var r=0;r<t.length;++r)n[t[r]]=!1;return n};return f.prototype.init=function(){return r=a(),t=new e(this.eventCategoryString),!1},f.prototype.change=function(e){return r.hasOwnProperty(e)&&(r[e]=!0),!1},f.prototype.setText=function(e,t){return o[e]=t,r[e]=!0,!1},f.prototype.setValue=function(e,t){return r.hasOwnProperty(e)&&(r[e]=t),!1},f.prototype.removeProperty=function(e){e in r&&(r[e]=undefined)},f.prototype.addProperty=function(e){e in s&&(r[e]=!1)},f.prototype.noChange=function(e){return r.hasOwnProperty(e)&&(r[e]=!1),!1},f.prototype.setSearchType=function(e){return o.searchType=e,!1},f.prototype.track=function(){var e="Click_SearchButton_sbox",n=this.generateString();return t.track("user-action",e,n),!1},f.prototype.generateString=function(){var e=[this.boxName];for(var t in r)if(r[t]!==undefined){var i=u(t,r[t]);e.push(i)}return n=e.filter(function(e){return e}).join("|"),n},f.prototype.getString=function(){return this.generateString()},f}),define("common.module/js/DistributionPicker/core/distribution-model",["backbone"],function(e){var t={component:"passengers",adults:-1,minors:-1,passengers_type:"common",ticket_class:-1},n={component:"rooms",rooms:1},r=function(e,t){var n=[],r=0,i=0,s,o,u,a;if(t.errors.indexOf("minors-without-age")!==-1&&e.minorsAgeSelection){var f=0,l=[];for(var c=0;c<e.minors;c++){var h=e["minor_"+c+"_age"];h===-1&&(f++,l.push(c))}f>0&&n.push({error_type:"minors_without_age",data:{invalid_selects:l}})}if(t.errors.indexOf("exceeded-minors-in-arms")!==-1&&e.minorsAgeSelection){u=0,r+=e.adults,i+=e.minors,a=r;for(s=0;s<e.minors;s++)o=e["minor_"+s+"_age"],e.minors_seat_selection?u+=Number(-1<o&&o<2&&e["minor_"+s+"_inArms"]):(typeof o=="number"?u+=Number(-1<o&&o<2):typeof o=="string"&&e["minor_"+s+"_age"]==="M"&&u++,(t.minRangeToCarriedAChildInArms&&o===t.minRangeToCarriedAChildInArms||t.minAgeToCarriedAChildInArms&&o>=t.minAgeToCarriedAChildInArms)&&a++);u>a&&n.push({error_type:"minors_in_arms_exceeded"})}return n},i=function(e,t){var n=[],r,i=0,s=0,o,u,a,f=0;if(t.errors.indexOf("minors-without-age")!==-1){var l=[];for(r=0;r<e.rooms;r++){var c={roomIndex:r,invalid_selects:[]};for(o=0;o<e["room_"+r+"_minors"];o++)e["room_"+r+"_minor_"+o+"_age"]===-1&&c.invalid_selects.push(o);c.invalid_selects.length>0&&l.push(c)}l.length>0&&n.push({error_type:"minors_without_age",data:l})}if(t.errors.indexOf("exceeded-minors-in-arms")!==-1){a=0;for(r=0;r<e.rooms;r++){i+=e["room_"+r+"_adults"],s+=e["room_"+r+"_minors"],f+=i;for(o=0;o<e["room_"+r+"_minors"];o++)u=e["room_"+r+"_minor_"+o+"_age"],a+=Number(-1<u&&u<2),(t.minRangeToCarriedAChildInArms&&u===t.minRangeToCarriedAChildInArms||t.minAgeToCarriedAChildInArms&&u>=t.minAgeToCarriedAChildInArms)&&f++}a>f&&n.push({error_type:"minors_in_arms_exceeded"})}if(t.errors.indexOf("passengers-exceeded")!==-1){i=0,s=0;for(r=0;r<e.rooms;r++)i+=e["room_"+r+"_adults"],s+=e["room_"+r+"_minors"];i+s>8&&n.push({error_type:"passengers_exceeded"})}return n},s=function(e,t,n){var s=[];e.component==="passengers"?s=r(e,n):e.component==="rooms"&&(s=i(e,n));var o=s.length>0;return o?s:!1},o=function(e){var n=t;n.minors_seat_selection=e.minorsSeatSelection,n.adults=e.minAdults,n.minors=e.minMinors,n.passengers_type=e.passengersType;for(var r=0;r<e.maxPassengers-e.minAdults;r++)e.minorsAgeSelection&&(n["minor_"+r+"_age"]=-1,e.minorsSeatSelection&&(n["minor_"+r+"_inArms"]=!0));return n.minorsAgeSelection=e.minorsAgeSelection,n},u=function(e){var t=n;t.minors_seat_selection=e.minorsSeatSelection;for(var r=0;r<e.maxRooms;r++){t["room_"+r+"_adults"]=e.minAdultsPerRoom,t["room_"+r+"_minors"]=0;for(var i=0;i<e.maxPassengersPerRoom-e.minAdultsPerRoom;i++)t["room_"+r+"_minor_"+i+"_age"]=-1,t["room_"+r+"_minor_"+i+"_inArms"]=!1}return t.minorsAgeSelection=e.minorsAgeSelection,t};return function(t){var n={};t.componentType==="passengers"?n=o(t):t.componentType==="rooms"&&(n=u(t));var r=e.Model.extend({defaults:n,validate:function(e){return function(t,n){return s(t,n,e)}}(t)}),i=new r;return i}}),define("common.module/js/DistributionPicker/core/ui-model",["backbone","underscore"],function(e,t){var n=767,r={visible:!1,mobile_visible:!1,isMobileViewport:window.screen.width<n,position:{x:0,y:0},seat_selection:!1},i={component:"passengers"},s={component:"rooms"},o=function(e){var n=i;return n.seat_selection=e.minorsSeatSelection,n.rate_message=e.showRateMessage,t.extend({},r,i)},u=function(e){var n=s;return n.seat_selection=e.minorsSeatSelection,t.extend({},r,s)};return function(t){var r={};t.componentType==="passengers"?r=o(t):t.componentType==="rooms"&&(r=u(t));var i=e.Model.extend({defaults:r,isVisible:function(){var e=this.get("isMobileViewport");return e?this.get("mobile_visible"):this.get("visible")},setVisible:function(){var e=this.get("isMobileViewport");this.set("visible",!e),this.set("mobile_visible",e)},setNotVisible:function(){this.set("mobile_visible",!1),this.set("visible",!1)}}),s=new i;return window.addEventListener("resize",function(){s.set("isMobileViewport",window.screen.width<n)}),s.on("change:isMobileViewport",function(){this.setNotVisible()}),s}}),define("common.module/js/DistributionPicker/core/dom-helper",[],function(){return{cloneNode:function(e){return e.cloneNode(!0)},createTextNode:function(e){return document.createTextNode(e)},createElement:function(e,t){var n=document.createElement(e);return t&&t.forEach(function(e){n.classList.add(e)}),n},getRoomsBaseUi:function(e){var t=e?["_pnlpk-panel__button","_pnlpk-panel__button--exit","sbox-3-icon-arrow-bold-left"]:["_pnlpk-panel__button","_pnlpk-panel__button--exit","sbox-3-icon-close"],n=e?["_pnlpk-apply-button","sbox-3-btn","-primary","_pnlpk-panel__button--link-right","-lg"]:["_pnlpk-apply-button","sbox-3-btn-ghost","_pnlpk-panel__button--link-right","-md"],r=document.createDocumentFragment(),i=this.createElement("div",["_pnlpk-main","_pnlpk-panel","_pnlpk-panel--popup","_pnlpk-panel--mobile"]),s=this.createElement("div",["_pnlpk-panel-scroll"]),o=this.createElement("div",["_pnlpk-panel__header"]),u=this.createElement("div",["_pnlpk-panel__item","_pnlpk-panel__item--flex"]),a=this.createElement("span",["_pnlpk-panel__title"]);u.appendChild(a),o.appendChild(u);var f=this.createElement("a",t);o.appendChild(f),s.appendChild(o);var l=this.createElement("div",["_pnlpk-panel__blocks","_pnlpk-dynamicContent"]);s.appendChild(l);var c=this.createElement("div",["_pnlpk-panel__footer","-medium-down-to-lg"]),h=this.createElement("div",["_pnlpk-panel__item","_pnlpk-panel__item--flex"]),p=this.createElement("a",n),d=this.createElement("a",["_pnlpk-panel__button","_pnlpk-panel__button--link-left","_pnlpk-add-room-button"]);return c.appendChild(this.cloneNode(h).appendChild(p)),c.appendChild(this.cloneNode(h).appendChild(d)),i.appendChild(s),i.appendChild(c),r.appendChild(i),r},setRoomsBaseUiLanguage:function(e,t,n){var r=e.childNodes.item(0),i=this.createTextNode(n.mobileHeaderTitle);r.querySelector("._pnlpk-panel__header ._pnlpk-panel__item span").appendChild(i);var s=this.createTextNode(n.applyButton);r.querySelector("._pnlpk-panel__footer a._pnlpk-apply-button").appendChild(s);var o=this.createTextNode(n.addRoom);return r.querySelector("._pnlpk-panel__footer a._pnlpk-add-room-button").appendChild(o),e},getRoomsDynamicUi:function(e,t,n,r,i){var s=document.createDocumentFragment(),o=this;for(var u=0;u<e;u++){var a=this.createElement("div",u===0?["_pnlpk-itemBlock"]:["_pnlpk-itemBlock","_pnlpk-itemBlock--hidden"]),f=this.createElement("div",["_pnlpk-itemBlock__header","_pnlpk-itemBlock__header--special-padding"]),l=this.createElement("div",["_pnlpk-itemBlock__item","_pnlpk-itemBlock__item--flex"]),c=this.createElement("span",["_pnlpk-header-title"]);l.appendChild(c),f.appendChild(l);if(u!==0){var h=this.createElement("div",["_pnlpk-itemBlock__item"]),p=this.createElement("a",["_pnlpk-itemBlock__button","_pnlpk-header-button"]);h.appendChild(p),f.appendChild(h)}a.appendChild(f);var d=this.createElement("div",["_pnlpk-itemBlock__itemRows"]),v=this.getPassengerLeftLabel("_pnlpk-adults-title","_pnlpk-adults-subtitle"),m=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-stepper-adults","-medium-down-to-lg"]);v.appendChild(m);var g=this.getPassengerLeftLabel("_pnlpk-minors-title","_pnlpk-minors-subtitle"),y=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-stepper-minors","-medium-down-to-lg"]);g.appendChild(y),d.appendChild(v),d.appendChild(g);if(t){var b=this.createElement("div",["_pnlpk-minors-age-select-wrapper","_pnlpk-minors-age-select-wrapper-hide"]);for(var w=0;w<n;w++){var E=this.getPassengerLeftLabel("_pnlpk-minor-age-title","_pnlpk-minor-age-subtitle",!0),S=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-select-minor-age"]);E.appendChild(S),E.classList.add("_pnlpk-minor-age-select"),b.appendChild(E)}d.appendChild(b)}a.appendChild(d);var x=this.createElement("div",["_pnlpk-itemBlock__itemMessages"]),T=o.createTextNode(i.minorsWhitoutAgeError),N=o.getPassengersErrorElement("_pnlpk-minors-without-age");N.querySelector(".message-title").appendChild(T),x.appendChild(N),a.appendChild(x),s.appendChild(a)}var C=this.createTextNode(i.minorsInArmsExceededError),k=this.getPassengersErrorElement("_pnlpk-exceeded-minors-in-arms");return k.querySelector(".message-title").appendChild(C),s.appendChild(k),s},setPassengersBaseUiLanguage:function(e,t,n){var r=e.childNodes.item(0),i=this.createTextNode(n.mobileHeaderTitle);r.querySelector("._pnlpk-panel__header ._pnlpk-panel__item span").appendChild(i);var s=this.createTextNode(n.applyButton);r.querySelector("._pnlpk-panel__footer a").appendChild(s);var o=this.createTextNode(n.minorsWhitoutAgeError);r.querySelector("._pnlpk-minors-without-age .message-title").appendChild(o);var u=this.createTextNode(n.minorsInArmsExceededError);r.querySelector("._pnlpk-exceeded-minors-in-arms .message-title").appendChild(u);var a=this.createTextNode(n.onlyAdultsDisabledWarning);r.querySelector("._pnlpk-warning-only-adults-disabled .message-title").appendChild(a);var f=this.createTextNode(n.onlyAdultsOldWarning);return r.querySelector("._pnlpk-warning-only-adults-old .message-title").appendChild(f),e},getPassengersErrorElement:function(e,t){var n=t?"-warning":"-error",r=t?"sbox-3-icon-warning":"sbox-3-icon-error-circle",i=this.createElement("div",["sbox-3-message",n,e]),s=this.createElement("div",["message-icon-container"]),o=this.createElement("i",["message-icon",r]),u=this.createElement("div",["message-header"]),a=this.createElement("p",["message-title","sbox-3-h5"]);return s.appendChild(o),i.appendChild(s),u.appendChild(a),i.appendChild(u),i},getPassengersBaseUi:function(e){var t=e?["_pnlpk-panel__button","_pnlpk-panel__button--exit","sbox-3-icon-arrow-bold-left"]:["_pnlpk-panel__button","_pnlpk-panel__button--exit","sbox-3-icon-close"],n=e?["_pnlpk-apply-button","sbox-3-btn","-primary","_pnlpk-panel__button--link-right","-lg"]:["_pnlpk-apply-button","sbox-3-btn-ghost","_pnlpk-panel__button--link-right","-md"],r=document.createDocumentFragment(),i=this.createElement("div",["_pnlpk-main","_pnlpk-panel","_pnlpk-panel--popup","_pnlpk-panel--mobile"]),s=this.createElement("div",["_pnlpk-panel-scroll"]),o=this.createElement("div",["_pnlpk-panel__header"]),u=this.createElement("div",["_pnlpk-panel__item","_pnlpk-panel__item--flex"]),a=this.createElement("span",["_pnlpk-panel__title"]);u.appendChild(a),o.appendChild(u);var f=this.createElement("a",t);o.appendChild(f),s.appendChild(o);var l=this.createElement("div",["_pnlpk-panel__blocks"]),c=this.createElement("div",["_pnlpk-itemBlock"]),h=this.createElement("div",["_pnlpk-itemBlock__itemRows","_pnlpk-dynamicContent"]);c.appendChild(h);var p=this.createElement("div",["_pnlpk-itemBlock__itemMessages"]),d=this.getPassengersErrorElement("_pnlpk-minors-without-age"),v=this.getPassengersErrorElement("_pnlpk-exceeded-minors-in-arms"),m=this.getPassengersErrorElement("_pnlpk-warning-only-adults-disabled",!0),g=this.getPassengersErrorElement("_pnlpk-warning-only-adults-old",!0);p.appendChild(d),p.appendChild(v),p.appendChild(m),p.appendChild(g),c.appendChild(p),l.appendChild(c),s.appendChild(l);var y=this.createElement("div",["_pnlpk-panel__footer","-medium-down-to-lg"]),b=this.createElement("a",n);return y.appendChild(b),i.appendChild(s),i.appendChild(y),r.appendChild(i),r},getPassengerLeftLabel:function(e,t,n,r,i){r=!!r;var s=["_pnlpk-itemRow"];i&&s.push(i);var o=this.createElement("div",s),u=this.createElement("div",["_pnlpk-itemRow__item"]),a=this.createElement("div",["_pnlpk-itemRow__title",n?"_pnlpk-itemRow__title--primary-lower":"_pnlpk-itemRow__title--primary"]);r&&a.classList.add("_pnlpk-itemRow__title--vertical-center");var f=this.createElement("label",[e]);a.appendChild(f);var l=this.createElement("div",["_pnlpk-itemRow__title","_pnlpk-itemRow__title--secondary"]),c=this.createElement("label",[t]);return l.appendChild(c),u.appendChild(a),u.appendChild(l),o.appendChild(u),o},getPassengersDynamicUi:function(e,t,n,r,i){var s=document.createDocumentFragment(),o=this.createElement("div"),u=this.getPassengerLeftLabel("_pnlpk-adults-title","_pnlpk-adults-subtitle",!1,!0),a=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-stepper-adults","-medium-down-to-lg"]);u.appendChild(a);var f=this.getPassengerLeftLabel("_pnlpk-minors-title","_pnlpk-minors-subtitle"),l=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-stepper-minors","-medium-down-to-lg"]);f.appendChild(l),r||f.classList.add("_pnlpk-hidden-important"),o.appendChild(u),o.appendChild(f);if(n){var c=this.createElement("div",["_pnlpk-minors-age-select-wrapper"]);for(var h=1;h<=t;h++){var p=this.getPassengerLeftLabel("_pnlpk-minor-age-title","_pnlpk-minor-age-subtitle",!0),d=this.createElement("div",["_pnlpk-itemRow__item","_pnlpk-select-minor-age"]);p.appendChild(d),p.classList.add("_pnlpk-minor-age-select"),c.appendChild(p)}o.appendChild(c)}if(i.flightClassTypeEnabled){var v=this.getPassengerLeftLabel("_pnlpk-flight-class-type-title",!1,!1,!1,"_pnlpk-select-flight-class-type-container"),m=this.createElement("div",["_pnlpk-itemRow_item","_pnlpk-select-flight-class-type","-medium-down-to-lg"]);v.appendChild(m),o.appendChild(v)}return s.appendChild(o),s},setRoomsDynamicUiLanguage:function(e,t,n){var r=e,i=r.querySelectorAll("._pnlpk-header-title"),s;for(s=0;s<i.length;s++)i[s].appendChild(this.createTextNode(n.room));var o=r.querySelectorAll("._pnlpk-header-button");for(s=0;s<o.length;s++)o[s].appendChild(this.createTextNode(n.removeRoom));var u=r.querySelectorAll("._pnlpk-adults-title");for(s=0;s<u.length;s++)u[s].appendChild(this.createTextNode(n.adultsTitle));var a=r.querySelectorAll("._pnlpk-adults-subtitle");for(s=0;s<a.length;s++)a[s].appendChild(this.createTextNode(n.adultsSubTitle_1+(t.maxMinorAge+1)+n.adultsSubTitle_2));var f=r.querySelectorAll("._pnlpk-minors-title");for(s=0;s<f.length;s++)f[s].appendChild(this.createTextNode(n.minorsTitle));var l=r.querySelectorAll("._pnlpk-minors-subtitle");for(s=0;s<l.length;s++)l[s].appendChild(this.createTextNode(n.minorsSubTitle_1+t.maxMinorAge+n.minorsSubTitle_2));var c=r.querySelectorAll("._pnlpk-minor-age-title");for(var h=0;h<c.length;h++){var p=this.createTextNode(n.minorAgeTitle);c[h].appendChild(p)}var d=r.querySelectorAll("._pnlpk-minor-age-subtitle");for(var v=0;v<d.length;v++){var m=this.createTextNode(n.minorAgeSubTitle);d[v].appendChild(m)}return r},setPassengersDynamicUiLanguage:function(e,t,n){var r=e.childNodes.item(0);if(t.minorsSelection){var i=this.createTextNode(n.adultsTitle);r.querySelector("._pnlpk-adults-title").appendChild(i);var s=this.createTextNode(n.adultsSubTitle_1+(t.maxMinorAge+1)+n.adultsSubTitle_2);r.querySelector("._pnlpk-adults-subtitle").appendChild(s)}else{var o=this.createTextNode(n.passengersTitle);r.querySelector("._pnlpk-adults-title").appendChild(o);var u=this.createTextNode(n.passengersSubTitle);r.querySelector("._pnlpk-adults-subtitle").appendChild(u)}var a=this.createTextNode(n.minorsTitle);r.querySelector("._pnlpk-minors-title").appendChild(a);var f=this.createTextNode(n.minorsSubTitle_1+t.maxMinorAge+n.minorsSubTitle_2);r.querySelector("._pnlpk-minors-subtitle").appendChild(f);var l=r.querySelectorAll("._pnlpk-minor-age-title");for(var c=0;c<l.length;c++){var h=this.createTextNode(n.minorAgeTitle);l[c].appendChild(h)}var p=r.querySelectorAll("._pnlpk-minor-age-subtitle");for(var d=0;d<p.length;d++){var v=this.createTextNode(n.minorAgeSubTitle);p[d].appendChild(v)}if(t.flightClassTypeEnabled){var m=this.createTextNode(n.ticketType);r.querySelector("._pnlpk-flight-class-type-title").appendChild(m)}return r},getBaseUi:function(e,t){if(e==="rooms")return this.getRoomsBaseUi(t);if(e==="passengers")return this.getPassengersBaseUi(t)},getDynamicUi:function(e,t){var n=e.minorsAgeSelection;if(e.componentType==="rooms"){var r=e.maxRooms,i=e.maxPassengersPerRoom-e.minAdultsPerRoom,s=e.errors;return this.getRoomsDynamicUi(r,n,i,s,t)}if(e.componentType==="passengers"){var o=e.maxPassengers-e.minMinors,u=e.maxPassengers-e.minAdults,a=e.minorsSelection;return this.getPassengersDynamicUi(o,u,n,a,e)}},setBaseUiLanguage:function(e,t,n){if(t==="rooms")return this.setRoomsBaseUiLanguage(e,t,n);if(t==="passengers")return this.setPassengersBaseUiLanguage(e,t,n)},setDynamicUiLanguage:function(e,t,n){if(t.componentType==="rooms")return this.setRoomsDynamicUiLanguage(e,t,n);if(t.componentType==="passengers")return this.setPassengersDynamicUiLanguage(e,t,n)}}}),define("common.module/js/DistributionPicker/core/events-helper",["backbone","underscore","jquery"],function(e,t,n){var r=20,i=function(e,t,i){var s={},o=i.componentType;return o==="passengers"?(s={mainWrapper:t.find("._pnlpk-main"),mainWrapperScroll:t.find("._pnlpk-panel-scroll"),ageSelectMinorsWrapper:t.find("._pnlpk-minors-age-select-wrapper"),ageSelectMinors:t.find("._pnlpk-minor-age-select")},e.on("set-minors-age-select-last-item",function(e){s.ageSelectMinors.removeClass("_pnlpk-minor-age-select-last-item"),e.minorSelectsToShow===0?s.ageSelectMinorsWrapper.addClass("_pnlpk-minors-age-select-wrapper-hide"):s.ageSelectMinorsWrapper.removeClass("_pnlpk-minors-age-select-wrapper-hide"),s.ageSelectMinors.eq(e.minorSelectsToShow-1).addClass("_pnlpk-minor-age-select-last-item")}).on("show-mobile-error-minors-without-age",function(e){s.mainWrapper.addClass("_pnlpk-show-error-minors-without-age");var t=s.ageSelectMinorsWrapper.find(".sbox-3-select");t.removeClass("-invalid"),e.forEach(function(e){t.eq(e).addClass("-invalid")})}).on("hide-mobile-error-minors-without-age",function(){s.mainWrapper.removeClass("_pnlpk-show-error-minors-without-age"),s.ageSelectMinorsWrapper.find(".sbox-3-select").removeClass("-invalid")}).on("show-mobile-error-minors-in-arms-exceeded",function(){s.mainWrapper.find("._pnlpk-exceeded-minors-in-arms").addClass("_pnlpk-message--display")}).on("hide-mobile-error-minors-in-arms-exceeded",function(){s.mainWrapper.find("._pnlpk-exceeded-minors-in-arms").removeClass("_pnlpk-message--display")}).on("show-warning-only-adults-disabled",function(){s.mainWrapper.find("._pnlpk-warning-only-adults-disabled").addClass("_pnlpk-message--display")}).on("hide-warning-only-adults-disabled",function(){s.mainWrapper.find("._pnlpk-warning-only-adults-disabled").removeClass("_pnlpk-message--display")}).on("show-warning-only-adults-old",function(){s.mainWrapper.find("._pnlpk-warning-only-adults-old").addClass("_pnlpk-message--display")}).on("hide-warning-only-adults-old",function(){s.mainWrapper.find("._pnlpk-warning-only-adults-old").removeClass("_pnlpk-message--display")}).on("open-distribution-picker",function(){s.mainWrapper.addClass("_pnlpk-panel--show")}).on("close-distribution-picker",function(){s.mainWrapper.removeClass("_pnlpk-panel--show")}).on("container-to-right",function(){s.mainWrapper.addClass("-to-right")}).on("container-to-left",function(){s.mainWrapper.removeClass("-to-right")}).on("open-mobile-distribution-picker",function(){s.mainWrapper.addClass("_pnlpk-panel--show"),document.querySelector("body").classList.add("panel-mobile-opened")}).on("close-mobile-distribution-picker",function(){s.mainWrapper.removeClass("_pnlpk-panel--show"),document.querySelector("body").classList.remove("panel-mobile-opened")}).on("move-distribution-picker",function(e){var t=e.position.y-n(window).scrollTop();s.mainWrapper.css({left:e.position.x,top:e.position.y}),n(window).width()>=768&&i.distriInnerScroll&&s.mainWrapper.find("._pnlpk-panel__blocks").css("max-height","calc(100vh - "+(t+100)+"px)").addClass("-overflowY")}).on("seat-selection-disabled",function(e){e?s.mainWrapper.addClass("_pnlpk-seat-selection-disabled"):s.mainWrapper.removeClass("_pnlpk-seat-selection-disabled")}).on("show-rate-message",function(e){e?s.mainWrapper.removeClass("_pnlpk-hide-rate-messages"):s.mainWrapper.addClass("_pnlpk-hide-rate-messages")}).on("scroll-first-error",function(){var e=s.mainWrapper.find("._pnlpk-itemBlock__itemMessages").first(),t=s.mainWrapperScroll;n(window).width()>=768&&i.distriInnerScroll&&(t=s.mainWrapperScroll.find("._pnlpk-panel__blocks")),t.animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()-r})}).on("change-error-message",function(e){s.mainWrapper.find("._pnlpk-"+e.error+" ._pnlpk-message__item span").text(e.message)})):o==="rooms"&&(s={mainWrapper:t.find("._pnlpk-main"),mainWrapperScroll:t.find("._pnlpk-panel-scroll"),ageSelectMinorsWrappers:t.find("._pnlpk-minors-age-select-wrapper"),ageSelectMinors:t.find("._pnlpk-minor-age-select"),addRoomButton:t.find("._pnlpk-add-room-button")},e.on("scroll-first-error",function(){var e=s.mainWrapper.find("._pnlpk-message--display").first(),t=s.mainWrapperScroll;n(window).width()>=768&&i.distriInnerScroll&&(t=s.mainWrapperScroll.find("._pnlpk-panel__blocks")),t.animate({scrollTop:e.offset().top-t.offset().top+t.scrollTop()-r})}).on("scroll-to-bottom",function(){var e=s.mainWrapperScroll;n(window).width()>=768&&i.distriInnerScroll&&(e=s.mainWrapperScroll.find("._pnlpk-panel__blocks")),e.animate({scrollTop:e.outerHeight()},400)}).on("set-minors-age-select-last-item",function(e){var t=n(s.ageSelectMinorsWrappers[e.roomIndex]),r=t.find("._pnlpk-minor-age-select");r.removeClass("_pnlpk-minor-age-select-last-item"),e.minorSelectsToShow===0?t.addClass("_pnlpk-minors-age-select-wrapper-hide"):t.removeClass("_pnlpk-minors-age-select-wrapper-hide"),r.eq(e.minorSelectsToShow-1).addClass("_pnlpk-minor-age-select-last-item")}).on("show-mobile-error-minors-without-age",function(e){e.forEach(function(e){var t=n("._pnlpk-itemBlock",s.mainWrapper).eq(e.roomIndex);t.find("._pnlpk-minors-without-age").addClass("_pnlpk-message--display");var r=t.find(".sbox-3-select");e.invalid_selects.forEach(function(e){r.eq(e).addClass("-invalid")})})}).on("show-mobile-error-minors-in-arms-exceeded",function(){s.mainWrapper.find("._pnlpk-exceeded-minors-in-arms").addClass("_pnlpk-message--display")}).on("hide-mobile-error-minors-in-arms-exceeded",function(){s.mainWrapper.find("._pnlpk-exceeded-minors-in-arms").removeClass("_pnlpk-message--display")}).on("show-mobile-error-passengers-exceeded",function(){s.mainWrapper.addClass("_pnlpk-show-error-passengers-exceeded")}).on("hide-mobile-error-passengers-exceeded",function(){s.mainWrapper.removeClass("_pnlpk-show-error-passengers-exceeded")}).on("show-room",function(e,t){var n=s.mainWrapper.find("._pnlpk-itemBlock").eq(e),r=s.mainWrapper.find("._pnlpk-itemBlock").eq(t);r.removeClass("_pnlpk-itemBlock--hidden"),n.find("._pnlpk-header-button").addClass("_pnlpk-itemBlock__button--hidden")}).on("hide-room",function(e,t){var n=s.mainWrapper.find("._pnlpk-itemBlock").eq(e),r=s.mainWrapper.find("._pnlpk-itemBlock").eq(t);r.addClass("_pnlpk-itemBlock--hidden"),n.find("._pnlpk-header-button").removeClass("_pnlpk-itemBlock__button--hidden")}).on("hide-mobile-error-minors-without-age",function(){s.mainWrapper.find("._pnlpk-minors-without-age").removeClass("_pnlpk-message--display"),s.mainWrapper.find(".sbox-3-select").removeClass("-invalid")}).on("container-to-right",function(){s.mainWrapper.addClass("-to-right")}).on("container-to-left",function(){s.mainWrapper.removeClass("-to-right")}).on("open-distribution-picker",function(){s.mainWrapper.addClass("_pnlpk-panel--show")}).on("close-distribution-picker",function(){s.mainWrapper.removeClass("_pnlpk-panel--show")}).on("open-mobile-distribution-picker",function(){s.mainWrapper.addClass("_pnlpk-panel--show"),document.querySelector("body").classList.add("panel-mobile-opened")}).on("close-mobile-distribution-picker",function(){s.mainWrapper.removeClass("_pnlpk-panel--show"),document.querySelector("body").classList.remove("panel-mobile-opened")}).on("move-distribution-picker",function(e){s.mainWrapper.css({left:e.position.x,top:e.position.y});var t=e.position.y-n(window).scrollTop();n(window).width()>=768&&i.distriInnerScroll&&s.mainWrapper.find("._pnlpk-panel__blocks").css("max-height","calc(100vh - "+(t+100)+"px)").addClass("-overflowY")}).on("seat-selection-disabled",function(e){e?s.mainWrapper.classList.add("_pnlpk-seat-selection-disabled"):s.mainWrapper.classList.remove("_pnlpk-seat-selection-disabled")}).on("add-room-button-enabled",function(e){e?s.addRoomButton.removeClass("_pnlpk-panel__button-hide"):s.addRoomButton.addClass("_pnlpk-panel__button-hide")})),e};return{bind:function(n,r){var s=t.extend({context:n},e.Events),o=i(s,n,r);return o}}}),define("common.module/js/DistributionPicker/core/bridge-helper",[],function(){var e=function(){var e=[];return{createBridge:function(t,n){e[t]=n},getBridge:function(t){return e[t]}}};return e}),define("common.module/js/DistributionPicker/components/NumberPicker/helpers/i18n-helper",[],function(){var e={es:{"default":{tooltipText:"Solo puedes hacer búsquedas de hasta 8 personas"},uy:{tooltipText:"Solo podés hacer búsquedas de hasta 8 personas"},ar:{tooltipText:"Solo podés hacer búsquedas de hasta 8 personas"}},pt:{"default":{tooltipText:"Você só pode fazer buscas para até 8 pessoas"}},en:{"default":{tooltipText:"You can only do searches for up to 8 people"}}},t=function(t,n,r){t=t.toLowerCase()||"",n=n.toLowerCase()||"";var i=e[t][n]||e[t]["default"]||{};return i[r]||""};return{getText:t,get:e}}),define("common.module/js/DistributionPicker/components/NumberPicker/helpers/dom",["./i18n-helper"],function(e){var t=function(e,t){return e+"-"+t},n=function(e,t){e.value=t},r=function(e,t){t.classList.add("-disable")},i=function(e,t){t.classList.remove("-disable")},s=function(n){var r=document.createDocumentFragment(),i=document.createElement("div");i.classList.add("number-picker"),i.classList.add("sbox-3-steppers"),i.classList.add("-md");var s=document.createElement("input");s.classList.add("steppers-tag"),s.setAttribute("readonly","readonly"),s.setAttribute("tabindex","-1"),s.setAttribute("value",n.value);var o=document.createElement("a");o.classList.add("steppers-icon-left"),o.classList.add("sbox-3-icon-minus");var u=document.createElement("a");u.classList.add("steppers-icon-right"),u.classList.add("sbox-3-icon-plus");var a=document.createElement("div");a.classList.add(t(n.prefix,"tooltip-wrapper"));var f=document.createElement("div");f.classList.add(t(n.prefix,"tooltip"));var l=document.createElement("span");return l.innerHTML=e.getText(n.language,n.locale,"tooltipText"),a.appendChild(f).appendChild(l),i.appendChild(a),i.appendChild(s),i.appendChild(o),i.appendChild(u),r.appendChild(i),{domBaseUI:r,domButtonLeft:o,domButtonRight:u,domInput:s,domRoot:i,domTooltip:f}},o=function(e){var t=s(e),o=function(){return t.domBaseUI},u=function(){return t.domTooltip},a=function(){return t.domButtonLeft},f=function(){return t.domButtonRight},l=function(){return t.domInput},c=function(){return t.domRoot},h=function(){r(e.prefix,t.domButtonLeft)},p=function(){r(e.prefix,t.domButtonRight)},d=function(){i(e.prefix,t.domButtonLeft)},v=function(){i(e.prefix,t.domButtonRight)},m=function(e){n(t.domInput,e)};return{getBaseUI:o,getDomInput:l,getDomButtonMinus:a,getDomButtonPlus:f,setButtonMinusDisabled:h,setButtonPlusDisabled:p,setButtonMinusEnabled:d,setButtonPlusEnabled:v,setInputValue:m,getDomRoot:c,getDomTooltip:u}};return o}),define("common.module/js/DistributionPicker/components/NumberPicker/helpers/validator",[],function(){var e=function(e){return typeof e.lowerBound!="number"||typeof e.upperCase!="number"||typeof e.context!="object"?!1:!0};return{validate:e}}),define("common.module/js/DistributionPicker/components/NumberPicker/main",["./helpers/dom","./helpers/validator","common.module/js/deepExtend"],function(e,t,n){var r=function(e){e.target.blur()},i=function(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},s=function(e,t,n){e.addEventListener(t,function(e){n(e.detail)},!1)},o=function(o){t.validate(o);var u=n({value:o.lowerBound,step:1,tooltipShow:!1,prefix:"_pnlpk",language:"es",locale:"es"},o),a=function(){u.value-u.step<u.lowerBound?(x.setButtonMinusDisabled(),i(x.getBaseUI(),"lowerBoundReached",u)):x.setButtonMinusEnabled(),u.value+u.step>u.upperBound?(x.setButtonPlusDisabled(),i(x.getBaseUI(),"upperBoundReached",u)):x.setButtonPlusEnabled()},f=function(e){u.value!==e&&(u.value=e,i(x.getBaseUI(),"change",u),x.setInputValue(u.value)),a()},l=function(e){u.tooltipShow=e||!1},c=function(e){u.lowerBound<=e&&e<=u.upperBound?f(e):e<u.lowerBound?f(u.lowerBound):e>u.upperBound&&f(u.upperBound)},h=function(e){u.lowerBound=e,u.value<u.lowerBound&&c(u.lowerBound),a()},p=function(e){u.upperBound=e,u.value>u.upperBound&&c(u.upperBound),a()},d=function(){return u.value},v=function(){return u.lowerBound},m=function(){return u.upperBound},g=function(){c(u.value+u.step)},y,b=function(e){if(u.tooltipShow){var t=e.target.parentElement.querySelectorAll(".steppers-icon-right")[0];t=t?t.classList:!1;if(t&&t.contains("-disable")){var n=2e3,r=x.getDomTooltip();r.classList.add("show"),i(x.getBaseUI(),"tooltipMaxShowed",u),clearTimeout(y),y=setTimeout(function(){r.classList.remove("show")},n)}}},w=function(){c(u.value-u.step)},E=function(){x.setButtonMinusDisabled(),x.setButtonPlusDisabled()},S=function(){x.setButtonMinusEnabled(),x.setButtonPlusEnabled()},x=new e(u);return u.context.appendChild(x.getBaseUI()),a(),x.getDomInput().addEventListener("focus",r),x.getDomButtonMinus().addEventListener("click",w),x.getDomButtonPlus().addEventListener("click",g),u.tooltipShow&&x.getDomRoot().addEventListener("click",b),{setValue:c,setLowerBound:h,setUpperBound:p,getValue:d,getLowerBound:v,getUpperBound:m,disabledPicker:E,enabledPicker:S,plus:g,minus:w,setTooltipShow:l,on:function(e,t){s(x.getBaseUI(),e,t)}}};return o}),define("common.module/js/DistributionPicker/components/AgePicker/helpers/dom",[],function(){var e=function(e,t){return e+"-"+t},t=function(e,t,n){var r=document.createElement("div");r.classList.add("select-container");var i=document.createElement("select");return i.classList.add("select-tag"),t.forEach(function(e,r){var s=document.createElement("option");s.classList.add("select-option"),s.setAttribute("value",t[r].value),e.value===-1&&s.setAttribute("disabled","disabled"),r===n&&s.setAttribute("selected","selected");var o=document.createTextNode(t[r].description);s.appendChild(o),i.appendChild(s)}),r.appendChild(i),{component:r,select:i}},n=function(t,n,r,i){var s=document.createElement("label");s.classList.add(e(t,"radioButton"));var o=document.createElement("input");o.setAttribute("name",r),o.setAttribute("type","radio"),o.setAttribute("value",i),o.classList.add(e(t,"radioButton__radio"));var u=document.createElement("span");u.classList.add(e(t,"radioButton__circle"));var a=document.createTextNode(n);return s.appendChild(o),s.appendChild(u),s.appendChild(a),{component:s,bullet:o}},r=function(t){var n=document.createElement("span");return n.classList.add(e(t,"agePicker__description")),n},i=function(e){var i=document.createDocumentFragment(),s=document.createElement("div");s.classList.add("sbox-3-select","-md");var o=t(e.prefix,e.items,e.selectedItemIndex),u=n(e.prefix,e.messages.inArms,e.name,"inArms"),a=n(e.prefix,e.messages.inChair,e.name,"inChair"),f=r(e.prefix,e.messages);return e.items[e.selectedItemIndex].inArms?u.bullet.checked=!0:a.bullet.checked=!0,s.appendChild(o.component),i.appendChild(s),i.appendChild(f),{domBaseUI:i,domSelectAge:o.select,domBulletInArms:u.bullet,domBulletInChair:a.bullet,domDescription:f}},s=function(e){var t=i(e),n=function(){return t.domBaseUI},r=function(){return t.domSelectAge},s=function(){return t.domBulletInArms},o=function(){return t.domBulletInChair},u=function(){t.domBulletInArms.checked=!0},a=function(){t.domBulletInChair.checked=!0},f=function(e){t.domDescription.textContent=e};return{getBaseUI:n,getDomSelectAge:r,getDomBulletInArms:s,getDomBulletInChair:o,setDomBulletInArms:u,setDomBulletInChair:a,setDomDescription:f}};return s}),define("common.module/js/DistributionPicker/components/AgePicker/helpers/validator",function(){}),define("common.module/js/DistributionPicker/components/AgePicker/main",["./helpers/dom","./helpers/validator","common.module/js/deepExtend"],function(e,t,n){var r=function(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},i=function(e,t,n){e.addEventListener(t,function(e){n(e.detail)},!1)},s=function(t){var s=n({selectedItemIndex:0,prefix:"_pnlpk"},t);s.items=s.items.map(function(e){return e.inArms=e.inArms||!1,e});var o=s.items[s.selectedItemIndex],u=function(e,t){o=s.items[e],o.inArms=t!==undefined?t:o.inArms,s.selectedItemIndex=e,o.inArms?c.setDomBulletInArms():c.setDomBulletInChair(),c.getDomSelectAge().value=o.value,r(c.getBaseUI(),"change",s)},a=function(e){e.target.value==="inArms"?o.inArms=!0:o.inArms=!1,r(c.getBaseUI(),"change",s)},f=function(e,t){var n=0;while(n<s.items.length-1&&s.items[n].value!==e)n++;u(n,t)},l=function(){return o},c=new e(s);return s.context.appendChild(c.getBaseUI()),c.getDomSelectAge().addEventListener("change",function(e){u(e.target.selectedIndex)}),c.getDomBulletInArms().addEventListener("change",a),c.getDomBulletInChair().addEventListener("change",a),{setStatus:f,getStatus:l,on:function(e,t){i(c.getBaseUI(),e,t)}}};return s}),define("common.module/js/DistributionPicker/components/FlightClassTypePicker/helpers/dom",[],function(){var e=function(e,t){return e+"-"+t},t=function(e,t,n){var r=document.createElement("div");r.classList.add("select-container");var i=document.createElement("select");return i.classList.add("select-tag"),t.forEach(function(e,r){var s=document.createElement("option");s.classList.add("select-option"),s.setAttribute("value",t[r].value),e.value===-1&&s.setAttribute("disabled","disabled"),r===n&&s.setAttribute("selected","selected");var o=document.createTextNode(t[r].description);s.appendChild(o),i.appendChild(s)}),r.appendChild(i),{component:r,select:i}},n=function(t){var n=document.createElement("span");return n.classList.add(e(t,"flightClassTypePicker__description")),n},r=function(e){var r=document.createDocumentFragment(),i=document.createElement("div");i.classList.add("sbox-3-select","-md");var s=t(e.prefix,e.items,e.selectedItemIndex),o=n(e.prefix,e.messages);return i.appendChild(s.component),r.appendChild(i),r.appendChild(o),{domBaseUI:r,domSelectClassType:s.select,domDescription:o}},i=function(e){var t=r(e),n=function(){return t.domBaseUI},i=function(){return t.domSelectClassType},s=function(e){t.domDescription.textContent=e};return{getBaseUI:n,getDomSelectClassType:i,setDomDescription:s}};return i}),define("common.module/js/DistributionPicker/components/FlightClassTypePicker/helpers/validator",function(){}),define("common.module/js/DistributionPicker/components/FlightClassTypePicker/helpers/i18n",[],function(){var e={es:{person:"persona",people:"personas",ticketTypeTourist:"Económica",ticketTypeBusiness:"Ejecutiva/Business",ticketTypePremiumEconomy:"Premium economy",ticketTypeFirstClass:"Primera clase",businessOnly:"Sólo business"},pt:{person:"pessoa",people:"pessoas",ticketTypeTourist:"Econômica",ticketTypeBusiness:"Executiva/Business",ticketTypePremiumEconomy:"Premium economy",ticketTypeFirstClass:"Primeira classe",businessOnly:"Executiva/Business"},en:{person:"person",people:"people",ticketTypeTourist:"Economy",ticketTypeBusiness:"Executive/Business",ticketTypePremiumEconomy:"Premium economy",ticketTypeFirstClass:"First class",businessOnly:"Business Class"}},t=function(e,t,r){var i=n(e,t);return i[r]||""},n=function(t,n){return t=t||"es-AR",n=n||"es",n=n.toLowerCase()||"",t=t.toLowerCase()||"",e[n][t]||e[n]||{}};return{getTexts:n,getText:t,get:e}}),define("common.module/js/DistributionPicker/components/FlightClassTypePicker/main",["./helpers/dom","./helpers/validator","./helpers/i18n","common.module/js/deepExtend"],function(e,t,n,r){var i=function(e,t,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)},s=function(e,t,n){e.addEventListener(t,function(e){n(e.detail)},!1)},o=function(t){var o=n.getTexts(t.locale,t.language),u=r({selectedItemIndex:0,prefix:"_pnlpk",items:[{value:"YC",description:o.ticketTypeTourist},{value:"PE",description:o.ticketTypePremiumEconomy},{value:"C",description:o.ticketTypeBusiness},{value:"F",description:o.ticketTypeFirstClass}]},t),a=u.items[u.selectedItemIndex],f=function(e,t){a=u.items[e],u.selectedItemIndex=e,h.getDomSelectClassType().value=a.value,t&&t.from!=="inbound"&&i(h.getBaseUI(),"change",a.value)},l=function(e,t){var n=0;while(n<u.items.length-1&&u.items[n].value!==e)n++;f(n,t)},c=function(){return a},h=new e(u),p=h.getBaseUI();return u.context[0].appendChild(p),h.getDomSelectClassType().addEventListener("change",function(e){f(e.target.selectedIndex,{from:"user_interaction"})}),{setStatus:l,getStatus:c,on:function(e,t){s(h.getBaseUI(),e,t)}}};return o}),define("common.module/js/DistributionPicker/core/i18n-helper",[],function(){return{es:{rooms:{mobileHeaderTitle:"Habitaciones",applyButton:"Aplicar",addRoom:"Añadir habitación",removeRoom:"Eliminar",room:"Habitación",adultsTitle:"Adultos",adultsSubTitle_1:"Desde ",adultsSubTitle_2:" años",minorsTitle:"Menores",minorsSubTitle_1:"Hasta ",minorsSubTitle_2:" años",minorAgeTitle:"Edad del menor",minorAgeSubTitle:"Al finalizar el viaje",inArms:"En brazos",inSeat:"En asiento",years:"años",year:"año",to:"Hasta",age:"Edad",minorsWhitoutAgeError:"Ingresa la edad del menor",minorsInArmsExceededError:"No puedes ingresar más bebés que adultos",passengersExceededError:"Selecciona hasta 8 pasajeros"},passengers:{mobileHeaderTitle:"Pasajeros",applyButton:"Aplicar",adultsTitle:"Adultos",adultsSubTitle_1:"Desde ",adultsSubTitle_2:" años",minorsTitle:"Menores",minorsSubTitle_1:"Hasta ",minorsSubTitle_2:" años",minorAgeTitle:"Edad del menor",minorAgeSubTitle:"Al finalizar el viaje",inArms:"En brazos",inSeat:"En asiento",babyRate:"Tarifa bebé",minorRate:"Tarifa niño",adultRate:"Tarifa adulto",years:"años",year:"año",to:"Hasta",age:"Edad",minorsWhitoutAgeError:"Ingresa la edad del menor",minorsInArmsExceededError:"No puedes ingresar más bebés que adultos",passengersTitle:"Pasajeros",passengersSubTitle:"",from0To24Months:"0 a 24 meses",from2To11Years:"2 a 11 años",from12years:"12 años o más",onlyAdultsOldWarning:"Sólo puedes ingresar personas mayores de 65 años",onlyAdultsDisabledWarning:"Sólo puedes ingresar personas con discapacidad",ticketType:"Clase"}},pt:{rooms:{mobileHeaderTitle:"Quartos",applyButton:"Aplicar",addRoom:"Adicionar quarto",removeRoom:"Eliminar",room:"Quarto",adultsTitle:"Adultos",adultsSubTitle_1:"A partir de ",adultsSubTitle_2:" anos",minorsTitle:"Menor",minorsSubTitle_1:"Até ",minorsSubTitle_2:" anos",minorAgeTitle:"Idade do menor",minorAgeSubTitle:"Ao finalizar a viagem",inArms:"No colo",inSeat:"No assento",years:"anos",year:"ano",to:"Até",age:"Idade",minorsWhitoutAgeError:"Insira a idade do menor de idade",minorsInArmsExceededError:"Cada adulto só pode viajar com um bebê",passengersExceededError:"Selecione até 8 passageiros"},passengers:{mobileHeaderTitle:"Passageiros",applyButton:"Aplicar",adultsTitle:"Adultos",adultsSubTitle_1:"A partir de ",adultsSubTitle_2:" anos",minorsTitle:"Menores",minorsSubTitle_1:"Até ",minorsSubTitle_2:" anos",minorAgeTitle:"Idade do menor",minorAgeSubTitle:"Ao finalizar a viagem",inArms:"No colo",inSeat:"No assento",babyRate:"Tarifa bebê",minorRate:"Tarifa criança",adultRate:"Tarifa adulto",years:"anos",year:"ano",to:"Até",age:"Idade",minorsWhitoutAgeError:"Insira a idade do menor de idade",minorsInArmsExceededError:"Cada adulto só pode viajar com um bebê",passengersTitle:"Passageiros",passengersSubTitle:"",from0To24Months:"0 a 24 meses",from2To11Years:"2 a 11 anos",from12years:"12 anos ou mais",onlyAdultsOldWarning:"Sólo puedes ingresar personas mayores de 65 años",onlyAdultsDisabledWarning:"Sólo puedes ingresar personas con discapacidad",ticketType:"Classe"}},en:{rooms:{mobileHeaderTitle:"Rooms",applyButton:"Apply",addRoom:"Add a room",removeRoom:"Delete",room:"Room",adultsTitle:"Adults",adultsSubTitle_1:"From ",adultsSubTitle_2:" years old",minorsTitle:"Minors",minorsSubTitle_1:"Untill ",minorsSubTitle_2:" years old",minorAgeTitle:"Age of minors",minorAgeSubTitle:"At the end of the trip",inArms:"Carried on lap",inSeat:"On a seat",years:"years",year:"year",to:"Until",age:"Age",minorsWhitoutAgeError:"Please, select the age of the minor",minorsInArmsExceededError:"You can't enter more infants than adults",passengersExceededError:"Select up to 8 passengers"},passengers:{mobileHeaderTitle:"passangers",applyButton:"Apply",adultsTitle:"Adults",adultsSubTitle_1:"From ",adultsSubTitle_2:" years old",minorsTitle:"Minors",minorsSubTitle_1:"Untill ",minorsSubTitle_2:" years old",minorAgeTitle:"Age of minor",minorAgeSubTitle:"At the end of the trip",inArms:"Carried on lap",inSeat:"On a seat",babyRate:"Infant fare",minorRate:"Child fare",adultRate:"Adult fare",years:"years",year:"year",to:"Until",age:"Age",minorsWhitoutAgeError:"Please, select the age of the minor",minorsInArmsExceededError:"You can't enter more infants than adults",passengersTitle:"Passengers",passengersSubTitle:"",from0To24Months:"0 to 24 months",from2To11Years:"2 to 11 years",from12years:"12 years or more",onlyAdultsOldWarning:"Sólo puedes ingresar personas mayores de 65 años",onlyAdultsDisabledWarning:"Sólo puedes ingresar personas con discapacidad",ticketType:"Class"}}}}),define("common.module/js/DistributionPicker/main",["jquery","./core/distribution-model","./core/ui-model","./core/dom-helper","./core/events-helper","./core/bridge-helper","common.module/js/DistributionPicker/components/NumberPicker/main","common.module/js/DistributionPicker/components/AgePicker/main","common.module/js/DistributionPicker/components/FlightClassTypePicker/main","./core/i18n-helper","common.module/js/modalManager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=0,h=1,p=2,d=11,v=12,m=function(m,g,y){g.minAgeToCarriedAChildInArms=g.minAgeToCarriedAChildInArms||null,g.minRangeToCarriedAChildInArms=g.minRangeToCarriedAChildInArms||null,g.maxMinorAge=g.maxMinorAge||17,g.maxPassengers=g.maxPassengers||99,g.defaultAdultsPerRoom=parseInt(g.defaultAdultsPerRoom)||1,g.defaultMinorsPerRoom=parseInt(g.defaultMinorsPerRoom)||0,g.minorsAgeSelectionType=g.minorsAgeSelectionType||"age",g.locale=g.locale||"",g.locale=g.locale.toLowerCase(),g.errors=g.errors||[],g.tooltipShow=g.tooltipShow||!1,g.passengersType=g.passengersType||"common",g.abModalsOptimizationEnabled=!0,g.flightClassTypeEnabled=g.flightClassTypeEnabled||!1,g.distriInnerScroll=g.distriInnerScroll||!1;var b=t(g),w=n(g),E={},S=e(m);S.addClass("sbox-v4-components");var x=e.extend(f[g.language][g.componentType],y),T=new s,N=r.cloneNode(r.getBaseUi(g.componentType,g.abModalsOptimizationEnabled)),C=r.setBaseUiLanguage(N,g.componentType,x),k=r.cloneNode(r.getDynamicUi(g,x)),L=r.setDynamicUiLanguage(k,g,x),A=C.childNodes.item(0).querySelector("._pnlpk-dynamicContent"),O={events:{},trigger:function(e){var t=[].slice.call(arguments).slice(1);if(this.events[e]!==undefined)return this.events[e].apply(Pt,t)}},M={adults:[],minors:[]},_=function(){var e=[],t=g.maxMinorAge;e.push({value:-1,description:x.age,inArms:!1}),e.push({value:0,description:x.to+" 1 "+x.year,inArms:!0});for(var n=1;n<=t;n++){var r=n+" "+x.years;n===1&&(r=n+" "+x.year),e.push({value:n,description:r,inArms:n===1})}return e},D=function(){var e=[];return e.push({value:-1,description:x.age}),e.push({value:"M",description:x.from0To24Months+" ("+x.inArms.toLowerCase()+")"}),e.push({value:"C",description:x.from2To11Years}),e.push({value:"A",description:x.from12years}),e},P=function(e){var t="";if(g.minorsAgeSelectionType==="age")c<=e.value&&e.value<=h&&(e.inArms?t=x.babyRate:t=x.minorRate),p<=e.value&&e.value<=d&&(t=x.minorRate),v<=e.value&&(t=x.adultRate);else if(g.minorsAgeSelectionType==="range")switch(e.value){case"M":t=x.babyRate;break;case"I":t=x.minorRate;break;case"C":t=x.minorRate;break;case"A":t=x.adultRate}return t},H=function(e,t){e.on("tooltipMaxShowed",function(){O.trigger("tooltipMaxShowed",t)})},B=function(e,t){var n=t.querySelector("._pnlpk-stepper-adults"),r=t.querySelector("._pnlpk-stepper-minors"),i=t.querySelectorAll("._pnlpk-select-minor-age"),s;if(g.flightClassTypeEnabled){var f=t.querySelectorAll("._pnlpk-select-flight-class-type");s=new a({selectedItemIndex:0,context:f,showDescriptionMessage:g.showRateMessage,language:g.language,locale:g.locale}),s.on("change",function(e){b.set("ticket_class",e,{from:"user_interaction"}),O.trigger("userSelection",{ticket_class:e},b)}),b.on("change:ticket_class",function(e,t,n){n.from==="inbound"&&s.setStatus(t,n)})}var l=new o({lowerBound:g.minAdults,upperBound:g.maxPassengers-g.minMinors,value:g.minAdults,tooltipShow:g.tooltipShow,step:1,context:n,language:g.language,locale:g.locale}),c=new o({lowerBound:g.minMinors,upperBound:g.maxPassengers-g.minAdults,value:g.minMinors,tooltipShow:g.tooltipShow,step:1,context:r,language:g.language,locale:g.locale});H(l,"adults"),H(c,"minors");if(g.minorsAgeSelection){var h=g.minorsAgeSelectionType==="age"?_():g.minorsAgeSelectionType==="range"?D():_(),p={inArms:x.inArms,inChair:x.inSeat};for(var d=0;d<i.length;d++){var v=new u({selectedItemIndex:0,context:i[d],name:"minor_age_"+d,messages:p,items:h,showDescriptionMessage:g.showRateMessage});(function(e){v.on("change",function(t){if(g.minorsAgeSelection){b.set("minor_"+e+"_age",t.items[t.selectedItemIndex].value,{from:"outbound"}),g.minorsSeatSelection&&(t.selectedItemIndex<=2&&t.selectedItemIndex>0?t.context.classList.add("_pnlpk-agePicker--showSeatSelection"):t.context.classList.remove("_pnlpk-agePicker--showSeatSelection"),b.set("minor_"+e+"_inArms",t.items[t.selectedItemIndex].inArms,{from:"outbound"}));if(g.showRateMessage)if(t.selectedItemIndex!==-1){var n=t.items[t.selectedItemIndex],r=P(n);t.context.querySelector("._pnlpk-agePicker__description").innerText=r,t.context.classList.add("_pnlpk-agePicker--showDescriptionMessage")}else t.context.classList.remove("_pnlpk-agePicker--showDescriptionMessage")}})})(d),T.createBridge("minorAgeSelect_"+d,v)}}T.createBridge("adultsStepper",l),T.createBridge("minorsStepper",c),g.flightClassTypeEnabled&&T.createBridge("flightClassTypePicker",s),l.on("change",function(e){b.set("adults",e.value,{from:"outbound"});var t=g.maxPassengers-b.get("adults");b.get("passengers_type")==="common"&&c.setUpperBound(t)}),c.on("change",function(e){b.set("minors",e.value,{from:"outbound"});var t=g.maxPassengers-b.get("minors");l.setUpperBound(t)}),e.appendChild(t),b.on("change:passengers_type",function(e,t){Q.trigger("hide-warning-only-adults-disabled"),Q.trigger("hide-warning-only-adults-old");if(t!=="common"){b.set("minors",0,{from:"outbound"}),c.setUpperBound(0);var n=g.maxPassengers;l.setUpperBound(n),c.disabledPicker(),c.setTooltipShow(!1)}else{c.enabledPicker(),c.setTooltipShow(g.tooltipShow);var r=g.maxPassengers-b.get("adults");c.setUpperBound(r)}t==="disabled"&&Q.trigger("show-warning-only-adults-disabled"),t==="old"&&Q.trigger("show-warning-only-adults-old")})},j=function(){var e=g.maxPassengers-Mt("distribution").totalPassengers;for(var t=0;t<M.adults.length;t++){var n=M.adults[t].getValue(),r=M.minors[t].getValue(),i=g.maxPassengersPerRoom-n-r,s=i>e?e:i,o=s+n,u=s+r;M.adults[t].setUpperBound(o),M.minors[t].setUpperBound(u)}},F=function(e,t){var n=t.querySelectorAll("._pnlpk-itemBlock");for(var r=0;r<g.maxRooms;r++){var i=n[r],s=i.querySelector("._pnlpk-stepper-adults"),a=i.querySelector("._pnlpk-stepper-minors"),f=i.querySelectorAll("._pnlpk-select-minor-age"),l=new o({lowerBound:g.minAdultsPerRoom,upperBound:g.maxPassengersPerRoom-g.minMinorsPerRoom,value:g.defaultAdultsPerRoom,tooltipShow:g.tooltipShow,step:1,context:s,language:g.language,locale:g.locale}),c=new o({lowerBound:g.minMinorsPerRoom,upperBound:g.maxPassengersPerRoom-g.minAdultsPerRoom,value:g.defaultMinorsPerRoom,tooltipShow:g.tooltipShow,step:1,context:a,language:g.language,locale:g.locale});H(l,"adults"),H(c,"minors"),b.set("room_"+r+"_adults",g.defaultAdultsPerRoom,{from:"outbound"}),b.set("room_"+r+"_minors",g.defaultMinorsPerRoom,{from:"outbound"}),M.adults.push(l),M.minors.push(c),function(e,t,n){if(g.minorsAgeSelection){var r=_(),i={inArms:x.inArms,inChair:x.inSeat};for(var s=0;s<f.length;s++){var o=new u({selectedItemIndex:0,context:f[s],name:"room_"+e+"_minor_age_"+s,messages:i,items:r});(function(t){o.on("change",function(n){b.set("room_"+e+"_minor_"+t+"_age",n.items[n.selectedItemIndex].value,{from:"outbound"}),g.minorsSeatSelection&&(n.selectedItemIndex<3&&n.selectedItemIndex>0?n.context.classList.add("_pnlpk-agePicker--showSeatSelection"):n.context.classList.remove("_pnlpk-agePicker--showSeatSelection"),b.set("room_"+e+"_minor_"+t+"_inArms",n.items[n.selectedItemIndex].inArms,{from:"outbound"}))})})(s),T.createBridge("room_"+e+"_minorAgeSelect_"+s,o)}}T.createBridge("room_"+e+"_adultsStepper",t),T.createBridge("room_"+e+"_minorsStepper",n),t.on("change",function(t){b.set("room_"+e+"_adults",t.value,{from:"outbound"}),j()}),n.on("change",function(t){b.set("room_"+e+"_minors",t.value,{from:"outbound"}),j()})}(r,l,c),e.appendChild(i)}var h=t.querySelectorAll("._pnlpk-exceeded-minors-in-arms")[0];e.appendChild(h)},I=function(){g.minorsAgeSelection&&Q.trigger("set-minors-age-select-last-item",{minorSelectsToShow:g.minMinors})},q=function(){if(g.minorsAgeSelection)for(var e=0;e<g.maxPassengersPerRoom-g.minAdultsPerRoom;e++)Q.trigger("set-minors-age-select-last-item",{minorSelectsToShow:g.minMinorsPerRoom,roomIndex:e})},R=function(e){e==="passengers"?B(A,L):e==="rooms"&&F(A,L)};R(g.componentType),S.html(C);var U=function(){var e={};if(g.componentType==="passengers"){e.adults=b.get("adults"),e.minors=b.get("minors");if(e.minors>0)for(var t=0;t<e.minors;t++)e["minor_"+t+"_age"]=b.get("minor_"+t+"_age"),e["minor_"+t+"_inArms"]=b.get("minor_"+t+"_inArms")}else if(g.componentType==="rooms"){e.rooms=b.get("rooms");for(var n=0;n<e.rooms;n++){var r=b.get("room_"+n+"_adults"),i=b.get("room_"+n+"_minors");e["room_"+n+"_adults"]=r,e["room_"+n+"_minors"]=i;for(var s=0;s<i;s++)e["room_"+n+"_minor_"+s+"_age"]=b.get("room_"+n+"_minor_"+s+"_age")}}O.trigger("userSelection",e,b)},z=function(e){E=e.toJSON()},W=function(){b.isValid()?(w.get("isMobileViewport")&&U(),z(b),typeof O.events._apply=="function"&&O.events._apply(),Tt(),O.trigger("applyClick")):(w.get("mobile_visible")||g.distriInnerScroll)&&Q.trigger("scroll-first-error")},X=function(){var e=b.get("rooms");if(e<g.maxRooms){var t=b.get("room_"+e+"_adults");t+=b.get("room_"+e+"_minors");var n=g.maxPassengers-Mt("distribution").totalPassengers;t>n&&(g.defaultAdultsPerRoom+g.defaultMinorsPerRoom<=n?(b.set("room_"+e+"_adults",g.defaultAdultsPerRoom),b.set("room_"+e+"_minors",g.defaultMinorsPerRoom)):(b.set("room_"+e+"_adults",1),b.set("room_"+e+"_minors",0))),b.set("rooms",e+1),O.trigger("userChangeRoom",b.get("rooms"),b),setTimeout(function(){Q.trigger("scroll-to-bottom")},200)}},V=function(){var e=b.get("rooms");e>1&&b.set("rooms",e-1)},J=function(){b.set(E)};S.on("click","._pnlpk-panel__button--link-right",W),S.on("click","._pnlpk-panel__button--link-left",X),S.on("click","._pnlpk-header-button",V),S.find("._pnlpk-panel__button--exit").click(function(){J(),Tt(),O.trigger("backButton")});var K=function(e){e==="passengers"?I():e==="rooms"&&q(),z(b)},Q=i.bind(S,g),G=function(){e(document).on("mousedown",et),e(window).on("resize",nt)},Y=function(){e(document).off("mousedown",et),e(window).off("resize",nt)},Z=function(){if(!b.isValid()){var e=b.validationError.map(function(e){return e.error_type});O.trigger("error",e)}},et=function(t){if(e(t.target).parents("._pnlpk-main").length===0&&t.target.nodeName!=="HTML"&&w.get("visible")){var n=O.trigger("closingConfirmation",t.target);if(n||n===undefined)Tt(),Z(),typeof O.events._apply=="function"&&O.events._apply()}},tt=function(){w.get("isMobileViewport")?(J(),Tt()):(Tt(),Z(),typeof O.events._apply=="function"&&O.events._apply())},nt=function(e){var t=e.target.innerWidth;w.isVisible()&&!w.get("isMobileViewport")&&St(t)&&Tt()},rt=function(e,t,n){var r=n>=0?"room_"+n+"_adultsStepper":"adultsStepper",i=T.getBridge(r);i.setValue(t)},it=function(e,t,n){Q.trigger("set-minors-age-select-last-item",{minorSelectsToShow:t,roomIndex:n});var r=n>=0?"room_"+n+"_minorsStepper":"minorsStepper",i=T.getBridge(r);i.setValue(t)},st=function(e){var t=!0;return function(n,r){Object.keys(n.changed).forEach(function(){var i=T.getBridge("minorAgeSelect_"+e);t?(i.setStatus(r,n.get("minor_"+e+"_inArms")),t=!1):i.setStatus(r,i.getStatus().inArms)})}},ot=function(e){return function(t,n){Object.keys(t.changed).forEach(function(){var r=T.getBridge("minorAgeSelect_"+e);t.get("minor_"+e+"_age")!==-1&&r.setStatus(t.get("minor_"+e+"_age"),n)})}},ut=function(e,t,n,r){var i=T.getBridge("room_"+n+"_minorAgeSelect_"+r);i.setStatus(t)},at=function(e,t){t?(Q.trigger("open-distribution-picker"),O.trigger("open",{modal:!1})):Q.trigger("close-distribution-picker")},ft=function(e,t){t?(Q.trigger("open-mobile-distribution-picker"),O.trigger("open",{modal:!0})):(Q.trigger("close-mobile-distribution-picker"),O.trigger("close",{modal:!0}))},lt=function(e,t){Q.trigger("move-distribution-picker",{position:t})},ct=function(e,t){Q.trigger("seat-selection-disabled",!t)},ht=function(e,t){Q.trigger("show-rate-message",t)},pt=function(){b.get("component")==="passengers"?(Q.trigger("hide-mobile-error-minors-without-age"),Q.trigger("hide-mobile-error-minors-in-arms-exceeded")):b.get("component")==="rooms"&&(Q.trigger("hide-mobile-error-minors-without-age"),Q.trigger("hide-mobile-error-minors-in-arms-exceeded"),Q.trigger("hide-mobile-error-passengers-exceeded"))},dt=function(e){pt(),e.forEach(function(e){switch(e.error_type){case"minors_without_age":Q.trigger("show-mobile-error-minors-without-age",e.data.invalid_selects);break;case"minors_in_arms_exceeded":Q.trigger("show-mobile-error-minors-in-arms-exceeded")}})},vt=function(e){pt(),e.forEach(function(e){switch(e.error_type){case"minors_without_age":Q.trigger("show-mobile-error-minors-without-age",e.data);break;case"minors_in_arms_exceeded":Q.trigger("show-mobile-error-minors-in-arms-exceeded");break;case"passengers_exceeded":Q.trigger("show-mobile-error-passengers-exceeded")}})},mt=function(e,t){O.trigger("applyError"),e.get("component")==="passengers"?dt(t):e.get("component")==="rooms"&&vt(t)},gt=function(){var e={};e.invalid=mt;if(g.componentType==="passengers"){e["change:adults"]=rt,e["change:minors"]=it;var t=g.maxPassengers-g.minAdults;for(var n=0;n<t;n++)b.on("change:minor_"+n+"_age",st(n)),b.on("change:minor_"+n+"_inArms",ot(n))}else if(g.componentType==="rooms"){e["change:rooms"]=function(e,t){var n=Mt("distribution"),r=n.totalPassengers<g.maxPassengers&&n.totalRooms<g.maxRooms;Q.trigger("add-room-button-enabled",r);var i;if(e._previousAttributes.rooms<t){for(i=e._previousAttributes.rooms;i<t&&i+1<=g.maxRooms;i++)Q.trigger("show-room",i-1,i);i===g.maxRooms&&b.set("rooms",g.maxRooms),O.trigger("userSelection",e.changed,e)}else{for(i=e._previousAttributes.rooms-1;i>=t&&i>=1;i--)Q.trigger("hide-room",i-1,i);if(i===0){var s=1;b.set("rooms",s)}O.trigger("userSelection",e.changed,e)}j()};for(var r=0;r<g.maxRooms;r++){e["change:room_"+r+"_adults"]=function(e){return function(t,n){var r=Mt("distribution");Q.trigger("add-room-button-enabled",r.totalPassengers<g.maxPassengers&&r.totalRooms<g.maxRooms),rt(t,n,e)}}(r),e["change:room_"+r+"_minors"]=function(e){return function(t,n){var r=Mt("distribution");Q.trigger("add-room-button-enabled",r.totalPassengers<g.maxPassengers&&r.totalRooms<g.maxRooms),it(t,n,e)}}(r);for(var i=0;i<g.maxPassengersPerRoom-g.minAdultsPerRoom;i++)e["change:room_"+r+"_minor_"+i+"_age"]=function(e,t){return function(n,r){ut(n,r,e,t)}}(r,i)}}b.on(e)};gt(),b.on("all",function(){O.trigger("modelChanged",b.changed)}),w.on({"change:visible":at,"change:mobile_visible":ft,"change:position":lt,"change:seat_selection":ct,"change:rate_message":ht}),b.on("change",function(e,t){e.validationError!==null&&e.isValid()&&pt(),t.from&&t.from==="inbound"&&z(e),!w.get("isMobileViewport")&&t.from&&t.from==="outbound"&&O.trigger("userSelection",e.changed,e.attributes)});var yt=300,bt=function(e,t){return e+yt<=t},wt=function(e,t){var n=document.querySelector(".sbox-ui-rooms-container"),r=null;if(n){var i=n.offsetWidth;r=e-(yt-i)}return{x:r||e,y:t}},Et=0,St=function(e){return Et!==e},xt=function(e){Et=window.innerWidth,bt(e.x,Et)?Q.trigger("container-to-left"):(Q.trigger("container-to-right"),e=wt(e.x,e.y)),w.setVisible(),w.set("position",e),G()},Tt=function(){w.setNotVisible(),O.trigger("close",{modal:!1}),Y()},Nt=function(){return w.get("visible")},Ct=function(e,t){switch(e){case"model-changed":O.events.modelChanged=t;break;case"apply-error":O.events.applyError=t;break;case"user-change-room":O.events.userChangeRoom=t;break;case"user-selection":O.events.userSelection=t;break;case"error":O.events.error=t;break;case"closing-confirmation":O.events.closingConfirmation=t;break;case"back-button":O.events.backButton=t;break;case"apply-click":O.events.applyClick=t;break;case"tooltipMaxShowed":O.events.tooltipMaxShowed=t;break;case"open":O.events.open=t;break;case"close":O.events.close=t;break;case"apply":O.events._apply=t;break;default:O.trigger("error",["event_not_found"],e)}},kt=function(e){switch(e){case"close":O.events.close=function(){}}},Lt=function(e,t){switch(e){case"adults":b.set("adults",t,{from:"inbound"});break;case"minors":b.set("minors",t,{from:"inbound"});break;case"minor_age":b.set("minor_"+t.minor+"_age",t.age,{from:"inbound"});break;case"ticket_class":b.set("ticket_class",t,{from:"inbound"});break;case"minor_seat":b.set("minor_"+t.minor+"_inArms",t.inArms,{from:"inbound"});break;case"seat_selection":w.set("seat_selection",t,{from:"inbound"}),b.set("minors_seat_selection",t,{from:"inbound"}),b.isValid()&&pt();break;case"rate_message":w.set("rate_message",t,{from:"inbound"});break;case"error_message":Q.trigger("change-error-message",t);break;case"passengers_type":b.set("passengers_type",t,{from:"inbound"})}},At=function(e,t){switch(e){case"adults":b.set("room_"+t.room+"_adults",t.adults,{from:"inbound"});break;case"minors":b.set("room_"+t.room+"_minors",t.minors,{from:"inbound"});break;case"minor_age":b.set("room_"+t.room+"_minor_"+t.minor+"_age",t.age,{from:"inbound"});break;case"rooms":b.set("rooms",t.value,{from:"inbound"});break;case"errors":pt(),g.errors=t.value}},Ot=function(e,t){g.componentType==="passengers"?Lt(e,t):g.componentType==="rooms"&&At(e,t)},Mt=function(e){if(e==="distribution"){var t={};g.componentType==="passengers"&&(t.totalAdults=b.get("adults"),t.totalMinors=b.get("minors"),t.totalPassengers=t.totalAdults+t.totalMinors);if(g.componentType==="rooms"){t.totalAdults=0,t.totalMinors=0;for(var n=0;n<b.get("rooms");n++)t.totalAdults+=b.get("room_"+n+"_adults"),t.totalMinors+=b.get("room_"+n+"_minors");t.totalRooms=b.get("rooms"),t.totalPassengers=t.totalAdults+t.totalMinors}return t}},_t=function(){return b.isValid()},Dt=function(e,t){g[e]=t};K(g.componentType);var Pt={show:xt,hide:tt,subscribe:Ct,unsubscribe:kt,set:Ot,get:Mt,validate:_t,isVisible:Nt,close:tt,setConfigKey:Dt,isMobileViewport:w.get("isMobileViewport")},Ht=new l;return Ht.subscribe(Pt),Pt};return m}),define("common.module/js/transforms/helpers/get-data-from-room",[],function(){return function(e){return function(){var n=e.get("rooms"),r=0,i=0,s=[],o=[],u;for(var a=1;a<=n;a++){r+=parseInt(e.get("room_"+a+"_adults"));var f=parseInt(e.get("room_"+a+"_minors"));i+=f;var l;for(var c=1;c<=f;c++)l=e.get("room_"+a+"_minor_"+c+"_age"),s.push(l),u=e.get("room_"+a+"_minor_"+c+"_inArms"),o.push(u)}return{totalAdults:r,totalMinors:i,minorsAges:s,minorsInArms:o,minorsForCompare:s.toString()+o.toString()}}}}),define("common.module/js/transforms/helpers/get-data-from-passenger",[],function(){return function(e){return function(){var n=[],r=[],i=e.get("minors"),s,o;for(var u=1;u<=i;u++)s=e.get("minor_"+u+"_age"),n.push(s),o=e.get("minor_"+u+"_inArms"),r.push(o);return{ages:n,inArms:r,forCompare:n.toString()+r.toString()}}}}),define("common.module/js/transforms/get-model-room-to-passenger-model",["./helpers/get-data-from-room","./helpers/get-data-from-passenger"],function(e,t){return function(n){var r=e(n),i=t(n);return function(){var t={},s=r(),o=s.totalAdults,u=s.totalMinors,a=s.minorsAges,f=s.minorsInArms,l=s.minorsForCompare,c=n.get("adults"),h=n.get("minors"),p=i(h);if(c!==o||h!==u||l!==p.forCompare){t.adults=o,t.children=u,t.minors=u;var d,v;for(var m=0;m<a.length;m++)d=a[m],t["minor_"+(m+1)+"_age"]=d,v=f[m],t["minor_"+(m+1)+"_inArms"]=v}return t}}}),define("common.module/js/transforms/get-passenger-model-to-model-room",["./helpers/get-data-from-room","./helpers/get-data-from-passenger"],function(e,t){return function(n){var r=e(n),i=t(n);return function(){var t={},s=n.get("adults"),o=n.get("minors"),u=i(),a=r(),f=a.totalAdults,l=a.totalMinors,c=a.minorsForCompare,h,p;if(s!==f||o!==l||c!==u.forCompare){t.rooms=1,t.room_1_adults=s,t.room_1_minors=o;for(var d=0;d<u.ages.length;d++)h=u.ages[d],t["room_1_minor_"+(d+1)+"_age"]=h,p=u.inArms[d],t["room_1_minor_"+(d+1)+"_inArms"]=p}return t}}}),define("common.module/js/AutocompleteHistoryManager/helpers/items-is-valid",[],function(){function e(e){var t=e&&e.hasOwnProperty("gid")&&e.hasOwnProperty("description")&&e.description&&e.description!=="";return t}return e}),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function w(t,n){if(e&&n.stack&&typeof t=="object"&&t!==null&&t.stack&&t.stack.indexOf(b)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var s=r.join("\n"+b+"\n");t.stack=E(s)}}function E(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!T(i)&&!S(i)&&i&&n.push(i)}return n.join("\n")}function S(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function x(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function T(e){var t=x(e);if(!t)return!1;var i=t[0],s=t[1];return i===r&&s>=n&&s<=ot}function N(){if(!e)return;try{throw new Error}catch(t){var n=t.stack.split("\n"),i=n[0].indexOf("@")>0?n[1]:n[2],s=x(i);if(!s)return;return r=s[0],s[1]}}function C(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function k(e){return P(e)?e:H(e)?$(e):V(e)}function L(){function l(e){r=e,o.source=e,f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=h(L.prototype),o=h(M.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);t?(t.push(u),i==="when"&&o[1]&&n.push(o[1])):s(function(){r.promiseDispatch.apply(r,u)})},o.valueOf=function(){if(t)return o;var e=D(r);return P(e)&&(r=e),e},o.inspect=function(){return r?r.inspect():{state:"pending"}};if(k.longStackSupport&&e)try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(e){if(r)return;l(k(e))},i.fulfill=function(e){if(r)return;l(V(e))},i.reject=function(e){if(r)return;l(X(e))},i.notify=function(e){if(r)return;f(n,function(t,n){s(function(){n(e)})},void 0)},i}function A(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=L();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function O(e){return A(function(t,n){for(var r=0,i=e.length;r<i;r++)k(e[r]).then(t,n)})}function M(e,t,n){t===void 0&&(t=function(e){return X(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(M.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=X(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value}}return r}function _(e,t,n,r){return k(e).then(t,n,r)}function D(e){if(P(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function P(e){return m(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function H(e){return m(e)&&typeof e.then=="function"}function B(e){return P(e)&&e.inspect().state==="pending"}function j(e){return!P(e)||e.inspect().state==="fulfilled"}function F(e){return P(e)&&e.inspect().state==="rejected"}function U(){I.length=0,q.length=0,R||(R=!0)}function z(e,t){if(!R)return;q.push(e),t&&typeof t.stack!="undefined"?I.push(t.stack):I.push("(no stack) "+t)}function W(e){if(!R)return;var t=l(q,e);t!==-1&&(q.splice(t,1),I.splice(t,1))}function X(e){var t=M({when:function(t){return t&&W(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return z(t,e),t}function V(e){return M({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function $(e){var t=L();return s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function J(e){return M({isDef:function(){}},function(n,r){return et(e,n,r)},function(){return k(e).inspect()})}function K(e,t,n){return k(e).spread(t,n)}function Q(e){return function(){function t(e,t){var s;if(typeof StopIteration=="undefined"){try{s=n[e](t)}catch(o){return X(o)}return s.done?s.value:_(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?o.value:X(o)}return _(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function G(e){k.done(k.async(e)())}function Y(e){throw new y(e)}function Z(e){return function(){return K([this,tt(arguments)],function(t,n){return e.apply(t,n)})}}function et(e,t,n){return k(e).dispatch(t,n)}function tt(e){return _(e,function(e){var t=0,n=L();return f(e,function(r,i,s){var o;P(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,_(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function nt(e){return _(e,function(e){return e=c(e,k),_(tt(c(e,function(e){return _(e,i,i)})),function(){return e})})}function rt(e){return k(e).allSettled()}function it(e,t){return k(e).then(void 0,void 0,t)}function st(e,t){return k(e).nodeify(t)}var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n=N(),r,i=function(){},s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;r&&(e.domain=void 0,r.enter());try{t()}catch(s){if(i)throw r&&r.exit(),setTimeout(o,0),r&&r.enter(),s;setTimeout(function(){throw s},0)}r&&r.exit()}n=!1}var e={task:void 0,next:null},t=e,n=!1,r=void 0,i=!1;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null},n||(n=!0,r())};if(typeof process!="undefined"&&process.nextTick)i=!0,r=function(){process.nextTick(o)};else if(typeof setImmediate=="function")typeof window!="undefined"?r=setImmediate.bind(window,o):r=function(){setImmediate(o)};else if(typeof MessageChannel!="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a,u.port1.onmessage=o,o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0),a()}}else r=function(){setTimeout(o,0)};return s}(),o=Function.call,a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b="From previous event:";k.resolve=k,k.nextTick=s,k.longStackSupport=!1,k.defer=L,L.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},k.Promise=A,k.promise=A,A.race=O,A.all=tt,A.reject=X,A.resolve=k,k.passByCopy=function(e){return e},M.prototype.passByCopy=function(){return this},k.join=function(e,t){return k(e).join(t)},M.prototype.join=function(e){return k([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},k.race=O,M.prototype.race=function(){return this.then(k.race)},k.makePromise=M,M.prototype.toString=function(){return"[object Promise]"},M.prototype.then=function(e,t,n){function u(t){try{return typeof e=="function"?e(t):t}catch(n){return X(n)}}function a(e){if(typeof t=="function"){w(e,r);try{return t(e)}catch(n){return X(n)}}return X(e)}function f(e){return typeof n=="function"?n(e):e}var r=this,i=L(),o=!1;return s(function(){r.promiseDispatch(function(e){if(o)return;o=!0,i.resolve(u(e))},"when",[function(e){if(o)return;o=!0,i.resolve(a(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!k.onerror)throw r;k.onerror(r)}n||i.notify(t)}]),i.promise},k.when=_,M.prototype.thenResolve=function(e){return this.then(function(){return e})},k.thenResolve=function(e,t){return k(e).thenResolve(t)},M.prototype.thenReject=function(e){return this.then(function(){throw e})},k.thenReject=function(e,t){return k(e).thenReject(t)},k.nearer=D,k.isPromise=P,k.isPromiseAlike=H,k.isPending=B,M.prototype.isPending=function(){return this.inspect().state==="pending"},k.isFulfilled=j,M.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},k.isRejected=F,M.prototype.isRejected=function(){return this.inspect().state==="rejected"};var I=[],q=[],R=!0;k.resetUnhandledRejections=U,k.getUnhandledReasons=function(){return I.slice()},k.stopUnhandledRejectionTracking=function(){U(),R=!1},U(),k.reject=X,k.fulfill=V,k.master=J,k.spread=K,M.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},k.async=Q,k.spawn=G,k["return"]=Y,k.promised=Z,k.dispatch=et,M.prototype.dispatch=function(e,t){var n=this,r=L();return s(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},k.get=function(e,t){return k(e).dispatch("get",[t])},M.prototype.get=function(e){return this.dispatch("get",[e])},k.set=function(e,t,n){return k(e).dispatch("set",[t,n])},M.prototype.set=function(e,t){return this.dispatch("set",[e,t])},k.del=k["delete"]=function(e,t){return k(e).dispatch("delete",[t])},M.prototype.del=M.prototype["delete"]=function(e){return this.dispatch("delete",[e])},k.mapply=k.post=function(e,t,n){return k(e).dispatch("post",[t,n])},M.prototype.mapply=M.prototype.post=function(e,t){return this.dispatch("post",[e,t])},k.send=k.mcall=k.invoke=function(e,t){return k(e).dispatch("post",[t,a(arguments,2)])},M.prototype.send=M.prototype.mcall=M.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])},k.fapply=function(e,t){return k(e).dispatch("apply",[void 0,t])},M.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},k["try"]=k.fcall=function(e){return k(e).dispatch("apply",[void 0,a(arguments,1)])},M.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},k.fbind=function(e){var t=k(e),n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},M.prototype.fbind=function(){var e=this,t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}},k.keys=function(e){return k(e).dispatch("keys",[])},M.prototype.keys=function(){return this.dispatch("keys",[])},k.all=tt,M.prototype.all=function(){return tt(this)},k.allResolved=C(nt,"allResolved","allSettled"),M.prototype.allResolved=function(){return nt(this)},k.allSettled=rt,M.prototype.allSettled=function(){return this.then(function(e){return tt(c(e,function(e){function t(){return e.inspect()}return e=k(e),e.then(t,t)}))})},k.fail=k["catch"]=function(e,t){return k(e).then(void 0,t)},M.prototype.fail=M.prototype["catch"]=function(e){return this.then(void 0,e)},k.progress=it,M.prototype.progress=function(e){return this.then(void 0,void 0,e)},k.fin=k["finally"]=function(e,t){return k(e)["finally"](t)},M.prototype.fin=M.prototype["finally"]=function(e){return e=k(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},k.done=function(e,t,n,r){return k(e).done(t,n,r)},M.prototype.done=function(e,t,n){var r=function(e){s(function(){w(e,i);if(!k.onerror)throw e;k.onerror(e)})},i=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},k.timeout=function(e,t,n){return k(e).timeout(t,n)},M.prototype.timeout=function(e,t){var n=L(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},k.delay=function(e,t){return t===void 0&&(t=e,e=void 0),k(e).delay(t)},M.prototype.delay=function(e){return this.then(function(t){var n=L();return setTimeout(function(){n.resolve(t)},e),n.promise})},k.nfapply=function(e,t){return k(e).nfapply(t)},M.prototype.nfapply=function(e){var t=L(),n=a(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},k.nfcall=function(e){var t=a(arguments,1);return k(e).nfapply(t)},M.prototype.nfcall=function(){var e=a(arguments),t=L();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},k.nfbind=k.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=L();return n.push(r.makeNodeResolver()),k(e).fapply(n).fail(r.reject),r.promise}},M.prototype.nfbind=M.prototype.denodeify=function(){var e=a(arguments);return e.unshift(this),k.denodeify.apply(void 0,e)},k.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=L();return r.push(i.makeNodeResolver()),k(s).fapply(r).fail(i.reject),i.promise}},M.prototype.nbind=function(){var e=a(arguments,0);return e.unshift(this),k.nbind.apply(void 0,e)},k.nmapply=k.npost=function(e,t,n){return k(e).npost(t,n)},M.prototype.nmapply=M.prototype.npost=function(e,t){var n=a(t||[]),r=L();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},k.nsend=k.nmcall=k.ninvoke=function(e,t){var n=a(arguments,2),r=L();return n.push(r.makeNodeResolver()),k(e).dispatch("post",[t,n]).fail(r.reject),r.promise},M.prototype.nsend=M.prototype.nmcall=M.prototype.ninvoke=function(e){var t=a(arguments,1),n=L();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},k.nodeify=st,M.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})};var ot=N();return k}),define("common.module/js/AutocompleteHistoryManager/config",{clean:!0,clean_strategy:"first_list_has_preponderancy",latest_searches_enabled:!0}),define("common.module/js/AutocompleteHistoryManager/helpers/clean",[],function(){function e(e,r,i,s,o){var u,a,f;return f=[],u=t(e.items,i),a=n(u,r.items,o),a=t(a,s),u.length&&f.push({title:e.title,icon:e.icon,items:u}),a.length&&f.push({title:r.title,icon:r.icon,items:a}),f}function t(e,t){var n=e.length;return n&&n>t&&e.splice(t,n-t),e}function n(e,t,n){function r(t){for(var n=0;n<e.length;n++)if(e[n].gid===t.gid)return!1;return!0}return n.order.length>1&&(t=t.filter(r)),t}return e}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/config",{max_items:5,icon:"time",change_event_tracker_id:"AutocompleteChangeLastSearch"}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/helpers/remove-duplicate",[],function(){return function(t,n){return t=t.filter(function(e){return e.subtitle&&!n.gid&&e.target.gid!==n.target.gid||n.gid&&e.gid!==n.gid&&(!e.hasOwnProperty("target")||e.hasOwnProperty("target")&&e.target.gid!==n.gid)}),t}}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/helpers/version",[],function(){return function(e){function n(e){var t=[];return e&&(t=e.split(".")),t}var t;t=n(e);var r=function(r,i){var s,o,u,a,f=i.equalMode,l=i.minorMode,c=i.majorMode;a=n(r);var h=!1;if(!t.length||!a.length)throw"AutocompleteHistor Manager Version noneToCompare";if(f&&r===e)h=!0;else if(f&&!l&&!c&&r!==e)h=!1;else{u=a.length;for(var p=0;p<u;p++){s=parseInt(t[p],10),o=parseInt(a[p],10);if(s<o){h=l?!0:!1;break}if(s>o){h=l?!1:!0;break}}}return h};return{isMinorThan:function(e){return r(e,{equalMode:!1,minorMode:!0,majorMode:!1})},isMinorOrEqualThan:function(e){return r(e,{equalMode:!0,minorMode:!0,majorMode:!1})},isMajorThan:function(e){return r(e,{equalMode:!1,minorMode:!1,majorMode:!0})},isMajorOrEqualThan:function(e){return r(e,{equalMode:!0,minorMode:!1,majorMode:!0})},isEqualThan:function(e){return r(e,{equalMode:!0,minorMode:!1,majorMode:!1})}}}}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/adapters/local-storage",["common.module/js/deepExtend","common.module/js/localStorageHelper","backbone","q","localstorage"],function(e,t,n){return function(e,r,i){var s={fetch:function(){},save:function(){}};return t.isSupported&&(s=new(n.Model.extend({localStorage:new n.LocalStorage(i)}))({id:e+"_"+r})),s}}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/data",["q","./config","./helpers/remove-duplicate","./helpers/version","./adapters/local-storage"],function(e,t,n,r,i){return function(s,o,u){function l(r,i){function o(e){r.change_event_tracker_id=t.change_event_tracker_id,r.date=Date.now(),r.version=u,e=n(e,r),e.unshift(r),t.max_items<e.length&&e.pop(),f.save({items:e,updateVersion:u}),s.resolve()}var s=e.defer();return d().then(function(e){o(e.items)},function(){o([])}),typeof i=="function"&&s.promise.then(i),s.promise}function c(t){var n=e.defer();return d().then(function(e){var i=e.items,s=f.get("updateVersion");Array.isArray(i)&&(typeof t=="function"?i=i.filter(function(e){var n=t.call(this,e);return!n},{updateVersion:s,versionHelper:r}):i=[],f.set("items",i),f.save()),n.resolve()}).fail(function(){n.reject()}),n.promise}function h(e,t){return l(e,t)}function p(e){f.set(e)}function d(){var t=e.defer();return f.fetch({success:function(e){var n=e.toJSON();n.key="latest_searches",n.items.length?t.resolve(n):t.reject()},error:function(e){t.reject(e)}}),t.promise}var a=i,f=a(s,o,"sbox-autocomplete-latest-searches");return{get:d,set:p,add:h,remove:c}}}),define("common.module/js/AutocompleteHistoryManager/helpers/i18n",[],function(){return function(e,t,n){var r;return e.hasOwnProperty(t+"_"+n)?r=e[t+"_"+n]:e.hasOwnProperty(t)?r=e[t]:r=undefined,r}}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/i18n",{es:{title:"Últimas búsquedas"},en:{title:"Your lastest searches"},pt:{title:"Suas últimas buscas"}}),define("common.module/js/AutocompleteHistoryManager/dependencies/latest-searches/main",["underscore","q","common.module/js/deepExtend","./config","./data","../../helpers/i18n","./i18n","../../helpers/items-is-valid"],function(e,t,n,r,i,s,o,u){return function(n){function v(){var e=t.defer();return d.get().then(function(t){e.resolve({key:t.key,items:t.items})}).fail(function(){e.reject()}),e.promise}var a=n.box,f=n.type,l=n.language,c=n.country,h=n.version;r=e.extend(r,n.config);var p=s(o,l,c),d=i(a,f,h);return{title:p.title,icon:r.icon,getItems:v,set:d.set,add:d.add,remove:d.remove,itemIsValid:u,config:r}}}),define("common.module/js/AutocompleteHistoryManager/main",["underscore","q","./config","./helpers/clean","./dependencies/latest-searches/main"],function(e,t,n,r,i){function s(t,r){this.options=t,this.context=r||{},this.options.suggester=t.suggester?t.suggester:!1,this.options.version=t.version?t.version:null;if(!this.options.latest_searches_enabled)throw"Autocomplete History Manager: Must have a least one list enabled ";if(this.options.hasOwnProperty("order")&&this.options.latest_searches_enabled&&this.options.order.indexOf("latest_searches"))throw'Autocomplete History Manager: missed "latest_searches" item in order';this.last_searches_instances={},this.options=e.extend({},n,this.options)}return s.prototype.latest_searches=function(e){return typeof this.last_searches_instances[e]=="undefined"&&(this.last_searches_instances[e]=i({box:this.options.box,language:this.options.language,country:this.options.country,type:e,suggester:this.options.suggester,version:this.options.version})),this.last_searches_instances[e]},s.prototype.get=function(n,s,o){var u=t.defer(),a={results:[]},f=[];typeof this.last_searches_instances[n]=="undefined"&&(this.last_searches_instances[n]=i({box:this.options.box,language:this.options.language,country:this.options.country,type:n,suggester:this.options.suggester,version:this.options.version})),o=o||{},o=e.extend({},this.options,o),this.options.hasOwnProperty("order")||(o.order=[],o.latest_searches_enabled&&o.order.push("latest_searches"));var l=[],c=[],h=0;for(var p in o.order)o.order[p]==="latest_searches"&&o.latest_searches_enabled&&(h=parseInt(p,10),f.push({title:this.last_searches_instances[n].title,items:[],icon:this.last_searches_instances[n].icon}),l.push(this.last_searches_instances[n].getItems()),c[parseInt(p,10)]=this.last_searches_instances[n].config.max_items,a.results.push(f[p]));return t.allSettled(l).then(function(e){var t=!0;e.forEach(function(e){e.state==="fulfilled"&&(t=!1,e.value.key==="latest_searches"&&e.value.items.length&&(f[h].items=e.value.items))}),t?u.reject():(f[0]&&f[1]&&(a.results=r(f[0],f[1],c[0],c[1],o)),u.resolve(a.results))}),typeof s=="function"&&u.promise.then(function(e){s(e)}),u.promise},s}),define("common.module/js/AutocompleteHistoryManager/tracking",[],function(){return function(e){return function(n){n&&n.hasOwnProperty("change_event_tracker_id")?n.change_event_tracker_id==="AutocompleteChangeLastSearch"?e.setText("autocompleteTypeSearch","AutocompleteChangeLastSearch"):e.change("autocomplete"):e.change("autocomplete")}}}),define("common.module/js/get-room-distribution",[],function(){function e(e){var t="";for(var n=1;n<=e.rooms;n++){t!==""&&(t+="!"),t+=e["room_"+n+"_adults"].toString();for(var r=1;r<=e["room_"+n+"_minors"];r++)e["room_"+n+"_minor_"+r+"_age"]>=0&&(t+="-"+e["room_"+n+"_minor_"+r+"_age"])}return t}return e}),!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("common.module/js/JeffSuggester/bundle",[],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){function r(){}function i(e,t){var n,i,s,o,u=H;for(o=arguments.length;o-->2;)P.push(arguments[o]);for(t&&null!=t.children&&(P.length||P.push(t.children),delete t.children);P.length;)if((i=P.pop())&&void 0!==i.pop)for(o=i.length;o--;)P.push(i[o]);else"boolean"==typeof i&&(i=null),(s="function"!=typeof e)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(s=!1)),s&&n?u[u.length-1]+=i:u===H?u=[i]:u.push(i),n=s;var a=new r;return a.nodeName=e,a.children=u,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==D.vnode&&D.vnode(a),a}function s(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){return i(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function u(e){!e._dirty&&(e._dirty=!0)&&1==F.push(e)&&(D.debounceRendering||B)(a)}function a(){var e,t=F;for(F=[];e=t.pop();)e._dirty&&L(e)}function f(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&l(e,t.nodeName):n||e._componentConstructor===t.nodeName}function l(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function c(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function h(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,r,i){if("className"===t&&(t="class"),"key"!==t)if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var s in n)s in r||(e.style[s]="");for(var s in r)e.style[s]="number"==typeof r[s]&&!1===j.test(s)?r[s]+"px":r[s]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,m,o):e.removeEventListener(t,m,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)v(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var u=i&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function v(e,t,n){try{e[t]=n}catch(e){}}function m(e){return this._listeners[e.type](D.event&&D.event(e)||e)}function g(){for(var e;e=I.pop();)D.afterMount&&D.afterMount(e),e.componentDidMount&&e.componentDidMount()}function y(e,t,n,r,i,s){q++||(R=null!=i&&void 0!==i.ownerSVGElement,U=null!=e&&!("__preactattr_"in e));var o=b(e,t,n,r,s);return i&&o.parentNode!==i&&i.appendChild(o),--q||(U=!1,s||g()),o}function b(e,t,n,r,i){var s=e,o=R;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),E(e,!0))),s.__preactattr_=!0,s;var u=t.nodeName;if("function"==typeof u)return A(e,t,n,r);if(R="svg"===u||"foreignObject"!==u&&R,u=String(u),(!e||!l(e,u))&&(s=h(u,R),e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),E(e,!0)}var a=s.firstChild,f=s.__preactattr_,c=t.children;if(null==f){f=s.__preactattr_={};for(var p=s.attributes,d=p.length;d--;)f[p[d].name]=p[d].value}return!U&&c&&1===c.length&&"string"==typeof c[0]&&null!=a&&void 0!==a.splitText&&null==a.nextSibling?a.nodeValue!=c[0]&&(a.nodeValue=c[0]):(c&&c.length||null!=a)&&w(s,c,n,r,U||null!=f.dangerouslySetInnerHTML),x(s,t.attributes,f),R=o,s}function w(e,t,n,r,i){var s,o,u,a,l,c=e.childNodes,h=[],d={},v=0,m=0,g=c.length,y=0,w=t?t.length:0;if(0!==g)for(var S=0;S<g;S++){var x=c[S],T=x.__preactattr_,N=w&&T?x._component?x._component.__key:T.key:null;null!=N?(v++,d[N]=x):(T||(void 0!==x.splitText?!i||x.nodeValue.trim():i))&&(h[y++]=x)}if(0!==w)for(var S=0;S<w;S++){a=t[S],l=null;var N=a.key;if(null!=N)v&&void 0!==d[N]&&(l=d[N],d[N]=void 0,v--);else if(!l&&m<y)for(s=m;s<y;s++)if(void 0!==h[s]&&f(o=h[s],a,i)){l=o,h[s]=void 0,s===y-1&&y--,s===m&&m++;break}l=b(l,a,n,r),u=c[S],l&&l!==e&&l!==u&&(null==u?e.appendChild(l):l===u.nextSibling?p(u):e.insertBefore(l,u))}if(v)for(var S in d)void 0!==d[S]&&E(d[S],!1);for(;m<=y;)void 0!==(l=h[y--])&&E(l,!1)}function E(e,t){var n=e._component;n?O(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||p(e),S(e))}function S(e){for(e=e.lastChild;e;){var t=e.previousSibling;E(e,!0),e=t}}function x(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||d(e,r,n[r],n[r]=void 0,R);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],R)}function T(e){var t=e.constructor.name;(z[t]||(z[t]=[])).push(e)}function N(e,t,n){var r,i=z[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),M.call(r,t,n)):(r=new M(t,n),r.constructor=e,r.render=C),i)for(var s=i.length;s--;)if(i[s].constructor===e){r.nextBase=i[s].nextBase,i.splice(s,1);break}return r}function C(e,t,n){return this.constructor(e,n)}function k(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===D.syncComponentUpdates&&e.base?u(e):L(e,1,i)),e.__ref&&e.__ref(e))}function L(e,t,n,r){if(!e._disable){var i,o,u,a=e.props,f=e.state,l=e.context,h=e.prevProps||a,p=e.prevState||f,d=e.prevContext||l,v=e.base,m=e.nextBase,b=v||m,w=e._component,S=!1;if(v&&(e.props=h,e.state=p,e.context=d,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(a,f,l)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(a,f,l),e.props=a,e.state=f,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){i=e.render(a,f,l),e.getChildContext&&(l=s(s({},l),e.getChildContext()));var x,T,C=i&&i.nodeName;if("function"==typeof C){var A=c(i);o=w,o&&o.constructor===C&&A.key==o.__key?k(o,A,1,l,!1):(x=o,e._component=o=N(C,A,l),o.nextBase=o.nextBase||m,o._parentComponent=e,k(o,A,0,l,!1),L(o,1,n,!0)),T=o.base}else u=b,x=w,x&&(u=e._component=null),(b||1===t)&&(u&&(u._component=null),T=y(u,i,l,n||!v,b&&b.parentNode,!0));if(b&&T!==b&&o!==w){var M=b.parentNode;M&&T!==M&&(M.replaceChild(T,b),x||(b._component=null,E(b,!1)))}if(x&&O(x),e.base=T,T&&!r){for(var _=e,P=e;P=P._parentComponent;)(_=P).base=T;T._component=_,T._componentConstructor=_.constructor}}if(!v||n?I.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(h,p,d),D.afterUpdate&&D.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);q||r||g()}}function A(e,t,n,r){for(var i=e&&e._component,s=i,o=e,u=i&&e._componentConstructor===t.nodeName,a=u,f=c(t);i&&!a&&(i=i._parentComponent);)a=i.constructor===t.nodeName;return i&&a&&(!r||i._component)?(k(i,f,3,n,r),e=i.base):(s&&!u&&(O(s),e=o=null),i=N(t.nodeName,f,n),e&&!i.nextBase&&(i.nextBase=e,o=null),k(i,f,1,n,r),e=i.base,o&&e!==o&&(o._component=null,E(o,!1))),e}function O(e){D.beforeUnmount&&D.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?O(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,p(t),T(e),S(t)),e.__ref&&e.__ref(null)}function M(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function _(e,t,n){return y(n,e,{},!1,t,!1)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"h",function(){return i}),n.d(t,"createElement",function(){return i}),n.d(t,"cloneElement",function(){return o}),n.d(t,"Component",function(){return M}),n.d(t,"render",function(){return _}),n.d(t,"rerender",function(){return a}),n.d(t,"options",function(){return D});var D={},P=[],H=[],B="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,j=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,F=[],I=[],q=0,R=!1,U=!1,z={};s(M.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),u(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),L(this,2)},render:function(){}});var W={h:i,createElement:i,cloneElement:o,Component:M,render:_,rerender:a,options:D};t.default=W},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={COUNTRY:"flag",REGION:"flag",CITY:"city",AIRPORT:"flights",AIRLINE:"flights",HOTEL:"hotels",ACTIVITY:"location",ZONE:"town",POI:"poi",GOOGLE_PLACE:"poi",STAR:"star",BUS_STATION:"buses"};t.getEvaIconName=function(e){return e=e||"",r[e]?"suggester-icon-"+r[e]:e}},function(e,t,n){function r(e,t){return t=t||document.body,new i.commonComponentFactory(s.Component,t,e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(4);t.JeffSuggester=r},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.commonComponentFactory=function(e,t,n){var s,u=this,a=null,f=!1,l={};t instanceof HTMLElement||console.error(new Error("Invalid container")),void 0===n&&(n={}),this.setProps=function(e,t){void 0===t&&(t=!0),n=r({},n,e),f&&t&&u.mount()},this.mount=function(){s=i.render(i.h(e,r({},n,{ref:function(e){return a=e}})),t,s),f=!0,a&&"function"==typeof a.subscribe&&Object.getOwnPropertyNames(l).forEach(function(e){l[e].map(function(t){a.unSubscribe({type:e,callback:t}),a.subscribe({type:e,callback:t})})})},this.unMount=function(){i.render(null,t,s),s=null,a=null,f=!1},this.dispatch=function(e){if(!a||"function"!=typeof a.dispatchAction)throw new Error("Could not dispatch actions on unmounted components");a.dispatchAction(e)},this.subscribe=function(e){e.type in l||(l[e.type]=[]),l[e.type].push(e.callback),a&&"function"==typeof a.subscribe&&a.subscribe(e)},this.unSubscribe=function(e){if(a&&"function"==typeof a.unSubscribe&&a.unSubscribe(e.type),e.type in l)for(var t=l[e.type],n=0,r=t.length;n<r;n++)if(t[n]===e.callback)return void t.splice(n,1)}}},function(e,t,n){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0}),n(5);var s=n(0),o=n(6),u=n(7),a=n(8),f=n(12),l=n(13),c=n(14),h=n(16),p=h,d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.i18nDefinitions=o.i18nDefinitions,r.version=p.version,r.lastIndex=0,r.shallowDiffers=function(e,t){for(var n in e)if(!(n in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1},r.customShallowCompare=function(e,t,n){return r.shallowDiffers(e.props,t)||r.shallowDiffers(e.state,n)},r.KEYBOARD_MAP={13:"ENTER",27:"ESCAPE",16:"SHIFT",9:"TAB",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW"},r.delayTimer=null,r.timerScroll=null,r.initListeners=function(){window.addEventListener("resize",r.userResize.bind(r)),r.props.resizeOnScroll&&window.addEventListener("scroll",r.reCalculateInputPosition.bind(r))},r.removeListeners=function(){r._dispatchEvent("unmount",!0),window.removeEventListener("resize",r.userResize.bind(r)),r.props.resizeOnScroll&&window.removeEventListener("scroll",r.reCalculateInputPosition.bind(r))},r.userClickInteraction=function(e){e=e||!1,r.state.isModal?(r.props.inputMobile.value="",r.props.lastHint="",r.setState({showClearButton:!1})):r.props.input.select(),e&&r.showHistory()},r.blurInteraction=function(e){r.state.show&&!r.state.isModal&&e.target!==r.props.input&&(r.itemNotSelected(),r.hideAutocomplete())},r.itemNotSelected=function(){r._dispatchEvent("item-not-selected",r.props.inputName)},r.userKeyboardInteraction=function(e){var t=r.lastIndex;"UP_ARROW"===r.KEYBOARD_MAP[e]?r.setState(function(e,n){return{activeIndex:e.activeIndex<=1?t:e.activeIndex-1}}):"DOWN_ARROW"===r.KEYBOARD_MAP[e]?r.setState(function(e){return{activeIndex:e.activeIndex>=t?1:e.activeIndex+1}}):"ESCAPE"===r.KEYBOARD_MAP[e]?(r.itemNotSelected(),r.hideAutocomplete()):"ENTER"!==r.KEYBOARD_MAP[e]&&"TAB"!==r.KEYBOARD_MAP[e]||!r.state.show||(r.props.activeItem?r.itemSelected(r.props.activeItem):(r.itemNotSelected(),r.hideAutocomplete()))},r.userWritingInteraction=function(e){if(r.KEYBOARD_MAP.hasOwnProperty(e.keyCode))"keydown"===e.type&&r.userKeyboardInteraction(e.keyCode);else if("keyup"===e.type){var t=r.state.isModal?r.props.inputMobile.value:r.props.input.value;clearTimeout(r.delayTimer),t.length>=3?r.delayTimer=setTimeout(function(){t!==r.props.lastHint&&(r.props.lastHint=t,r.getSuggestions(t))},200):t.length>0?(r.props.lastHint="",r.noChars()):(r.props.lastHint="",r.userClearInput(),r.showHistory())}},r.nrPageAction=function(e,t){"string"==typeof e&&void 0!==window.newrelic&&"function"==typeof window.newrelic.addPageAction&&(t=t||{},window.newrelic.addPageAction(e,t))},r.searchExt=function(e){r.getSuggestions(e.payload),"function"==typeof e.callback&&e.callback("Went to: "+e.payload)},r.getSuggestions=function(e,t){e=e.toLowerCase();var n=r.props.baseURL,i=r.props.profile?"&profile="+r.props.profile:"",s=r.props.latitude?"&lat="+r.props.latitude:"",o=r.props.longitude?"&lon="+r.props.longitude:"",u=["&types=establishment"],a=r.props.extraTypes?u.concat(r.props.extraTypes):u;a.join(",");var f=r.props.radius?"&radius="+r.props.radius:"",c=r.props.isPoi?"/suggestions/pois?channel=site&locale="+r.props.locale+"&hint="+e+s+o+f+a+i+"&strictbounds":"/suggestions?locale="+r.props.locale+i+"&hint="+e;r.props.cityField&&(c+="&fields=city");var h=function(t,n){n.hasOwnProperty("items")&&n.items.length>0?r.setState({result:n.items,activeIndex:1}):(void 0!==window.dataLayer&&"object"==typeof window.dataLayer||(window.dataLayer=[]),window.dataLayer.push({event:"system-action",eventCategory:"Sbox_Autocomplete_error",eventAction:"no_results",eventLabel:r.props.profile}),r.setState({result:{hint:e,error:"no_results",errorAddress:r.props.isPoi?"no_results_address":null}})),r.nrPageAction("suggesterComponent",{autocompleteFrom:"suggester-service",status:n.hasOwnProperty("items")&&n.items.length>0?t.statusText:"no_results",statusCode:t.status,queryText:e,profile:r.props.profile,locale:r.props.locale})},p=function(t,n){void 0!==window.dataLayer&&"object"==typeof window.dataLayer||(window.dataLayer=[]),window.dataLayer.push({event:"system-action",eventCategory:"Sbox_Autocomplete_error",eventAction:n,eventLabel:r.props.profile}),r.nrPageAction("suggesterComponent",{autocompleteFrom:"suggester-service",status:n,statusCode:t.status,queryText:e,profile:r.props.profile,locale:r.props.locale}),r.setState({result:{error:"timeout"}})},d=function(e){r.showAutocomplete()};l.Ajax.get(n+c,t||1500,p,h,d)},r.showHistory=function(){r.props.history&&Array.isArray(r.props.history)&&r.props.history[0].hasOwnProperty("items")&&r.props.history[0].items[0]&&(r.props.history[0].items[0].hasOwnProperty("target")||r.state.historyFeature)?(r.setState({activeIndex:1,result:r.props.history}),r.showAutocomplete()):r.state.isModal&&r.noChars()},r.noChars=function(){r.setState({result:{error:r.props.isPoi?"more_characters_address":"more_characters"}}),r.showAutocomplete()},r.userClearInput=function(){r.props.activeItem=null,r._dispatchEvent("item-cleared",r.props.inputName)},r.hideMobileKeyboard=function(){r.props.inputMobile.blur()},r.hideAutocomplete=function(){document.body.removeEventListener("mousedown",r.blurInteraction),document.body.classList.remove("ac-show-modal"),r.setState({show:!1}),r.props.lastHint="",r._dispatchEvent("close",!0),r.props.acContainer.removeEventListener("touchstart",r.hideMobileKeyboard)},r.showAutocomplete=function(){document.body.addEventListener("mousedown",r.blurInteraction),r.state.isModal&&(document.body.classList.add("ac-show-modal"),r.props.acContainer.addEventListener("touchstart",r.hideMobileKeyboard)),r.state.show||r._dispatchEvent("open",!0),r.setState({show:!0})},r.showExternal=function(e){r.props.input===e.payload.input||r.state.show||(r.props.input&&r.props.input.removeEventListener("keyup",r.userWritingInteraction),r.props.input&&r.props.input.removeEventListener("keydown",r.userWritingInteraction),r.props.input=e.payload.input,r.props.inputName=e.payload.inputName||"",r.props.input.addEventListener("keydown",r.userWritingInteraction),r.props.input.addEventListener("keyup",r.userWritingInteraction)),r.props.history=e.payload.history||null,r.props.profile=e.payload.profile||r.props.profile,r.props.isPoi=e.payload.isPoi||!1,r.props.latitude=e.payload.latitude||!1,r.props.longitude=e.payload.longitude||!1,r.props.radius=e.payload.radius||!1,r.props.cityField=e.payload.cityField||!1,r.state.isModal&&r.showHistory();var t=e.payload.historyFeature||!1;r.setState({historyFeature:t}),r.calculateInputPosition(),r.userClickInteraction(e.payload.showHistory)},r.hideExternal=function(){r.hideAutocomplete()},r.updateHistory=function(e){r.props.history=e.payload},r.updateProfile=function(e){r.props.profile=e.payload},r.selectItem=function(){r.itemSelected(r.props.activeItem)},r._actionHandlers={show:r.showExternal,hide:r.hideExternal,selectItem:r.selectItem,updateHistory:r.updateHistory,updateProfile:r.updateProfile,search:r.searchExt},r.state.show=!1,r.state.top=0,r.state.arrowLeft=!0,r.state.left=0,r.state.showClearButton=!1,r.state.result=[],r.state.activeIndex=1,r.state.isModal=r.props.isModal||r.calculateIsModal(),r.props.zIndex=r.props.zIndex||1500,r.props.resizeOnScroll=r.props.resizeOnScroll||!1,r.props.topOffset=r.props.topOffset||0,r.props.leftOffset=r.props.leftOffset||0,r.props.history=r.props.history||null,r.props.isPoi=r.props.isPoi||!1,r.props.cityField=r.props.cityField||!1,r.props.baseURL=r.props.baseURL||"",r}return r(t,e),t.prototype.componentWillMount=function(){if("string"!=typeof this.props.locale)throw new Error("Locale property is required. (es_AR)")},t.prototype.componentDidMount=function(){this._dispatchEvent("mount",!0),this.initListeners()},t.prototype.componentWillUnmount=function(){this.removeListeners()},t.prototype.componentWillReceiveProps=function(e){this.i18nInstance&&this.i18nInstance.handleLocaleChanges(e)},t.prototype.shouldComponentUpdate=function(e,t){return this.customShallowCompare(this,e,t)},t.prototype.componentWillUpdate=function(e,t){this.props.locale!==e.locale&&this.propertyChangeEvent("locale",this.props.locale,e.locale)},t.prototype.propertyChangeEvent=function(e,t,n){this._dispatchEvent("property-change",{locale:{last:t,actual:n}})},t.prototype.componentDidUpdate=function(e,t){var n=this;t.isModal&&this.state.show&&!t.show&&this.props.inputMobile&&(this.hideMobileKeyboard(),setTimeout(function(){n.props.inputMobile.focus()},0))},t.prototype.bindInputMobile=function(e){this.props.inputMobile=e},t.prototype.itemSelected=function(e){this._dispatchEvent("item-selected",{item:e,name:this.props.inputName}),this.hideAutocomplete()},t.prototype.itemFocused=function(e){this.setState({activeIndex:e})},t.prototype.mobileUserWritingInteraction=function(e){this.setState({showClearButton:""!==this.props.inputMobile.value}),this.userWritingInteraction(e)},t.prototype.clearMobileInput=function(){this.props.inputMobile.value="",this.setState({showClearButton:!1}),this.props.inputMobile.focus(),this.showHistory()},t.prototype.calculateIsModal=function(){return window.innerWidth<767},t.prototype.userResize=function(){this.setState({isModal:this.calculateIsModal()}),this.state.isModal?this.state.show&&document.body.classList.add("ac-show-modal"):(this.reCalculateInputPosition(!0),document.body.classList.remove("ac-show-modal"))},t.prototype.calculateInputPosition=function(){var e=this.props.input.getBoundingClientRect();window.innerWidth>e.left+500?this.setState({arrowLeft:!0,top:e.top+e.height+this.props.topOffset+window.pageYOffset,left:e.left+this.props.leftOffset+window.pageXOffset}):this.setState({arrowLeft:!1,top:e.top+e.height+this.props.topOffset+window.pageYOffset,left:e.left+this.props.leftOffset+window.pageXOffset-(500-e.width)})},t.prototype.reCalculateInputPosition=function(e){var t=this;(!this.state.isModal&&this.state.show||e)&&this.props.input&&(clearTimeout(this.timerScroll),this.timerScroll=setTimeout(function(){t.calculateInputPosition()},50))},t.prototype.closeModal=function(){this.hideAutocomplete(),this.setState({showClearButton:!1}),this.itemNotSelected()},t.prototype.getItemIndex=function(){return this.lastIndex+=1,this.lastIndex},t.prototype.setActiveItem=function(e){this.props.activeItem=e},t.prototype.render=function(e,t){var n=this,r=t.result.hasOwnProperty("error"),o=t.result&&t.result[0]&&t.result[0].hasOwnProperty("group"),l=t.result&&t.result[0]&&t.result[0].hasOwnProperty("title"),c={display:"fixed","z-index":e.zIndex},h={left:t.left+"px",top:t.top+"px","z-index":e.zIndex},p=t.isModal?c:h;return this.lastIndex=0,s.h("div",{className:"ac-wrapper"+(t.isModal?"":" -desktop")+(o||r||l?"":" -facet")+(t.arrowLeft||t.isModal?"":" -arrow-right")+(t.show?" -show":"")+(t.historyFeature?" sbox-ab-ls":""),style:p},t.isModal?s.h(f.MobileHeader,{closeModal:this.closeModal.bind(this),clearMobileInput:this.clearMobileInput.bind(this),showClearButton:this.state.showClearButton,blurInteraction:this.blurInteraction.bind(this),writingInteraction:this.mobileUserWritingInteraction.bind(this),bindInputMobile:this.bindInputMobile.bind(this),i18n:this.i18n.bind(this)}):null,s.h("div",{"class":"ac-container",ref:function(e){n.props.acContainer=e}},r?s.h(u.ItemError,i({},t.result,{i18n:this.i18n.bind(this),isModal:t.isModal,activeItemHandler:this.setActiveItem.bind(this)})):o||l?t.result.map(function(e){return s.h(a.ItemGroup,{results:e,activeIndex:t.activeIndex,getItemIndex:n.getItemIndex.bind(n),onItemFocused:n.itemFocused.bind(n),onClick:n.itemSelected.bind(n),isHistory:l,historyFeature:t.historyFeature,activeItemHandler:n.setActiveItem.bind(n),isGroup:o})}):s.h(a.ItemGroup,{results:t.result,activeIndex:t.activeIndex,getItemIndex:this.getItemIndex.bind(this),onItemFocused:this.itemFocused.bind(this),onClick:this.itemSelected.bind(this),isHistory:l,activeItemHandler:this.setActiveItem.bind(this),historyFeature:t.historyFeature,isGroup:o})))},t}(c.CoreComponent);t.Component=d},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.i18nDefinitions={close_modal:{es:"Cancelar",en:"Cancel",pt:"Cancelar"},clear_button:{es:"Borrar",en:"Clear",pt:"Apagar"},timeout:{es:"Ups! Estamos tardando más de lo normal...",en:"Oops! It's taking longer than usual...",pt:"Ops! estamos demorando mais que o normal..."},more_characters:{es:"Ingresa al menos 3 letras, y aguarda los resultados",en:"Enter at least 3 letters, then wait for the results",pt:"Digite ao menos 3 letras e aguarde os resultados"},more_characters_address:{es_AR:"Ingresá por lo menos 3 letras si buscás un hotel, o la calle y altura si buscás una dirección",es:"Ingresa por lo menos 3 letras si buscas un hotel, o la calle y altura si buscas una dirección",en:"Enter at least 3 characters to look for a hotel, or the street and house number to look for an address",pt:"Insira pelo menos 3 letras ao buscar um hotel, ou o nome da rua e o número se for um endereço"},mobile_placeholder:{es:"Ingresa al menos 3 letras",en:"Enter at least 3 letters",pt:"Digite pelo menos 3 letras"},no_results:{es:"No se encontraron resultados que coincidan con ",en:"No results were found that match with ",pt:"Não foram encontrados resultados que contenham "},no_results_address:{es_AR:". Si estás buscando una dirección, recordá ingresar la altura",es:". Si estás buscando una dirección, recuerda ingresar la altura",en:". If you're looking for an address, remember to enter the house number",pt:". Se está buscando um endereço, lembre-se de inserir o número"}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.ItemError=function(e){var t=e,n=t.hasOwnProperty("hint"),i=t.i18n(t.error),s=t.hasOwnProperty("errorAddress")&&t.errorAddress?t.i18n(t.errorAddress):null;return t.activeItemHandler(null),r.h("div",{className:"ac-group-container"+(n&&t.isModal?" -no-results":"")},r.h("div",{"class":"ac-group-title-container -error"},r.h("i",{className:(n?"ac-group-title-icon suggester-icon-search ":"")+(t.isModal&&n?"suggester-icon-lg":"suggester-icon-sm")}),r.h("span",{"class":"ac-group-title"},i," ",n?r.h("span",{"class":"ac-group-hint-error"},t.hint):null," ",s)))}},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=n(9),u=n(1),a=n(10);t.ItemGroup=function(e){var t=e,n=t.results.items||t.results;return t.historyFeature&&t.isHistory?s.h(a.HistoryItemContainer,r({history:t.results},t)):s.h("div",{"class":"ac-group-container"},t.isGroup&&s.h("div",{"class":"ac-group-title-container"},s.h("div",{"class":"ac-group-title-icon"},s.h("i",{className:"suggester-icon-xsm "+u.getEvaIconName(t.results.group)})," "),s.h("span",{"class":"ac-group-title eva-3-overline-2"},t.results.display)),t.isHistory&&s.h("div",{"class":"ac-group-title-container"},s.h("span",{"class":"ac-group-title eva-3-overline-2"},t.results.title)),s.h("ul",{"class":"ac-group-items"},n&&n.map(function(e){var n=t.getItemIndex();return[s.h(o.Item,{item:e,onClick:t.onClick.bind(i,e),activeIndex:t.activeIndex,onItemFocused:t.onItemFocused.bind(i,n),itemIndex:n,isHistory:t.isHistory,activeItemHandler:t.activeItemHandler,showIcon:!t.isGroup||t.isHistory}),e.refinements?e.refinements.map(function(n){var r=t.getItemIndex();return e.hasOwnProperty("city")&&(n.city=e.city),s.h(o.Item,{item:n,activeIndex:t.activeIndex,itemIndex:r,isRefinement:!0,isHistory:t.isHistory,onItemFocused:t.onItemFocused.bind(i,r),onClick:t.onClick.bind(i,n),activeItemHandler:t.activeItemHandler,showIcon:!t.isGroup||t.isHistory})}):null]})))}},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(1);t.Item=function(e){var t={showIcon:!1,isRefinement:!1},n=function(e){if((new RegExp("<em>(.+?)</em>")).test(e)){var t=e.replace(/<em>/,"").replace(/<\/em>/,"");return i.h("em",null,t)}return e},u=r({},t,e);return u.activeIndex===u.itemIndex&&u.activeItemHandler(u.item),i.h("li",{onMouseDown:u.onClick,onMouseEnter:u.onItemFocused,className:"item"+(u.activeIndex===u.itemIndex?" -active":"")},u.showIcon&&i.h("i",{className:"ac-item-icon suggester-icon-xsm "+s.getEvaIconName(u.item.target.type)}),u.isRefinement&&i.h("div",{"class":"ac-item-refinement-icon"},i.h("i",{className:" suggester-icon-xsm suggester-icon-subarrow-bold-right"})),i.h("span",{"class":"item-text"},u.item.highlight&&!u.isHistory?function(e){var t=new RegExp("(<em>.+?</em>)");return e.split(t)}(u.item.highlight).map(function(e){return n(e)}):u.item.display))}},function(e,t,n){var r=this;Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(1),o=n(11);t.HistoryItemContainer=function(e){var t=e,n=e.history;return i.h("div",{"class":"ac-group-container"},i.h("div",null,i.h("div",{"class":"ac-group-title-container"},i.h("div",{"class":"ac-group-title-icon"},i.h("i",{className:"suggester-icon-xsm "+s.getEvaIconName(n.icon)})),i.h("span",{"class":"ac-group-title eva-3-overline-2"},n.title)),i.h("ul",{"class":"ac-group-items"},n.items.map(function(e){var n=t.getItemIndex();return i.h(o.HistoryItem,{item:e,onClick:t.onClick.bind(r,e),activeIndex:t.activeIndex,onItemFocused:t.onItemFocused.bind(r,n),itemIndex:n,isHistory:t.isHistory,activeItemHandler:t.activeItemHandler})}))))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.HistoryItem=function(e){e.activeIndex===e.itemIndex&&e.activeItemHandler(e.item);var t=e.item;return r.h("div",{"class":"history-item"+(e.activeIndex===e.itemIndex?" -active":""),onMouseDown:e.onClick,onMouseEnter:e.onItemFocused},r.h("div",{"class":"history-item__picture"},r.h("img",{src:t.picture})),r.h("div",{"class":"history-item__aside"},r.h("div",{"class":"history-item__title"},t.title),r.h("div",{"class":"history-item__subtitle "},t.subtitle),r.h("div",{"class":"history-item__subtitle "},t.subtitle2_1)))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.MobileHeader=function(e){var t=e;return r.h("div",{"class":"ac-header"},r.h("div",{"class":"ac-close-container"},r.h("div",{onClick:t.closeModal,"class":"ac-close-modal "},r.h("i",{"class":"suggester-icon-md suggester-icon-arrow-bold-left"},r.h("span",{"class":"ac-close-modal-txt"},t.i18n("close_modal"))))),r.h("div",{"class":"ac-input-mobile-container"},r.h("input",{className:"ac-input-mobile"+(t.showClearButton?" -borrar":""),placeholder:t.i18n("mobile_placeholder"),onKeyUp:t.writingInteraction,ref:function(e){return t.bindInputMobile(e)}}),t.showClearButton?r.h("span",{"class":"ac-borrar",onClick:t.clearMobileInput},r.h("i",{"class":"suggester-icon-md suggester-icon-close"},r.h("span",{"class":"ac-borrar-txt"},t.i18n("clear_button")))):null))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){try{var s=new XMLHttpRequest;s.open("GET",encodeURI(e),!0),s.timeout=t||1500,s.onreadystatechange=function(){if((s.status>=200&&s.status<300||304===s.status)&&4===s.readyState){var e=JSON.parse(s.responseText);r(s,e)}else 200!==s.status&&n(s,"service_error");i(s)},s.ontimeout=function(){n(s,"timeout")},s.send()}catch(e){}};t.Ajax={get:r}},function(e,t,n){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(15),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.i18n=function(e,n){return r.i18nInstance instanceof s.I18n||(r.i18nInstance=new s.I18n(r.i18nDefinitions,t.locale)),r.i18nInstance.getText(e,n)},r._eventListeners={},r}return r(t,e),t.prototype.dispatchAction=function(e){if("function"!=typeof e.callback&&(e.callback=function(){}),!e||"string"!=typeof e.type||!this._actionHandlers||"function"!=typeof this._actionHandlers[e.type])throw new Error("Could not send action type:"+(e&&e.type?e.type:"not defined"));this._actionHandlers[e.type](e)},t.prototype.subscribe=function(e){e.type in this._eventListeners||(this._eventListeners[e.type]=[]),this._eventListeners[e.type].push(e.callback)},t.prototype.unSubscribe=function(e){if(e.type in this._eventListeners)for(var t=this._eventListeners[e.type],n=0,r=t.length;n<r;n++)if(t[n]===e.callback)return void t.splice(n,1)},t.prototype._dispatchEvent=function(e,t){if(e in this._eventListeners)for(var n=this._eventListeners[e],r=0,i=n;r<i.length;r++){var s=i[r];s(t)}},t}(i.Component);t.CoreComponent=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.createLiteral=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new(Function.bind.apply(Function,[void 0].concat(t,['return "'+e.replace(/__\(/g,'" + (').replace(/\)__/g,') + "')+'"'])))},this.definitions=e,this.locale=t}return e.prototype.handleLocaleChanges=function(e){this.locale=e.locale},e.prototype.getText=function(e,t){var n=this.locale.split(/[_-]/),r=n[0].toLowerCase(),i=n[1].toUpperCase(),s=r+"_"+i,o=this.definitions[e];if(void 0===o)throw new Error("i18n dictionary, doesn't contains a definition for key: '"+e+"'");var u=null;if(o[s])u=o[s];else{if(!o[r])throw new Error("i18n dictionary, doesn't contains a definition for key: '"+e+"' in "+r);u=o[r]}if(t){var a=Object.getOwnPropertyNames(t),f=a.map(function(e){return t[e]});u=this.createLiteral.apply(this,[u].concat(a)).apply(void 0,f)}return u},e}();t.I18n=r},function(e,t){e.exports={version:"1.3.4"}}])}),define("common.module/js/transforms/geoMapper",[],function(){var e=function(e){var t={BUS:"b",PORT:"p",HELM:"e",GROUPED_AIRPORT:"g",COUNTRY:"q",REGION:"r",CITY:"c",AIRPORT:"a",HOTEL:"h",ACTIVITY:"i",ADMINISTRATIVE_DIVISION_CITY:"d",ZONE:"n"};return t[e]},t=function(e){var t={b:"BUS",p:"PORT",e:"HELM",g:"GROUPED_AIRPORT",q:"COUNTRY",r:"REGION",c:"CITY",a:"AIRPORT",h:"HOTEL",i:"ACTIVITY",d:"ADMINISTRATIVE_DIVISION_CITY",n:"ZONE"};return t[e]};return{fromFacetToType:e,fromTypeToFacet:t}}),define("common.module/js/facetTrackHelper",["common.module/js/transforms/geoMapper"],function(e){var t=function(t){var n="";return typeof t=="string"&&(t.length===1?n=e.fromTypeToFacet(t):n=t),n};return{getFullFacetName:t}}),define("common.module/js/latest-searches-remove-entries-rules",[],function(){function t(t){var n;return e.filterProductBy==="*"?n=e.versionByProduct[e.filterProductBy]:e.filterProductBy.indexOf(t)>-1?n=e.versionByProduct[t]:n=e.versionByProduct["default"],n}var e={filterProductBy:"*",versionByProduct:{"*":"3.3.104","default":"3.3.104",hotels:"3.3.104",flights:"3.3.104",packages:"3.3.104"}};return function(e){var n=t(e);return function(e){return!e.hasOwnProperty("version")||this.versionHelper(e.version).isMinorThan(n)}}}),define("common.module/js/queryParamsHelper",["underscore"],function(e){var t=function(e){return e.split("!")},n=function(e){return e.split(":")[0]},r=function(e){return e.split("-")[0]},i=function(e){return e.split("-")[1]||0},s=function(e){return e.split(":").length>1?e.split(":")[1].split("-"):[]},o=function(e,t){t=t||{startIndex:0};var o={},u=n(e);o.adults=+r(u),o.minors=+i(u);var a=s(e),f=/[a-z]/i.test(e);return a.map(function(e,n){if(f){o["minor_"+(n+t.startIndex)+"_inArms"]=!1;var r=/[a-z]+$/i;r.test(e)&&(o["minor_"+(n+t.startIndex)+"_inArms"]=!0)}o["minor_"+(n+t.startIndex)+"_age"]=e.match(/[a-z]+|[^a-z]+/gi)[0],isNaN(o["minor_"+(n+t.startIndex)+"_age"])||(o["minor_"+(n+t.startIndex)+"_age"]=+o["minor_"+(n+t.startIndex)+"_age"])}),o},u=function(n,r){var i={startIndex:1,inArmsEnabled:!1};r=e.extend({},i,r);var s={},u=t(n);return s.rooms=u.length,u.map(function(e,t){var n=o(e,r),i=Object.keys(n);i.map(function(e){s["room_"+(r.startIndex+t)+"_"+e]=n[e]})}),s},a=function(t,n){var s={startIndex:1,inArmsEnabled:!1,asRoom:!1};n=e.extend({},s,n);var a=n.asRoom||/!/.test(t),f=/:/.test(t),l=/-/.test(t);return a?u(t,n):f?o(t,n):l?{adults:parseInt(r(t)),minors:parseInt(i(t))}:{adults:+r(t)}},f=function(e){var t=e.adults,n=e.minors,r="";if(n!==0){for(var i=1;i<n;i++)r+=e["minor_"+i+"_age"],r+="-";r+=e["minor_"+i+"_age"],r=":"+r}return t+"-"+n+r},l=function(e){var t="",n,r,i;for(var s=1;s<e.rooms;s++){n=e["room_"+s+"_adults"],r=e["room_"+s+"_minors"],i="";if(r>0){for(var o=1;o<r;o++)i+=e["room_"+s+"_minor_"+o+"_age"],i+="-";i+=e["room_"+s+"_minor_"+o+"_age"],i=":"+i}t+=n+"-"+r+i+"!"}n=e["room_"+s+"_adults"],r=e["room_"+s+"_minors"],i="";for(var u=1;u<r;u++)i+=e["room_"+s+"_minor_"+u+"_age"],i+="-";return r>0&&(i=":"+i+e["room_"+s+"_minor_"+u+"_age"]),t+=n+"-"+r+i,t};return{getModelFromQuery:a,getQueryFromPassengersModel:f,getQueryFromRoomsModel:l}}),define("common.module/js/bestDayHelper",[],function(){return window.location.hostname.indexOf("bestday")>-1}),define("common.module/js/destinationComboHelper",["jquery"],function(e){var t=function(t,n){var r=e.ajax({type:"GET",url:"/suggestions?locale="+n+"&profile="+t,async:!1}).responseText;return JSON.parse(r).items},n=function(e,t){var n={destination_description:e.display,destination_type:e.target.type,destination_code:e.target.code||e.target.iata||e.target.id,destination_gid:e.target.gid,destination_oid:e.target.id,hotel_destination_gid:e.target.parents.city};t.set(n)},r=function(e){var t=document.createElement("option");return t.classList.add("select-option"),t.value=JSON.stringify(e),t.text=e.display,t},i=function(i,s){var o=t(i.get("profile_suggester"),s),u=document.createElement("select");u.classList.add("select-tag"),u.classList.add("-no-border");var a;for(var f=0;f<o.length;f++){var l=r(o[f]);f===0&&(a=l),u.appendChild(l);if(i.get("destination_gid")===o[f].target.gid||i.get("destination_code")===o[f].target.code||i.get("destination_oid")===o[f].target.id)n(o[f],i),l.selected=!0,a=!1}return a&&(a.selected=!0,n(JSON.parse(a.value),i)),e(u).change(function(){n(JSON.parse(e(this).val()),i)}),u};return{createDestinationCombo:i}}),define("common.module/js/getTypeTransformed",[],function(){return{longToShort:function(e){var t={BUS:"b",PORT:"p",HELM:"e",GROUPED_AIRPORT:"g",COUNTRY:"q",REGION:"r",CITY:"c",AIRPORT:"a",HOTEL:"h",ACTIVITY:"i",ADMINISTRATIVE_DIVISION_CITY:"d",ZONE:"n"};return e&&t[e.toUpperCase()]?t[e.toUpperCase()]:""},shortToLong:function(e){var t={b:"BUS",p:"PORT",e:"HELM",g:"GROUPED_AIRPORT",q:"COUNTRY",r:"REGION",c:"CITY",a:"AIRPORT",h:"HOTEL",i:"ACTIVITY",d:"ADMINISTRATIVE_DIVISION_CITY",n:"ZONE"};return e&&t[e.toUpperCase()]?t[e.toUpperCase()]:""}}}),define("boxes/packages.module/js/urlHelper",["underscore","common.module/js/getTypeTransformed"],function(e,t){var n=function(e,t,n,r,i){return{setAdultsAndChildren:function(s){t=t?t:0,s!==undefined&&(s<=r?(e.rooms[t].totalInfants++,e.totalInfants++):s>=n+1?(s<i+1?e.rooms[t].totalMinors++:(e.rooms[t].totalAdults++,s=null),e.totalAdults++):(e.rooms[t].totalMinors++,e.totalMinors++),s=s!==null?"-"+s:"",e.rooms[t].distribution+=s)},makeDistributionWithRooms:function(){e.roomsDistribution.push(e.rooms[t].totalAdults+e.rooms[t].distribution)}}},r=function(e,t){var r={totalAdults:0,totalMinors:0,totalInfants:0,rooms:[],roomsDistribution:[],distribution:""},i,s=0,o=0,u=t[e.combination_type]&&t[e.combination_type].maxInfantAge?t[e.combination_type].maxInfantAge:t.maxInfantAge,a=t[e.combination_type]&&t[e.combination_type].minorsMaxAge?t[e.combination_type].minorsMaxAge:t.minorsMaxAge,f=t[e.combination_type]&&t[e.combination_type].hotelsMinorsMaxAge?t[e.combination_type].hotelsMinorsMaxAge:t.hotelsMinorsMaxAge,l;for(var c=1;c<=e.rooms;c++){i=c-1,r.rooms[i]={totalAdults:0,totalMinors:0,totalInfants:0,distribution:""},o=e["room_"+c+"_adults"],r.rooms[i].totalAdults=r.rooms[i].totalAdults+o,r.totalAdults=r.totalAdults+o,l=n(r,i,a,u,f);for(var h=1;h<=e["room_"+c+"_minors"];h++)s=parseInt(e["room_"+c+"_minor_"+h+"_age"],10),s>=0&&l.setAdultsAndChildren(s);l.makeDistributionWithRooms()}return r.distributionRoom=r.roomsDistribution.join("!"),{distributionRoom:r.distributionRoom,totalAdults:r.totalAdults,totalMinors:r.totalMinors,totalInfants:r.totalInfants}},i=function(e,t){var r={totalAdults:e.adults,totalMinors:0,totalInfants:0,rooms:[{totalAdults:e.adults,totalMinors:0,totalInfants:0,distribution:""}],roomsDistribution:[],distribution:""},i=t[e.combination_type]&&t[e.combination_type].maxInfantAge?t[e.combination_type].maxInfantAge:t.maxInfantAge,s=t[e.combination_type]&&t[e.combination_type].minorsMaxAge?t[e.combination_type].minorsMaxAge:t.minorsMaxAge,o=0,u=n(r,0,s,i);for(var a=1;a<=e.minors;a++)o=parseInt(e["minor_"+a+"_age"],10),o>=0&&u.setAdultsAndChildren(o);return{totalAdults:r.totalAdults,totalMinors:r.totalMinors,totalInfants:r.totalInfants}},s=function(e){return e.length===1?e.toUpperCase():t.longToShort(e).toUpperCase()},o=function(t,n,o){var u="paquetes";n&&n.params&&n.params.language&&(n.params.language==="pt"?u="pacotes":n.params.language==="en"&&(u="packages"));var a={vh:"trip/start/FH/<%= origin_gid %>/<%= destination_gid %>/<%= start_date %>/<%= end_date %>/<%= hotel_destination_gid %>/<%= hotel_start_date %>/<%= hotel_end_date %>/<%= distribution %>?from=PSB&nw=true",vh_no_specified_date:u+"/<%= origin_key %>/<%= destination_key %>/?flow=V-H&from=PSB",vha:"cp/shop/search/<%= origin_type %><%= origin_oid %>/<%= destination_type %><%= destination_oid %>/<%= start_date %>/<%= end_date %>/<%= totalAdults %>/<%= totalMinors %>/<%= totalInfants %>/<%= hotel_destination_type %><%= hotel_destination_oid %>/<%= hotel_start_date %>/<%= hotel_end_date %>/<%= distributionRoom %>?flow=V-H-A&from=PSB&di=<%= distribution %>",bh:"cp/shop/search/<%= origin_type %><%= origin_oid %>/<%= destination_type %><%= destination_oid %>/<%= start_date %>/<%= end_date %>/<%= totalAdults %>/<%= totalMinors %>/<%= totalInfants %>/<%= hotel_destination_type %><%= hotel_destination_oid %>/<%= hotel_start_date %>/<%= hotel_end_date %>/<%= distributionRoom %>?flow=B-H&from=PSB&di=<%= distribution %>",va:"trip/start/FC/<%= origin_gid %>/<%= destination_gid %>/<%= start_date %>/<%= end_date %>/<%= start_date %>/<%= end_date %>/<%= distribution %>?from=PSB",ha:"cp/shop/search/<%= destination_type %><%= destination_oid %>/<%= start_date %>/<%= end_date %>/<%= distributionRoom %>/<%= destination_type %><%= destination_oid %>/<%= car_start_date %>:<%=car_start_time %>/<%= destination_type %><%= destination_oid %>/<%= car_end_date %>:<%=car_end_time %>?flow=H-A&from=PSB&di=<%= distribution %>",vhh:"trip/start/M/<%= origin_gid %>/<%= destination_gid %>/<%= start_date %>/<%= end_date %>/<%= hotel_destinations %>/<%= hotel_start_dates %>/<%= hotel_end_dates %>/<%= distribution %>?from=PSB",suggester:"trip/start/FH*/<%= origin_gid %>/<%= hotel_destination_gid %>/<%= start_date %>/<%= end_date %>/<%= hotel_destination_gid %>/<%= hotel_start_date %>/<%= hotel_end_date %>/<%= distribution %>?from=PSB&nw=true&hotel_ids=<%= destination_oid %>"};t.month_number_selected!=="-1"&&(a.vh_no_specified_date=u+"/<%= origin_key %>/<%= destination_key %>/?flow=V-H&departure_months=<%= month_number_selected %>&from=PSB"),o&&o.isCtrlBranch("sboxPackagesVaUrl")&&(a.va="shop/flights/results/CARS/roundtrip/<%= origin_key %>/<%= destination_key %>/<%= start_date %>/<%= end_date %>/<%= totalAdults %>/<%= totalMinors %>/<%= totalInfants %>?flow=V-A&from=PSB&di=<%= distribution %>");var f={},l={},c=t.profile_suggester!==""?"suggester":t.combination_type,h=e.template(a[c]);f.origin_type=s(t.origin_type),f.origin_key=t.origin_iata||t.origin_code,f.destination_type=s(t.destination_type),f.destination_key=t.destination_iata||t.destination_code,f.hotel_destination_type=s(t.hotel_destination_type),t.combination_type==="vh"&&t.no_specified_date===!0&&(h=e.template(a.vh_no_specified_date)),t.hotel_alternative_date_selected||(f.hotel_start_date=t.start_date,f.hotel_end_date=t.end_date),t.hotel_alternative_destination_selected||(f.hotel_destination_oid="NA",f.hotel_destination_type=""),t.advanced_options_selected||(f.hotel_destination_oid="NA",f.hotel_destination_type="",f.hotel_start_date=t.start_date,f.hotel_end_date=t.end_date),f.hotel_destination_gid=t.hotel_alternative_destination_selected||t.profile_suggester!==""?t.hotel_destination_gid||t.hotel_first_destination_gid:t.destination_gid,t.combination_type==="va"?l=i(t,n):l=r(t,n);var p={distribution:t.distribution};if(p.distribution){var d=p.distribution.split("!");for(var v=0;v<d.length;v++){var m=d[v];m.indexOf(":")===-1&&m.indexOf("-0")>-1&&(d[v]=m.split("-")[0])}p.distribution=d.join("!")}var g={};return t.combination_type==="vhh"&&(g.hotel_destinations=t.hotel_first_destination_gid,t.hotel_second_destination_gid&&(g.hotel_destinations+=","+t.hotel_second_destination_gid),g.hotel_start_dates=t.hotel_first_start_date,t.hotel_second_start_date&&(g.hotel_start_dates+=","+t.hotel_second_start_date),g.hotel_end_dates=t.hotel_first_end_date,t.hotel_second_end_date&&(g.hotel_end_dates+=","+t.hotel_second_end_date)),t=e.extend(t,l,p,g,f),h=h(t),h};return function(e,t,n){return o(e,t,n)}}),define("boxes/packages.module/js/bindings",["boxes/core.module/js/bindings","underscore","jquery","common.module/js/Datepicker/main","common.module/js/Datepicker/core/date-helper","common.module/js/Datepicker/core/i18n-helper","./timeHelper","common.module/js/dateHelper","common.module/js/EventTracking/EventTracking","common.module/js/changesManager","common.module/js/DistributionPicker/main","common.module/js/transforms/get-model-room-to-passenger-model","common.module/js/transforms/get-passenger-model-to-model-room","common.module/js/AutocompleteHistoryManager/helpers/items-is-valid","common.module/js/AutocompleteHistoryManager/main","common.module/js/AutocompleteHistoryManager/tracking","boxes/core.module/js/abTests","common.module/js/get-room-distribution","common.module/js/JeffSuggester/bundle","common.module/js/facetTrackHelper","common.module/js/latest-searches-remove-entries-rules","common.module/js/queryParamsHelper","common.module/js/bestDayHelper","common.module/js/destinationComboHelper","common.module/js/abHelper","./urlHelper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){var C={offsetInput:55},k=function(e,t,r,i,s){if(r.get("active_range")===t&&r.isVisible())r.hide();else{var o=n(e.currentTarget),u=o.offset();C.offsetInput=o.height();var a=n(i).offset();u.left-=a.left,u.top-=a.top,r.show(t,{x:u.left,y:u.top+C.offsetInput+7}),s&&s()}},L=function(){return function(){var e="es_ES",t=[{label:o.convertMinutesTohours(0,e),value:"00:00"}],n=0;while(n<1440-P.config.time_interval_minutes){n+=P.config.time_interval_minutes;var r=o.convertMinutesTohours(n,e);t.push({label:r,value:r})}return t}},A=function(e){return s[e].monthNames},O=function(){return function(){var e=i.convertToDateObject(P.config.currentDate),t=A(P.config.params.language),n=[{label:P.config.monthSelectorDefaultItem,value:"-1"}];for(var r=0;r<11;r++){var s=e.month-1,o=e.month>9?e.year+"-"+e.month:e.year+"-0"+e.month;n.push({label:t[s]+" "+e.year,value:o}),e.incrementMonth()}return n}},M=function(){function e(e,t){var n=e.attr("data-text"),r=null,i;return e.attr("data-text-"+t)&&(r=e.attr("data-text-"+t)),i=r?r:n,i}return{change_text:function(t,n){t.html(e(t,n))},change_placeholder:function(t,n){t.attr("placeholder",e(t,n))}}},_={has_profile_suggester:{deps:["profile_suggester"],get:function(e){return e!==""}},hide_date_in_icon:{deps:["start_date"],get:function(e){return e!==""}},hide_date_out_icon:{deps:["end_date"],get:function(e){return e!==""}},hide_date_in_icon_hotel_partial:{deps:["hotel_start_date"],get:function(e){return e!==""}},hide_date_out_icon_hotel_partial:{deps:["hotel_end_date"],get:function(e){return e!==""}},hide_date_in_icon_cars:{deps:["car_start_date"],get:function(e){return e!==""}},hide_date_out_icon_cars:{deps:["car_end_date"],get:function(e){return e!==""}},get_time:{get:L()},get_months:{get:O()},check_month_selector:{deps:["combination_type"],get:function(e){return e==="vh"}},combination_type_vh:{deps:["combination_type"],get:function(e){return e==="vh"}},combination_type_vhh:{deps:["combination_type"],get:function(e){return e==="vhh"}},combination_type_ha:{deps:["combination_type"],get:function(e){return e==="ha"}},combination_type_va:{deps:["combination_type"],get:function(e){return e==="va"}},minor_age_not_set_error:{deps:["combination_type","minor_age_errors","some_room_with_minor_age_error"],get:function(e,t,n){return e==="va"&&t.length>0||e!=="va"&&n}},show_origin_empty_error:{deps:["origin_errors"],get:function(e){return e.indexOf("OriginNotSet")>-1}},show_destination_empty_error:{deps:["destination_errors"],get:function(e){return e.indexOf("destinationNotSet")>-1}},show_destination_different_origin_error:{deps:["destination_errors"],get:function(e){return e.indexOf("destinationDifferentToOrigin")>-1}},show_no_checkin_hotel_partial_stay_error:{deps:["hotel_partial_stay_errors"],get:function(e){return e.indexOf("noCheckInDate")>-1}},show_no_checkout_hotel_partial_stay_error:{deps:["hotel_partial_stay_errors"],get:function(e){return e.indexOf("noCheckOutDate")>-1}},show_dates_out_of_range_hotel_partial_stay_error:{deps:["hotel_partial_stay_errors"],get:function(e){return e.indexOf("noSubSet")>-1}},show_no_checkin_cars_date_error:{deps:["cars_date_errors"],get:function(e){return e.indexOf("noCheckInDate")>-1}},show_no_checkout_cars_date_error:{deps:["cars_date_errors"],get:function(e){return e.indexOf("noCheckOutDate")>-1}},show_hotel_another_city_error:{deps:["hotel_another_city_errors"],get:function(e){return e.indexOf("hotelAnotherCityOidNotSet")>-1}},show_no_checkin_date_error:{deps:["date_errors"],get:function(e){return e.indexOf("noCheckInDate")>-1}},show_no_checkout_date_error:{deps:["date_errors"],get:function(e){return e.indexOf("noCheckOutDate")>-1}},show_minor_age_error_message:{deps:["minor_age_errors","some_room_with_minor_age_error","passengers_errors","no_specified_date"],get:function(e,t,n,r){if(this.model.get("combination_type")==="va")return e.length>0&&n.indexOf("moreChildrensOverArmsThanAdults")===-1;if(this.model.get("combination_type")==="vh"&&!r)return t&&n.indexOf("moreChildrensOverArmsThanAdults")===-1&&n.indexOf("maxPassengerExceeded")===-1;if(this.model.get("combination_type")==="ha")return t}},show_more_children_over_arms_than_adults_error_message:{deps:["minor_age_errors","some_room_with_minor_age_error","passengers_errors","no_specified_date"],get:function(e,t,n,r){if(this.model.get("combination_type")==="ha")return!t&&n.indexOf("moreChildrensOverArmsThanAdults")>-1;if(this.model.get("combination_type")==="va")return e.length===0&&n.indexOf("moreChildrensOverArmsThanAdults")>-1;if(this.model.get("combination_type")==="vh"&&!r)return!t&&n.indexOf("moreChildrensOverArmsThanAdults")>-1&&n.indexOf("maxPassengerExceeded")===-1}},dates_range:{deps:["start_date","end_date"],get:function(e,t){if(e&&t){var n=u.dateFromString(t)-u.dateFromString(e),r=(n/1e3/60/60/24).toFixed(0);return r<=0?"":r===1..toFixed(0)?r.toString()+" "+P.config.dayText:r.toString()+" "+P.config.daysText}return""}},dates_range_partial:{deps:["hotel_start_date","hotel_end_date"],get:function(e,t){if(e&&t){var n=u.dateFromString(t)-u.dateFromString(e),r=(n/1e3/60/60/24).toFixed(0);return r<=0?"":r===1..toFixed(0)?r.toString()+" "+P.config.dayText:r.toString()+" "+P.config.daysText}return""}},show_max_passengers_exceeded_error_message:{deps:["minor_age_errors","some_room_with_minor_age_error","passengers_errors","no_specified_date"],get:function(e,t,n,r){if(this.model.get("combination_type")==="va")return!1;if(this.model.get("combination_type")==="vh"&&!r)return!t&&n.indexOf("moreChildrensOverArmsThanAdults")===-1&&n.indexOf("maxPassengerExceeded")>-1;if(this.model.get("combination_type")==="ha")return!1}},show_generic_error_message:{deps:["minor_age_errors","some_room_with_minor_age_error","passengers_errors","no_specified_date"],get:function(e,t,n,r){var i=0;return this.model.get("combination_type")==="va"&&(i=Number(e.length>0)+Number(n.indexOf("moreChildrensOverArmsThanAdults")>-1)),this.model.get("combination_type")==="vh"&&!r&&(i=Number(t)+Number(n.indexOf("moreChildrensOverArmsThanAdults")>-1)+Number(n.indexOf("maxPassengerExceeded")>-1)),this.model.get("combination_type")==="ha"&&(i=Number(t)+Number(n.indexOf("moreChildrensOverArmsThanAdults")>-1)+Number(n.indexOf("maxPassengerExceeded")>-1)),i>1}},show_hotel_first_destination_has_errors:{deps:["hotel_first_destination_errors"],get:function(e){return e.length}},show_hotel_first_destination_empty_error:{deps:["hotel_first_destination_errors"],get:function(e){return e.indexOf("DestinationNotSet")>-1}},show_hotel_first_destination_different_from_origin_error:{deps:["hotel_first_destination_errors"],get:function(e){return e.indexOf("HotelFirstDestinationMustBeDifferentFromOrigin")>-1}},show_hotel_first_destination_date_start_has_errors:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.length}},show_hotel_first_destination_date_end_has_errors:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.length}},show_hotel_first_destination_date_start_empty_error:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.indexOf("noCheckInDate")>-1}},show_hotel_first_destination_date_start_no_subset_error:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.indexOf("noSubSet")>-1}},show_hotel_first_destination_date_end_empty_error:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.indexOf("noCheckOutDate")>-1}},show_hotel_first_destination_date_hole_error:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.indexOf("DateHole")>-1}},show_hotel_first_destination_date_overlap_error:{deps:["hotel_first_destination_date_errors"],get:function(e){return e.indexOf("DateOverlap")>-1}},show_hotel_second_destination_has_errors:{deps:["hotel_second_destination_errors"],get:function(e){return e.length}},show_hotel_second_destination_empty_error:{deps:["hotel_second_destination_errors"],get:function(e){return e.indexOf("DestinationNotSet")>-1}},show_hotel_second_destination_different_from_origin_error:{deps:["hotel_second_destination_errors"],get:function(e){return e.indexOf("HotelSecondDestinationMustBeDifferentFromOrigin")>-1}},show_hotel_second_destination_date_start_has_errors:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.length}},show_hotel_second_destination_date_end_has_errors:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.length}},show_hotel_second_destination_date_start_empty_error:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.indexOf("noCheckInDate")>-1}},show_hotel_second_destination_date_hole_error:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.indexOf("DateHole")>-1}},show_hotel_second_destination_date_overlap_error:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.indexOf("DateOverlap")>-1}},show_hotel_second_destination_date_end_empty_error:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.indexOf("noCheckOutDate")>-1}},show_hotel_second_destination_date_end_no_subset_error:{deps:["hotel_second_destination_date_errors"],get:function(e){return e.indexOf("noSubSet")>-1}}},D={".sbox-month-check":"checked:no_specified_date",".sbox-datein-container":"classes:{disabled:all(no_specified_date, combination_type_vh)}, attr:{ disabled: all(no_specified_date, combination_type_vh)}",".sbox-dateout-container":"classes:{disabled:all(no_specified_date, combination_type_vh)}, attr:{ disabled: all(no_specified_date, combination_type_vh)}","input.sbox-checkin-date":"classes:{disabled:all(no_specified_date, combination_type_vh)}, attr:{ disabled: all(no_specified_date, combination_type_vh)}","input.sbox-checkout-date":"classes:{disabled:all(no_specified_date, combination_type_vh)}, attr:{ disabled: all(no_specified_date, combination_type_vh)}",".sbox-bind-disable-date":'classes: { "sbox-disabled-date": no_specified_date }',".sbox-no-date-container":"toggle: combination_type_vh",".-vhh-dates-container":"toggle:not(all(no_specified_date, combination_type_vh))",".sbox-packages-month-selector":"classes: {'show': all(no_specified_date, combination_type_vh)}",".sbox-3-switch":"toggle:combination_type_vh",".sbox-title":"toggle: show_title",".sbox-advanced-options":"checked: advanced_options_selected",".sbox-advanced-options-check-container":"classes: { 'sbox-ui-hide' : all(combination_type_vh, no_specified_date, has_profile_suggester)}, toggle: all(combination_type_vh, not(no_specified_date), not(has_profile_suggester)), classes: { '-show-advanced-options' : all(advanced_options_selected, combination_type_vh, not(no_specified_date), not(has_profile_suggester))}",".sbox-advanced-options-row":"toggle: all(advanced_options_selected, combination_type_vh, not(no_specified_date), not(has_profile_suggester))",".sbox-vhh-container":"classes: { 'sbox-ui-hide' : not(combination_type_vhh)}",".sbox-partial-stay-checkin-date":"classes: { 'disabled': not(hotel_alternative_date_selected), 'sbox-ui-error-box': show_dates_out_of_range_hotel_partial_stay_error }, attr:{ disabled: not(hotel_alternative_date_selected) }",".sbox-partial-stay-checkout-date":"classes: { 'disabled': not(hotel_alternative_date_selected) }, attr:{ disabled: not(hotel_alternative_date_selected) }",".sbox-hotel-another-city-container":"classes: { '-invalid':show_hotel_another_city_error, 'disabled': not(hotel_alternative_destination_selected) }",".sbox-hotel-another-city":"classes: { '-disabled': not(hotel_alternative_destination_selected), attr:{ disabled: not(hotel_alternative_destination_selected)} }",".sbox-hotel-another-city-ui":"classes: { 'sbox-another-city-disabled-input': not(hotel_alternative_destination_selected) }",".sbox-hotel-partial-stay-ui":"classes:{ 'sbox-partial-stay-disabled': not(hotel_alternative_date_selected) }",".sbox-cars-dates-container":"toggle: combination_type_ha",".sbox-packages-container":"classes: { 'sbox-ui-combination-ha' : combination_type_ha, 'sbox-ui-combination-vh': combination_type_vh, 'sbox-ui-combination-va': combination_type_va, 'sbox-ui-combination-vhh': combination_type_vhh }",".sbox-ui-passangers-container":"classes: { '-md-12' : combination_type_ha }",".sbox-origin-container-col":"toggle: not(combination_type_ha)",".sbox-destination-container-col":"classes: { 'full-tr' : combination_type_ha }",".sbox-destination-container-col-tr":"classes: { '-sm-12' : combination_type_ha }",".sbox-distri-input-container":"classes:{ '-disabled': all(combination_type_vh, no_specified_date ) }, disabled: all( combination_type_vh, no_specified_date )",".sbox-guests":"classes:{ 'disabled': all(combination_type_vh, no_specified_date ), '-sbox-3-no-radius-left': combination_type_vh }, disabled: all( combination_type_vh, no_specified_date )",".sbox-rooms-container":"classes:{ '-invalid': any( show_minor_age_error_message, show_more_children_over_arms_than_adults_error_message, show_max_passengers_exceeded_error_message, show_generic_error_message ) },toggle: not(combination_type_va)",".sbox-passengers-container":"classes:{ 'sbox-ui-no-alert-tooltip': all(minor_age_not_set_error, not( all(combination_type_vh, no_specified_date ) )) }",".sbox-distribution-minor-age-error-message":"toggle: show_minor_age_error_message, classes:{ 'sbox-ui-wide-error-message': any(combination_type_vh, combination_type_ha) }",".sbox-distribution-more-children-over-arms-than-adults-error-message":"toggle: show_more_children_over_arms_than_adults_error_message, classes:{ 'sbox-ui-wide-error-message': any(combination_type_vh, combination_type_ha) }",".sbox-distribution-max-passengers-exceeded-error-message":"toggle: show_max_passengers_exceeded_error_message, classes:{ 'sbox-ui-wide-error-message': any(combination_type_vh, combination_type_ha) }",".sbox-distribution-generic-error-message":"toggle: show_generic_error_message, classes:{ 'sbox-ui-wide-error-message': any(combination_type_vh, combination_type_ha) }",".sbox-guests-container":"classes:{ '-invalid': any( show_minor_age_error_message, show_more_children_over_arms_than_adults_error_message, show_max_passengers_exceeded_error_message, show_generic_error_message ) }",".sbox-passengers-picker-container":"classes:{ 'sbox-ui-error-box':  any( show_minor_age_error_message, show_more_children_over_arms_than_adults_error_message, show_max_passengers_exceeded_error_message, show_generic_error_message ) }",".sbox-passangers-row-container":"classes: { 'sbox-ui-breakline': combination_type_ha }",".sbox-check-exact-date":"toggle:check_month_selector, classes: { 'sbox-ui-hide' : has_profile_suggester}",".sbox-hotel-partial-stay":"checked:hotel_alternative_date_selected",".sbox-hotel-another-city-check":"checked:hotel_alternative_destination_selected",".sbox-cars-checkin":"value:car_start_date_description",".sbox-cars-checkout":"value:car_end_date_description",".sbox-cars-timein":"options:get_time,value:car_start_time",".sbox-cars-timeout":"options:get_time,value:car_end_time",".sbox-checkin-date":"change_placeholder:combination_type",".sbox-checkout-date":"change_placeholder:combination_type",".sbox-dates-range":"text:dates_range",".sbox-dates-range-partial":"text:dates_range_partial",".sbox-month-seletor":"options:get_months,value:month_number_selected",".sbox-origin-container":"classes:{'-invalid':show_origin_empty_error}",".sbox-destination-container":"classes:{'-invalid':any(show_destination_empty_error, show_destination_different_origin_error), 'sbox-ui-hide' : has_profile_suggester}",".sbox-destination-different-origin-error":"toggle:show_destination_different_origin_error",".sbox-destination-error":"toggle:show_destination_empty_error",".sbox-checkin-container":"classes:{'-invalid':show_no_checkin_date_error, 'sbox-ui-no-icon': hide_date_in_icon}, change_text:combination_type",".sbox-checkout-container":"classes:{'-invalid':show_no_checkout_date_error, 'sbox-ui-no-icon': hide_date_out_icon}, change_text:combination_type",".sbox-partial-hotel-checkin-container":"classes:{'-invalid':any(show_no_checkin_hotel_partial_stay_error, show_dates_out_of_range_hotel_partial_stay_error), 'sbox-ui-no-icon': hide_date_in_icon_hotel_partial, '-disabled': not(hotel_alternative_date_selected) }",".sbox-partial-hotel-checkout-container":"classes:{'-invalid':any(show_no_checkout_hotel_partial_stay_error, show_dates_out_of_range_hotel_partial_stay_error), 'sbox-ui-no-icon': hide_date_out_icon_hotel_partial, '-disabled': not(hotel_alternative_date_selected)}",".sbox-cars-checkin-container":"classes: {'-invalid' : show_no_checkin_cars_date_error, 'sbox-ui-no-icon': hide_date_in_icon_cars}",".sbox-cars-checkout-container":"classes: {'-invalid' : show_no_checkout_cars_date_error, 'sbox-ui-no-icon': hide_date_out_icon_cars}",".sbox-no-checkout-hotel-partial-stay-error":"toggle: show_no_checkout_hotel_partial_stay_error",".sbox-dates-out-of-range-partial-stay-error":"toggle: show_dates_out_of_range_hotel_partial_stay_error",".sbox-dates-out-of-range-partial-stay-error-checkin":"toggle: show_no_checkin_hotel_partial_stay_error",".sbox-dates-out-of-range-partial-stay-error-checkout":"toggle: show_no_checkout_hotel_partial_stay_error",".sbox-hotel-first-destination-container":"classes:{'-invalid':show_hotel_first_destination_has_errors}",".sbox-hotel-first-destination-empty-error":"toggle: show_hotel_first_destination_empty_error",".sbox-hotel-first-destination-different-from-origin-error":"toggle: show_hotel_first_destination_different_from_origin_error",".sbox-hotel-first-date-end-container":"classes: {'-invalid' : any(show_hotel_first_destination_date_end_empty_error, show_hotel_first_destination_date_start_no_subset_error, show_hotel_first_destination_date_hole_error, show_hotel_first_destination_date_overlap_error) }",".sbox-hotel-first-destination-date-end-empty-error":"toggle: show_hotel_first_destination_date_end_empty_error",".sbox-hotel-first-destination-date-parent-out-range-error":"toggle: show_hotel_first_destination_date_start_no_subset_error",".sbox-hotel-first-destination-date-hole-error":"toggle: show_hotel_first_destination_date_hole_error",".sbox-hotel-first-destination-date-overlap-error":"toggle: show_hotel_first_destination_date_overlap_error",".sbox-hotel-second-destination-container":"classes:{'-invalid':show_hotel_second_destination_has_errors}",".sbox-hotel-second-destination-empty-error":"toggle: show_hotel_second_destination_empty_error",".sbox-hotel-second-destination-different-from-origin-error":"toggle: show_hotel_second_destination_different_from_origin_error",".sbox-hotel-second-date-start-container":"classes: {'-invalid' : any(show_hotel_second_destination_date_start_empty_error, show_hotel_second_destination_date_hole_error, show_hotel_second_destination_date_overlap_error, show_hotel_second_destination_date_end_no_subset_error )  }",".sbox-hotel-second-destination-date-start-empty-error":"toggle: show_hotel_second_destination_date_start_empty_error",".sbox-hotel-second-destination-date-hole-error":"toggle: show_hotel_second_destination_date_hole_error",".sbox-hotel-second-destination-date-overlap-error":"toggle: show_hotel_second_destination_date_overlap_error",".sbox-hotel-second-destination-date-parent-out-range-error":"toggle: show_hotel_second_destination_date_end_no_subset_error ",".sbox-label-dynamic-text":"change_text:combination_type"},P={};return function(i){function lt(e){var t={vh:"sbox-cp-vh",vhh:"sbox-cp-vh",va:"sbox-flights"};return t[e]||"sbox-cp-vh"}P=i;var s=!0,o=null,v=null,m=null,L=null,A=null,O=null,H=null,B=null,j=null,F=P.config.params.language,I=P.config.maxAvailableDays,q=new a("packages-sbox"),R={vhh:{maxAvailableDays:I},vh:{maxAvailableDays:I},vha:{maxAvailableDays:I},va:{maxAvailableDays:I},ha:{maxAvailableDays:I},bh:{maxAvailableDays:P.config.bh.maxAvailableDays}},U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at=null,ft=null,ct=P.commonConfig.context?"Sbox_"+P.commonConfig.context:"Sbox",ht="VH",pt=new f("Packages",ct,{autocompleteOrigin:!0,autocompleteDestination:!0,distriPicker:!0,datePicker:!0,searchType:!0,searchWithDates:!0,advancedOptions:!0,initBundle:!0,bundleChange:!0,datePickerSecond:!0,autocompleteTypeSearch:!0});return pt.init(),e.extend({setPrimarySelect:function(){this.model.get("combination_type")==="ha"?n(".sbox-secondary",this.$el).select():n(".sbox-primary",this.$el).select()},setSecondarySelect:function(){this.model.get("combination_type")!=="ha"&&n(".sbox-secondary",this.$el).select()},bindings:D,bindingHandlers:t.extend(e.prototype.bindingHandlers,M(P)),events:{"click .sbox-close-icon":"hideSbox","click .sbox-search":"_search","click .sbox-radio-selected-box":"click_combination_type","click .sbox-checkin-input-container":"showCheckinDate","click .sbox-checkout-input-container":"showCheckoutDate","click .sbox-partial-hotel-checkin-container":"showHotelPartialStayCheckinDate","click .sbox-partial-hotel-checkout-container":"showHotelPartialStayCheckoutDate","click .sbox-cars-checkin":"showCarsCheckinDate","click .sbox-cars-checkout":"showCarsCheckoutDate","click .sbox-hotel-first-date-end-input-container":"showHotelFirstCheckoutDate","click .sbox-hotel-second-date-start-input-container":"showHotelSecondCheckinDate","click .sbox-passengers-picker-container":"showDistributionPicker"},_search:function(){if(!this.model.isValid())this.trackSearchErrors();else{this.trackModelChanges();var e=N(this.model.toJSON(),this.model.options.config,new T(this.model.options.commonConfig.ab)),t={ocgid:this.model.attributes.origin_gid,dcgid:this.model.attributes.destination_gid,dchgid:this.model.attributes.hotel_destination_gid,target_url:e};this.model.attributes.combination_type==="vh"&&(t.fdi=g(this.model.attributes)),this.upaSendTrack(P,t)}this.search()},blurElement:function(e){e.currentTarget.blur()},showDistributionPicker:function(e){if((this.model.get("combination_type")!=="vh"||!this.model.get("no_specified_date"))&&!A.isVisible()&&!O.isVisible()){var t=n(e.currentTarget);C.offsetInput=t.height();var r=t.offset(),i=n(".distpicker-rooms-packages"),s=i.offset(),u=0,a={x:r.left-s.left+u,y:r.top+C.offsetInput+7};(this.model.get("combination_type")==="vh"||this.model.get("combination_type")==="vhh"||this.model.get("combination_type")==="ha")&&A.show(a),this.model.get("combination_type")==="va"&&O.show(a),A.isMobileViewport||n(".sbox-distribution-picker-wrapper",o).addClass("sbox-ui-open-distri"),this.trackModals(P,"open_disti_picker")}else if(A.isVisible()||O.isVisible())A.close(),O.close();document.activeElement.blur()},trackModelChanges:function(){var e=this.model;e.get("no_specified_date")&&e.get("combination_type")==="vh"?pt.noChange("searchWithDates"):pt.change("searchWithDates"),e.get("combination_type")==="vh"&&e.get("hotel_alternative_destination_selected")?pt.setSearchType("MD"):pt.setSearchType("RT"),e.get("advanced_options_selected")&&e.get("combination_type")==="vh"?pt.change("advancedOptions"):pt.noChange("advancedOptions"),pt.setText("initBundle","InitBundle"+ht),e.get("combination_type").toUpperCase()===ht?pt.setText("bundleChange",""):pt.setText("bundleChange","BundleChange"+e.get("combination_type").toUpperCase());var t=e.attributes.destination_type;pt.setText("facet",b.getFullFacetName(t)),pt.track()},trackSearchErrors:function(){var e=this.model;if(e.validationError&&e.validationError.tracking instanceof Array){var t=e.validationError.tracking;for(var n in t){var r=t[n];r!==undefined&&r!==""&&q.track("system-action","error",r)}}},click_combination_type:function(e){var t=n(e.currentTarget).val();e.stopPropagation(),this.model.set({combination_type:t}),H(),this.resetModelErrorStates()},advanced_options_selected:function(){return this.model.set({advanced_options_selected:!this.model.get("advanced_options_selected")}),!1},showCheckinDate:function(e){k(e,"start",v,".datepicker-packages",function(){this.trackModals(P,"open_datepicker"),this.model.set("no_specified_date",!1),this.trigger("onDatepickerShow",{domReference:v.me})}.bind(this))},showCheckoutDate:function(e){k(e,"end",v,".datepicker-packages",function(){this.model.set("no_specified_date",!1),this.trigger("onDatepickerShow",{domReference:v.me})}.bind(this))},showCarsCheckinDate:function(e){k(e,"start",m,".datepicker-packages-car",function(){this.trigger("onDatepickerShow",{domReference:m.me})}.bind(this))},showCarsCheckoutDate:function(e){k(e,"end",m,".datepicker-packages-car",function(){this.trigger("onDatepickerShow",{domReference:m.me})}.bind(this))},showHotelPartialStayCheckinDate:function(e){k(e,"start",L,".datepicker-packages-hotel-partial-stay",function(){this.model.set("hotel_alternative_date_selected",!0),this.trigger("onDatepickerShow",{domReference:L.me})}.bind(this))},showHotelPartialStayCheckoutDate:function(e){k(e,"end",L,".datepicker-packages-hotel-partial-stay",function(){this.model.set("hotel_alternative_date_selected",!0),this.trigger("onDatepickerShow",{domReference:L.me})}.bind(this))},showHotelFirstCheckoutDate:function(e){ft.hide(),k(e,"end",at,".datepicker-packages-hotel-first",function(){this.trigger("onDatepickerShow",{domReference:at.me})}.bind(this))},showHotelSecondCheckinDate:function(e){at.hide(),k(e,"start",ft,".datepicker-packages-hotel-second",function(){this.trigger("onDatepickerShow",{domReference:ft.me})}.bind(this))},computeds:_,initialize:function(){function Qt(e){var t;return e==="origin"?t=U:e==="destination"?t=z:e==="hotel_destination"?t=W:e==="hotel_first_destination"?t=nt:e==="hotel_second_destination"&&(t=rt),t}function Gt(e){var t;return e==="origin"?t=Zt:e==="destination"?t=en:e==="hotel_destination"?t=tn:e==="hotel_first_destination"?t=nn:e==="hotel_second_destination"&&(t=rn),t}function Yt(t,n,r,i){Xt.latest_searches(r).remove(function(e){return Vt.call(this,e)}).then(function(){Xt.get(r,function(e){n=Jt(e)})}),t.on("click focus",function(t){Kt.dispatch({type:"show",payload:{input:this,inputName:r,profile:i||lt(e.get("combination_type")),showHistory:t.type!=="focus",history:n,cityField:!0}})}),e.on("change:"+r+"_description",function(e,n){t.val(n)})}function an(){var t=e.get("adults"),n=e.get("minors");O.set("adults",t),O.set("minors",n);var r;for(var i=0;i<n;i++)r=e.get("minor_"+(i+1)+"_age"),O.set("minor_age",{minor:i,age:r})}function fn(){var t,n,r,i;i=e.get("rooms"),A.set("rooms",{value:i});for(var s=0;s<i;s++){n=e.get("room_"+(s+1)+"_adults"),A.set("adults",{room:s,adults:n}),r=e.get("room_"+(s+1)+"_minors"),A.set("minors",{room:s,minors:r});for(var o=0;o<r;o++)t=e.get("room_"+(s+1)+"_minor_"+(o+1)+"_age"),A.set("minor_age",{room:s,minor:o,age:t})}A.setConfigKey("minAgeToCarriedAChildInArms",bt),e.get("combination_type")==="ha"&&A.setConfigKey("minAgeToCarriedAChildInArms",wt)}function wn(t,n,r){r.from?(clearTimeout(bn),bn=setTimeout(function(){var n={};clearTimeout(bn),e.off(null,wn),t.get("hotel_first_start_date")||(t.set("hotel_first_start_date",t.get("start_date")),t.set("hotel_first_start_date_description",t.get("start_date_description"))),t.get("hotel_second_end_date")||(t.set("hotel_second_end_date",t.get("end_date")),t.set("hotel_second_end_date_description",t.get("end_date_description")));var r,i=e.get("distribution"),s=e.get("combination_type")!=="va"||i.indexOf("!")>-1;i&&cn&&(r=E.getModelFromQuery(i,{asRoom:s}),e.set(r));if(t.get("combination_type")!=="vhh"&&(!i||i==="2")){var o=s?E.getQueryFromRoomsModel(t.attributes):E.getQueryFromPassengersModel(t.attributes);t.set("distribution",o)}t.get("combination_type")==="va"?(n=T(),e.set(n),an()):(n=b(),e.set(n),fn()),H()},200)):e.off(null,wn)}var e=this.model,i=this,a=P.config.params.country,f=F+"-"+a,g=e.get("combination_type"),b=c(e),T=h(e),N=n("body"),k=N.children(".datepicker-packages"),M=N.children(".datepicker-packages-hotel-partial-stay"),_=N.children(".datepicker-packages-car"),D=N.children(".datepicker-packages-hotel-first"),I=N.children(".datepicker-packages-hotel-second"),ct={roundtrip:!0,showNightsTooltip:!0,today:P.config.currentDate,anticipationDate:P.config.firstAvailableDay,maxReservationDays:P.config.maxReservationDays,maxAvailableDays:R[g].maxAvailableDays,minReservationDays:P.config.minReservationDays,addReservationDays:0,language:F,lazyLoad:!1,showInfoHeader:!0,sboxName:"packages",noClearOnStartDate:!1},dt={checkinTitle:e.options.config.dateinPlaceHolder,checkoutTitle:e.options.config.dateoutPlaceHolder},vt={roundtrip:!0,showNightsTooltip:!0,today:P.config.currentDate,anticipationDate:P.config.firstAvailableDay,maxReservationDays:P.config.maxReservationDays,maxAvailableDays:R[g].maxAvailableDays,minReservationDays:P.config.minReservationDays,addReservationDays:0,language:F,lazyLoad:!1,showInfoHeader:!0},mt={checkinTitle:e.options.config.dateInHotelPartialStayPlaceHolder,checkoutTitle:e.options.config.dateOutHotelPartialStayPlaceHolder},gt={roundtrip:!0,showNightsTooltip:!1,today:P.config.currentDate,anticipationDate:P.config.firstAvailableDay,maxReservationDays:P.config.maxReservationDays,maxAvailableDays:R[g].maxAvailableDays,minReservationDays:P.config.minReservationDays,addReservationDays:0,language:F,lazyLoad:!1,showInfoHeader:!0},yt={checkinTitle:e.options.config.dateInCarPlaceHolder,checkoutTitle:e.options.config.dateOutCarPlaceHolder},bt=P.config.minAgeToCarriedAChildInArms,wt=P.config.ha.minAgeToCarriedAChildInArms,Et={componentType:"rooms",errors:["minors-without-age","exceeded-minors-in-arms","passengers-exceeded"],maxRooms:P.config.maxRooms,minAdultsPerRoom:1,minMinorsPerRoom:0,defaultAdultsPerRoom:P.config.defaultAdultsPerRoom,defaultMinorsPerRoom:P.config.defaultMinorsPerRoom,maxPassengersPerRoom:P.config.maxHostsPerRoom,maxPassengers:P.config.maxPassengers,minorsAgeSelection:!0,language:F,tooltipShow:!0,minAgeToCarriedAChildInArms:bt,distriInnerScroll:P.config.distriInnerScroll},St={componentType:"passengers",errors:["minors-without-age","exceeded-minors-in-arms"],minorsSelection:!0,minorsAgeSelection:!0,minorsSeatSelection:!1,maxPassengers:P.config.maxPassengers,minAdults:1,minMinors:0,language:P.config.params.language,minAgeToCarriedAChildInArms:bt,tooltipShow:!P.config.distriInnerScroll,distriInnerScroll:P.config.distriInnerScroll},xt={minorsInArmsExceededError:P.config.moreChildrenThanAdults,minorsWhitoutAgeError:P.config.minorsWithoutAge,passengersExceededError:P.config.passengersExceeded},Tt={adults:"adults",minors:"minors",rooms:"rooms"};for(var Nt=0;Nt<P.config.maxHostsPerRoom-1;Nt++){var Ct="minor_"+(Nt+1)+"_age",kt="minor_"+Nt+"_age";Tt[kt]=Ct}e.on("change:rooms",function(){H()});for(var Lt=0;Lt<P.config.maxRooms;Lt++){var At="room_"+(Lt+1)+"_adults",Ot="room_"+Lt+"_adults",Mt="room_"+(Lt+1)+"_minors",_t="room_"+Lt+"_minors";Tt[Ot]=At,Tt[_t]=Mt;for(Nt=0;Nt<P.config.maxHostsPerRoom-1;Nt++){var Dt="room_"+(Lt+1)+"_minor_"+(Nt+1)+"_age",Pt="room_"+Lt+"_minor_"+Nt+"_age";Tt[Pt]=Dt}(function(t){e.bind("change:"+t,function(){H()})})(At),function(t){e.bind("change:"+t,function(){H()})}(Mt)}e.on("change:adults",function(){H()}),e.on("change:minors",function(){H()});var Ht=n(".sbox-tooltip-more-children-than-adults",o),Bt=n(".sbox-tooltip-minors-without-age",o),jt=n(".sbox-tooltip-passengers-exceeded",o),Ft=n(".sbox-tooltip-several-distribution-messages",o),It=n(".distpicker-rooms-packages",o),qt=n(".distpicker-passengers-packages",o);o=this.$el,U=n(".sbox-origin",o),z=n(".sbox-destination",o),W=n(".sbox-hotel-another-city",o),X=n(".sbox-rooms",o),V=n(".sbox-guests",o),J=n(".sbox-message-rooms",o),K=n(".sbox-message-guests",o),Q=n(".sbox-cars-checkin",o),G=n(".sbox-cars-checkout",o),Y=n(".sbox-partial-stay-checkin-date",o),Z=n(".sbox-partial-stay-checkout-date",o),et=n(".sbox-checkin-date",o),tt=n(".sbox-checkout-date",o);var Rt=n(".sbox-title",o);S&&Rt.text(P.config.bestDayTitle),e.on("change:adults",function(){H()}),B=function(){if(e.get("profile_suggester")!==""){var t=n(".sbox-second-place-container .sbox-place-container",o);t.addClass("sbox-3-select"),t.addClass("-md");var r=n(".sbox-second-place-container .sbox-input-container",o);r.removeClass("sbox-input-container"),r.addClass("select-container"),r.innerHTML="";var i=x.createDestinationCombo(e,f);r.append(i)}},j=function(){var t=x.createDestinationCombo(e,f);n(".sbox-second-place-container .select-tag",o).replaceWith(t)},B(),e.on("change:profile_suggester",function(){B()}),nt=n(".sbox-hotel-first-destination",o),rt=n(".sbox-hotel-second-destination",o),it=n(".sbox-hotel-first-checkin-date",o),st=n(".sbox-hotel-first-checkout-date",o),ot=n(".sbox-hotel-second-checkin-date",o),ut=n(".sbox-hotel-second-checkout-date",o),o.on("click","label",function(e){var t=n(e.target).attr("data-for");t&&o.find("."+t).focus()});var Ut=function(){Ht.removeClass("show"),Bt.removeClass("show"),jt.removeClass("show"),Ft.removeClass("show")},zt=function(t){if(!e.hasOwnProperty("validationError")||e.validationError===null){switch(t){case"minors_in_arms_exceeded":Ht.addClass("show");break;case"minors_without_age":Bt.addClass("show");break;case"passengers_exceeded":jt.addClass("show");break;case"generic_distribution_error":Ft.addClass("show")}setTimeout(Ut,3e3)}};H=function(){var t;if(e.get("combination_type")==="vh"||e.get("combination_type")==="vhh"||e.get("combination_type")==="ha")t=A.get("distribution"),X.val(t.totalRooms),V.val(t.totalPassengers),J.text(t.totalRooms+" "+(t.totalRooms===1?e.options.config.roomText.toLowerCase():e.options.config.roomsText.toLowerCase())),K.text(t.totalPassengers+" "+(t.totalPassengers===1?e.options.config.personText.toLowerCase():e.options.config.peopleText.toLowerCase()));e.get("combination_type")==="va"&&(t=O.get("distribution"),V.val(t.totalPassengers),K.text(parseInt(t.totalPassengers)+" "+(t.totalPassengers===1?e.options.config.personText.toLowerCase():e.options.config.peopleText.toLowerCase())))};var Wt=function(e,t,n){var r={};return Object.keys(e).forEach(function(i){if(t.hasOwnProperty(i)){var s=t[i];r[s]=e[i]}else n||(r[i]=e[i])}),r},Xt=new d({box:"packages",language:F,country:a,latest_searches_enabled:!0,version:P.sboxVersion}),Vt=w("packages"),$t=function(e){return{iata:e.target.code||e.target.iata||e.target.id,code:e.target.code||e.target.iata||e.target.id,description:e.display,facet:e.target.type,gid:e.target.gid,object_id:e.target.id,type:e.target.type}},Jt=function(e){var t=[];return e[0].items.forEach(function(e){if(e&&!e.hasOwnProperty("target")){var n={};n.id=e.gid,n.target={id:e.object_id,gid:e.gid,iata:e.iata||e.code,code:e.iata||e.code,type:e.type},n.display=e.description,t.push(n)}else t.push(e)}),e[0].items=t,e},Kt=new y.JeffSuggester({locale:f,topOffset:15});Kt.subscribe({type:"item-cleared",callback:function(t){var n={};n[t+"_description"]="",n[t+"_type"]="",n[t+"_code"]="",n[t+"_city_code"]="",n[t+"_gid"]="",n[t+"_oid"]="",n[t+"_iata"]="",e.set(n)}}),Kt.subscribe({type:"open",callback:function(){i.trackModals(P,"open_autocomplete")}}),Kt.subscribe({type:"item-not-selected",callback:function(t){var n=e.get(t+"_description"),r=Qt(t);r.val(n),i.trackModals(P,"close_autocomplete")}}),Kt.subscribe({type:"item-selected",callback:function(t){var n=t.item,r={};r[t.name+"_description"]=n.display,r[t.name+"_type"]=n.target.type,r[t.name+"_code"]=n.target.code||n.target.iata||n.target.id,r[t.name+"_city_code"]=n.target.code||"",r[t.name+"_iata"]=n.target.iata,r[t.name+"_gid"]=n.target.gid,r[t.name+"_oid"]=n.target.id,t.name==="hotel_destination"&&(r[t.name+"_code"]=n.target.id);if(n.target.gid.indexOf("AIR_")>-1&&n.hasOwnProperty("city")&&n.city.hasOwnProperty("id")&&n.hasOwnProperty("city")&&n.city.hasOwnProperty("display"))if(t.name==="destination")r[t.name+"_airport_city_gid"]=n.city.id,r[t.name+"_airport_city_description"]=n.city.display;else if(t.name==="hotel_first_destination"||t.name==="hotel_first_destination")r[t.name+"_gid"]=n.city.id,r[t.name+"_description"]=n.city.display,r[t.name+"_code"]="",r[t.name+"_type"]="",r[t.name+"_oid"]="";e.set(r);var s=Gt(t.name);n.refinements=!1,i.trackModals(P,"apply_autocomplete"),p(n)&&Xt.latest_searches(t.name).add($t(n),function(){Xt.get(t.name,function(e){s=Jt(e)})}),n.change_event_tracker_id!=="undefined"&&n.change_event_tracker_id==="AutocompleteChangeLastSearch"?pt.setText("autocompleteTypeSearch","AutocompleteChangeLastSearch"):t.name==="origin"?pt.change("autocompleteOrigin"):t.name==="destination"&&pt.change("autocompleteDestination");var o=Qt(t.name);o.val(n.display),document.activeElement.blur()}}),Kt.mount();var Zt=null;Yt(U,Zt,"origin");var en=null;Yt(z,en,"destination");var tn=null;Yt(W,tn,"hotel_destination","sbox-cp-vh-city");var nn=null;Yt(nt,nn,"hotel_first_destination","sbox-cp-vh-city");var rn=null;Yt(rt,rn,"hotel_second_destination","sbox-cp-vh-city"),e.on("change:destination_gid",function(e,t,n){if(!e.get("profile_suggester")||e.get("profile_suggester")===""){if(!n.hasOwnProperty("from")||!e.get("hotel_first_destination_gid"))t.indexOf("AIR_")>-1?(e.set("hotel_first_destination_gid",e.get("destination_airport_city_gid")),e.set("hotel_first_destination_description",e.get("destination_airport_city_description"))):(e.set("hotel_first_destination_gid",t),e.set("hotel_first_destination_description",e.get("destination_description"))),e.set("hotel_first_destination_code",""),e.set("hotel_first_destination_type",""),e.set("hotel_first_destination_oid","")}else j()});var sn=function(){var t=e.get("start_date"),i=e.get("end_date"),o={roundtrip:!0,showNightsTooltip:!0,today:P.config.currentDate,anticipationDate:P.config.firstAvailableDay,maxReservationDays:P.config.maxReservationDays,maxAvailableDays:R.vhh.maxAvailableDays,minReservationDays:P.config.minReservationDays,addReservationDays:0,language:F,lazyLoad:!1,noClearOnStartDate:!0,fixCalculationMonthsToRender:!0};t&&(o.anticipationDate=t),i&&t&&(o.maxReservationDays=(u.dateFromString(i).getTime()-u.dateFromString(t).getTime())/1e3/60/60/24-1),D.length>0&&D.remove(),D=n(document.createElement("div")),D.addClass("datepicker-packages-hotel-first"),at=new r(D.get(0),o,mt),at.set("start-date",t),N.prepend(D),at.subscribe("date-selected",function(t,n){t==="end"&&e.set("hotel_first_end_date",n),document.activeElement.blur()}),at.subscribe("successfully-selection",function(){s?it.click():setTimeout(function(){at.hide()},300)}),at.subscribe("closing-confirmation",function(e){return e!==it.get(0)&&e!==st.get(0)})},on=function(){var t=e.get("start_date"),i=e.get("end_date"),o={roundtrip:!0,showNightsTooltip:!0,today:P.config.currentDate,anticipationDate:P.config.firstAvailableDay,maxReservationDays:P.config.maxReservationDays,maxAvailableDays:R.vhh.maxAvailableDays,minReservationDays:P.config.minReservationDays,addReservationDays:0,language:F,lazyLoad:!1,noClearOnStartDate:!0,fixCalculationMonthsToRender:!0};t&&(o.anticipationDate=u.dateToString(u.incrementDay(u.dateFromString(t),1),"-")),i&&(o.lastAvailableDate=i),I.length>0&&I.remove(),I=n(document.createElement("div")),I.addClass("datepicker-packages-hotel-second"),ft=new r(I.get(0),o,mt),N.prepend(I),ft.set("end-date",i),ft.subscribe("date-selected",function(t,n){t==="start"&&e.set("hotel_second_start_date",n),document.activeElement.blur()}),ft.subscribe("successfully-selection",function(){s||setTimeout(function(){ft.hide()},300)}),ft.subscribe("closing-confirmation",function(e){return e!==it.get(0)&&e!==st.get(0)})},un=function(){sn(),on(),e.on("change:hotel_first_start_date",function(e,t){var n=u.parseFullDateString(F,t);it.val(n),at.set("start-date",t)}),e.on("change:hotel_first_end_date",function(e,t){var n=u.parseFullDateString(F,t);st.val(n),at.set("end-date",t)}),e.on("change:hotel_second_start_date",function(e,t){var n=u.parseFullDateString(F,t);ot.val(n),ft.set("start-date",t)}),e.on("change:hotel_second_end_date",function(e,t){var n=u.parseFullDateString(F,t);ut.val(n),ft.set("end-date",t)})};e.options.config.hasOwnProperty("bundlesEnabled")&&e.options.config.bundlesEnabled.FlightsHotelsHotels&&un(),e.on("change:start_date",function(e,t,n){sn(),on(),n.hasOwnProperty("from")||(e.set("hotel_first_start_date",t),e.set("hotel_first_start_date_description",e.get("start_date_description")),e.set("hotel_first_end_date",""),e.set("hotel_first_end_date_description",""))}),e.on("change:end_date",function(e,t,n){sn(),on(),n.hasOwnProperty("from")||(e.set("hotel_second_start_date",""),e.set("hotel_second_start_date_description",""),e.set("hotel_second_end_date",t),e.set("hotel_second_end_date_description",e.get("end_date_description")))}),e.on("change:hotel_first_end_date",function(e,t){e.set("hotel_second_start_date",t)}),e.on("change:hotel_second_start_date",function(e,t){e.set("hotel_first_end_date",t)}),e.on("change:combination_type",function(e,t,n){var r,i={};if(t==="vh"||t==="vhh")A.set("errors",{value:["minors-without-age","exceeded-minors-in-arms","passengers-exceeded"]}),A.setConfigKey("minAgeToCarriedAChildInArms",bt);t==="ha"&&(A.set("errors",{value:["minors-without-age","exceeded-minors-in-arms"]}),A.setConfigKey("minAgeToCarriedAChildInArms",wt)),n.from||(t==="va"?(i=b(),e.set(i),an(),H()):e.previous("combination_type")==="va"&&(i=T(),e.set(i),fn(),H()),t==="va"?r=O.validate():r=A.validate(),r?Ut():zt("generic_distribution_error"))}),e.once("change:combination_type",function(e){t.size(e.changed)!==1&&(ht=e.get("combination_type").toUpperCase()),e.get("combination_type")==="vh"?(n(".sbox-radio-vh",o).attr("checked","checked"),n(".sbox-radio-ha",o).removeAttr("checked"),n(".sbox-radio-va",o).removeAttr("checked"),n(".sbox-radio-vhh",o).removeAttr("checked")):e.get("combination_type")==="vhh"?(n(".sbox-radio-vhh",o).attr("checked","checked"),n(".sbox-radio-vh",o).removeAttr("checked"),n(".sbox-radio-ha",o).removeAttr("checked"),n(".sbox-radio-va",o).removeAttr("checked")):e.get("combination_type")==="va"?(n(".sbox-radio-va",o).attr("checked","checked"),n(".sbox-radio-vh",o).removeAttr("checked"),n(".sbox-radio-ha",o).removeAttr("checked"),n(".sbox-radio-vhh",o).removeAttr("checked")):e.get("combination_type")==="ha"&&(n(".sbox-radio-ha",o).attr("checked","checked"),n(".sbox-radio-vh",o).removeAttr("checked"),n(".sbox-radio-va",o).removeAttr("checked"),n(".sbox-radio-vhh",o).removeAttr("checked"));var r={},i=e.get("start_date"),s=e.get("end_date");typeof i=="string"&&i.length===10&&(r.checkIn=i),typeof s=="string"&&s.length===10&&(r.checkOut=s)}),k.length>0&&k.remove(),k=n(document.createElement("div")),k.addClass("datepicker-packages"),v=new r(k.get(0),ct,dt),N.prepend(k),e.on("change:start_date",function(e,t,n){var r=u.parseFullDateString(P.config.params.language,t);et.val(r),n.hasOwnProperty("from")&&v.set("start-date",t)}),e.on("change:end_date",function(e,t,n){var r=u.parseFullDateString(P.config.params.language,t);tt.val(r),n.hasOwnProperty("from")&&v.set("end-date",t)}),e.once("change:start_date, change:end_date",function(e){var t=e.get("start_date"),n=e.get("end_date");t!==""&&n!==""&&(e.get("hotel_start_date")===""&&e.get("hotel_end_date")===""&&e.set({hotel_start_date:t,hotel_end_date:n}),e.get("car_start_date")===""&&e.get("car_end_date")===""&&e.set({car_start_date:t,car_end_date:n}))}),v.subscribe("date-selected",function(e,t){var n;pt.change("datePicker");if(e==="start"){v.set("start-date",t),n=u.parseFullDateString(P.config.params.language,t),et.val(n);if(v.get("end_date")===""){var r=tt.offset();tt.focus(),this.show("end",{x:r.left,y:r.top+C.offsetInput+7})}}else if(e==="end"){var i=this.get("isMobileViewport");v.set("end-date",t),n=u.parseFullDateString(P.config.params.language,t),tt.val(n);if(t!=="")if(v.get("start_date")===""||i){var s=et.offset();et.focus(),this.show("start",{x:s.left,y:s.top+C.offsetInput+7})}}}),v.subscribe("successfully-selection",function(t,n){e.set("start_date",n.get("start_date")),e.set("end_date",n.get("end_date"));if(s){var r=et.offset();et.focus(),this.show("start",{x:r.left,y:r.top+C.offsetInput+7})}else setTimeout(function(){v.hide()},300)}),v.subscribe("closing-confirmation",function(t){return et.val(u.parseFullDateString(P.config.params.language,e.get("start_date"))),tt.val(u.parseFullDateString(P.config.params.language,e.get("end_date"))),t!==et.get(0)&&t!==tt.get(0)}),v.subscribe("error",function(t){switch(t){case"start_date_out_of_range":e.set("start_date",""),e.set("start_date_description",""),e.set("end_date",""),e.set("end_date_description",""),e.get("hotel_start_date")!==""&&(e.set("hotel_start_date",""),e.set("hotel_end_date","")),e.get("car_start_date")!==""&&(e.set("car_start_date",""),e.set("car_end_date",""));break;case"end_date_out_of_range":e.set("start_date",""),e.set("start_date_description",""),e.set("end_date",""),e.set("end_date_description","");break;case"start_date_not_allowed":e.set("start_date",""),e.set("start_date_description","");break;case"end_date_not_allowed":e.set("end_date",""),e.set("end_date_description","")}}),M.length>0&&M.remove(),M=n(document.createElement("div")),M.addClass("datepicker-packages-hotel-partial-stay"),L=new r(M.get(0),vt,mt),N.prepend(M),e.on("change:hotel_start_date",function(e,t){var n=u.parseFullDateString(P.config.params.language,t);Y.val(n),L.set("start-date",t)}),e.on("change:hotel_end_date",function(e,t){var n=u.parseFullDateString(P.config.params.language,t);Z.val(n),L.set("end-date",t)}),e.on("change:hotel_alternative_date_selected",function(e){e.get("start_date")!==""&&e.get("end_date")!==""&&e.get("hotel_start_date")===""&&e.get("hotel_end_date")===""&&e.set({hotel_start_date:e.get("start_date"),hotel_end_date:e.get("end_date")})}),L.subscribe("date-selected",function(t,n){pt.change("datePickerSecond");if(t==="start"){e.set("hotel_start_date",n);if(e.get("hotel_end_date")===""){var r=Z.offset();Z.focus(),this.show("end",{x:r.left,y:r.top+C.offsetInput+7})}}else if(t==="end"){var i=this.get("isMobileViewport");e.set("hotel_end_date",n);if(n!=="")if(e.get("hotel_start_date")===""||i){var s=Y.offset();Y.focus(),this.show("start",{x:s.left,y:s.top+C.offsetInput+7})}}}),L.subscribe("successfully-selection",function(){if(s){var e=Y.offset();Y.focus(),this.show("start",{x:e.left,y:e.top+C.offsetInput+7})}else setTimeout(function(){L.hide()},300)}),L.subscribe("closing-confirmation",function(e){return e!==Y.get(0)&&e!==Z.get(0)}),L.subscribe("error",function(t){switch(t){case"start_date_out_of_range":e.set("hotel_start_date",""),e.set("hotel_start_date_description",""),e.set("hotel_end_date",""),e.set("hotel_end_date_description","");break;case"end_date_out_of_range":e.set("hotel_start_date",""),e.set("hotel_start_date_description",""),e.set("hotel_end_date",""),e.set("hotel_end_date_description","");break;case"start_date_not_allowed":e.set("hotel_start_date",""),e.set("hotel_start_date_description","");break;case"end_date_not_allowed":e.set("hotel_end_date",""),e.set("hotel_end_date_description","")}}),_.length>0&&_.remove(),_=n(document.createElement("div")),_.addClass("datepicker-packages-car"),m=new r(_.get(0),gt,yt),N.prepend(_),e.on("change:car_start_date",function(e,t){var n=u.parseFullDateString(F,t);Q.val(n),m.set("start-date",t)}),e.on("change:car_end_date",function(e,t){var n=u.parseFullDateString(F,t);G.val(n),m.set("end-date",t)}),m.subscribe("date-selected",function(t,n){pt.change("datePickerSecond");if(t==="start"){e.set("car_start_date",n);if(e.get("car_end_date")===""){var r=G.offset();this.show("end",{x:r.left,y:r.top+C.offsetInput+7})}}else if(t==="end"){e.set("car_end_date",n);if(e.get("car_start_date")===""){var i=Q.offset();this.show("start",{x:i.left,y:i.top+C.offsetInput+7})}}document.activeElement.blur()}),e.on("change:rooms change:room_1_adults change:room_1_minors change:adults change:minors",function(e,t,n){n.from!=="LS"&&n.from!=="Init"&&pt.change("distriPicker")}),e.on("change:car_start_time change:car_end_time",function(e,t,n){n.from!=="LS"&&n.from!=="Init"&&pt.change("datePickerSecond")}),m.subscribe("successfully-selection",function(){if(s){var e=Q.offset();this.show("start",{x:e.left,y:e.top+C.offsetInput+7})}else setTimeout(function(){m.hide()},300)}),m.subscribe("closing-confirmation",function(e){return e!==Q.get(0)&&e!==G.get(0)}),m.subscribe("error",function(t){switch(t){case"start_date_out_of_range":e.set("car_start_date",""),e.set("car_start_date_description",""),e.set("car_end_date",""),e.set("car_end_date_description","");break;case"end_date_out_of_range":e.set("car_start_date",""),e.set("car_start_date_description",""),e.set("car_end_date",""),e.set("car_end_date_description","");break;case"start_date_not_allowed":e.set("car_start_date",""),e.set("car_start_date_description","");break;case"end_date_not_allowed":e.set("car_end_date",""),e.set("car_end_date_description","")}}),It.length===0&&(It=n(document.createElement("div")),It.addClass("distpicker"),It.addClass("distpicker-rooms-packages")),qt.length===0&&(qt=n(document.createElement("div")),qt.addClass("distpicker"),qt.addClass("distpicker-passengers-packages")),A=new l(It,Et,xt),O=new l(qt,St,xt),N.prepend(It),N.prepend(qt),A.subscribe("closing-confirmation",function(e){return e!==X.get(0)&&e!==V.get(0)}),O.subscribe("closing-confirmation",function(e){return e!==V.get(0)}),A.subscribe("close",function(){n(".sbox-distribution-picker-wrapper",o).removeClass("sbox-ui-open-distri")}),O.subscribe("close",function(){n(".sbox-distribution-picker-wrapper",o).removeClass("sbox-ui-open-distri")}),A.subscribe("user-change-room",function(t,n){var r,i,s,o;if(!n.hasOwnProperty("component")){r=n.get("room_"+(t-1)+"_adults"),e.set("room_"+t+"_adults",r),i=n.get("room_"+(t-1)+"_minors"),e.set("room_"+t+"_minors",i);for(var u=1;u<=i;u++)o="room_"+(t-1)+"_minor_"+(u-1)+"_age",s=n.get(o),e.set("room_"+t+"_minor_"+u+"_age",s)}}),A.subscribe("user-selection",function(t){var n=Wt(t,Tt,!0);e.set(n);var r=E.getQueryFromRoomsModel(e.attributes);e.set("distribution",r)}),O.subscribe("user-selection",function(t){var n=Wt(t,Tt,!0);e.set(n);var r=E.getQueryFromPassengersModel(e.attributes);e.set("distribution",r)}),A.subscribe("error",function(e){e.length>1?zt("generic_distribution_error"):zt(e[0])}),O.subscribe("error",function(e){e.length>1?zt("generic_distribution_error"):zt(e[0])}),O.subscribe("tooltipMaxShowed",function(e){q.track("showed-tooltip-max","show_morepax",e)}),A.subscribe("tooltipMaxShowed",function(e){q.track("showed-tooltip-max","show_morepax",e)});var ln={};e.get("combination_type")==="va"?(ln=T(),e.set(ln),an(),H()):(ln=b(),e.set(ln),fn(),H());var cn=!1;e.once("change:distribution",function(e,t,n){n.from&&(cn=!0)});var hn="change:distribution ",pn=" change:minor_1_age change:minor_2_age change:minor_3_age change:minor_4_age change:minor_5_age change:minor_6_age change:minor_7_age",dn=" change:room_1_adults change:room_2_adults  change:room_3_adults  change:room_4_adults ",vn=" change:room_1_minors change:room_2_minors change:room_3_minors change:room_4_minors ",mn="";for(var gn=1;gn<5;gn++)for(var yn=1;yn<8;yn++)mn+=" change:room_"+gn+"_minor_"+yn+"_age ";var bn;e.once(hn+pn+dn+vn+mn+" change:adults change:minors change:rooms change:combination_type change:start_date change:end_date  ",wn)}})}}),define("boxes/packages.module/js/modelTransform",[],function(){return function(e){if(!e.profile_suggester||e.profile_suggester===""){e.destination_iata=e.destination_iata?e.destination_iata:typeof e.destination_code=="string"?e.destination_code:"",e.destination_oid=e.destination_oid?e.destination_oid:e.destination_code&&Number.isInteger(parseInt(e.destination_code,10))?e.destination_code:"";if(e.combination_type==="vhh"&&!e.origin_gid||!e.origin_oid)e.origin_description="",e.origin_iata="",e.origin_code="",e.origin_oid="";if(e.combination_type==="vhh"&&!e.destination_gid||!e.destination_iata||!e.destination_oid)e.destination_description="",e.destination_iata="",e.destination_code="",e.destination_oid="";e.destination_city_code||(e.destination_city_code=e.destination_iata),e.hotel_destination_oid=e.hotel_destination_code?e.hotel_destination_code:"",e.profile_suggester=""}return e.origin_iata=e.origin_iata?e.origin_iata:typeof e.origin_code=="string"?e.origin_code:"",e.origin_oid=e.origin_oid?e.origin_oid:e.origin_code&&Number.isInteger(parseInt(e.origin_code,10))?e.origin_code:"",e.origin_city_code||(e.origin_city_code=e.origin_iata),e}}),define("boxes/packages.module/js/main",["boxes/core.module/js/box","./config","./model","./viewModel","./bindings","./urlHelper","./modelTransform","common.module/js/versionHelper","common.module/js/abHelper"],function(e,t,n,r,i,s,o,u,a){var f=function(){this.moduleConfig=t,e.apply(this,arguments)};return f.prototype=Object.create(e.prototype),f.prototype.getSearchURL=function(){return"//"+document.location.host+"/"+s(this.model.toJSON(),this.moduleConfig,new a(this.options.commonConfig.ab))},f.prototype.initialize=function(){var e=this,t=e.options;e.model=new(n(t)),e.viewModel=new(r(t)),e.bindings=new(i(t))({viewModel:e.viewModel,model:e.model,el:t.config.container})},f.prototype.localStorageVersionHandler=function(e,t,n){if(u.compare(n,"3.3.14")<0)return window&&window.console&&window.console.warn&&window.console.warn("Ignoring incompatible localStorage (version: "+n+") data for '"+this.moduleName+"' box."),{}},f.prototype.localStorageHandler=function(e){return e.combination_type==="ha"||!e.distribution||e.distribution.indexOf("undefined")>-1||!e.distribution?{}:e},f.prototype.transformBeforeSave=function(e){return!e.hotel_alternative_destination_selected&&!e.hotel_alternative_date_selected&&(e.advanced_options_selected=!1),e},f.prototype.transformBeforeSetModel=function(e){return o(e)},f});